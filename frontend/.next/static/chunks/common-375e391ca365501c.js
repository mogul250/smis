"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[592],{856:function(e,s,a){a.d(s,{f:function(){return RoleBreakdownCard}});var t=a(5893);a(7294);var l=a(4105),r=a(7219);let RoleBreakdownCard=e=>{let{stats:s,loading:a}=e,n=[{key:"student",label:"Students",color:"blue",icon:r.hbr},{key:"teacher",label:"Teachers",color:"green",icon:r.WY8},{key:"hod",label:"HODs",color:"purple",icon:r.bfl},{key:"finance",label:"Finance",color:"orange",icon:r.bAx},{key:"admin",label:"Admins",color:"red",icon:r.bfl}];if(a)return(0,t.jsx)(l.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded mr-3"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"})]}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-8"})]},s))})]})});let i=Object.values(s.byRole||{}).reduce((e,s)=>e+s,0);return(0,t.jsxs)(l.Z,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Distribution"}),(0,t.jsx)("div",{className:"space-y-3",children:n.map(e=>{var a;let l=(null===(a=s.byRole)||void 0===a?void 0:a[e.key])||0,r=e.icon;return(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-".concat(e.color,"-100 rounded flex items-center justify-center mr-3"),children:(0,t.jsx)(r,{className:"w-4 h-4 text-".concat(e.color,"-600")})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.label})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-gray-900 mr-2",children:l}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",i>0?Math.round(l/i*100):0,"%)"]})]})]},e.key)})}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,t.jsx)("div",{className:"space-y-2",children:n.map(e=>{var a;let l=(null===(a=s.byRole)||void 0===a?void 0:a[e.key])||0,r=i>0?l/i*100:0;return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 w-16",children:e.label}),(0,t.jsx)("div",{className:"flex-1 mx-2",children:(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-".concat(e.color,"-500 h-2 rounded-full transition-all duration-300"),style:{width:"".concat(r,"%")}})})}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 w-8",children:[Math.round(r),"%"]})]},"".concat(e.key,"-bar"))})})})]})};s.Z=e=>{var s;let{stats:a,totalUsers:n,loading:i}=e,d=[{title:"Total Users",value:n||0,change:"+12%",changeType:"positive",icon:r.WY8,color:"blue",description:"All system users"},{title:"Active Users",value:a.activeUsers||0,change:"".concat(n>0?Math.round(a.activeUsers/n*100):0,"%"),changeType:"positive",icon:r.tMu,color:"green",description:"Currently active"},{title:"New This Month",value:a.newThisMonth||0,change:"+8%",changeType:"positive",icon:r.zy7,color:"purple",description:"Recent additions"},{title:"Students",value:(null===(s=a.byRole)||void 0===s?void 0:s.student)||0,change:"+5%",changeType:"positive",icon:r.hbr,color:"indigo",description:"Enrolled students"}],getColorClasses=e=>{let s={blue:{bg:"bg-blue-50",icon:"text-blue-600",iconBg:"bg-blue-100"},green:{bg:"bg-green-50",icon:"text-green-600",iconBg:"bg-green-100"},purple:{bg:"bg-purple-50",icon:"text-purple-600",iconBg:"bg-purple-100"},indigo:{bg:"bg-indigo-50",icon:"text-indigo-600",iconBg:"bg-indigo-100"},orange:{bg:"bg-orange-50",icon:"text-orange-600",iconBg:"bg-orange-100"},red:{bg:"bg-red-50",icon:"text-red-600",iconBg:"bg-red-100"}};return s[e]||s.blue};return i?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(l.Z,{className:"p-6 animate-pulse",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-16 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"})]})},s))}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:d.map((e,s)=>{let a=e.icon,n=getColorClasses(e.color),i="positive"===e.changeType;return(0,t.jsx)(l.Z,{className:"p-6 hover:shadow-md transition-shadow duration-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:e.title}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:e.value.toLocaleString()}),(0,t.jsxs)("div",{className:"flex items-center",children:[i?(0,t.jsx)(r.QqI,{className:"w-4 h-4 text-green-500 mr-1"}):(0,t.jsx)(r.ZBs,{className:"w-4 h-4 text-red-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm font-medium ".concat(i?"text-green-600":"text-red-600"),children:e.change}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:e.description})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 ".concat(n.iconBg," rounded-lg flex items-center justify-center"),children:(0,t.jsx)(a,{className:"w-6 h-6 ".concat(n.icon)})})]})},s)})})}},1578:function(e,s,a){var t=a(5893);a(7294);var l=a(1664),r=a.n(l),n=a(5675),i=a.n(n),d=a(582),c=a(7219);s.Z=e=>{let{post:s,featured:a=!1}=e,formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),getReadingTime=e=>{let s=e.split(" ").length;return Math.ceil(s/200)};return a?(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-white shadow-xl hover:shadow-2xl transition-all duration-300 group",children:[(0,t.jsxs)("div",{className:"aspect-w-16 aspect-h-9 relative",children:[s.image.includes("/api/placeholder")?(0,t.jsx)(d.Z,{width:800,height:400,text:s.category,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):(0,t.jsx)(i(),{src:s.image,alt:s.title,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),(0,t.jsx)("div",{className:"absolute top-4 left-4",children:(0,t.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary-blue text-white",children:s.category})})]}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm mb-3 opacity-90",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(c.vlc,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:formatDate(s.date)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(c.TCC,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[getReadingTime(s.content)," min read"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(c.fzv,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:s.author})]})]}),(0,t.jsx)("h3",{className:"text-2xl font-bold mb-2 group-hover:text-blue-200 transition-colors",children:s.title}),(0,t.jsx)("p",{className:"text-gray-200 mb-4 line-clamp-2",children:s.excerpt}),(0,t.jsxs)(r(),{href:"/blog/".concat(s.slug),className:"inline-flex items-center text-white hover:text-blue-200 font-medium transition-colors group",children:["Read More",(0,t.jsx)(c.Rgz,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]}):(0,t.jsxs)("article",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group",children:[(0,t.jsxs)("div",{className:"aspect-w-16 aspect-h-9 relative",children:[s.image.includes("/api/placeholder")?(0,t.jsx)(d.Z,{width:600,height:300,text:s.category,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):(0,t.jsx)(i(),{src:s.image,alt:s.title,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"}),(0,t.jsx)("div",{className:"absolute top-4 left-4",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-white/90 text-gray-800",children:s.category})})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(c.vlc,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:formatDate(s.date)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(c.TCC,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[getReadingTime(s.content)," min read"]})]})]}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-primary-blue transition-colors line-clamp-2",children:s.title}),(0,t.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-3",children:s.excerpt}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(c.fzv,{className:"w-4 h-4 text-gray-600"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:s.author})]}),(0,t.jsxs)(r(),{href:"/blog/".concat(s.slug),className:"inline-flex items-center text-primary-blue hover:text-blue-700 font-medium text-sm transition-colors group",children:["Read More",(0,t.jsx)(c.Rgz,{className:"ml-1 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]})]})}},582:function(e,s,a){var t=a(5893);a(7294),s.Z=e=>{let{width:s=600,height:a=300,text:l="Blog Image",className:r=""}=e,n=["from-blue-400 to-blue-600","from-purple-400 to-purple-600","from-green-400 to-green-600","from-pink-400 to-pink-600","from-indigo-400 to-indigo-600","from-red-400 to-red-600","from-yellow-400 to-yellow-600","from-teal-400 to-teal-600"],i=l.split("").reduce((e,s)=>(e=(e<<5)-e+s.charCodeAt(0))&e,0),d=Math.abs(i)%n.length,c=n[d];return(0,t.jsx)("div",{className:"bg-gradient-to-br ".concat(c," flex items-center justify-center text-white font-semibold ").concat(r),style:{width:"".concat(s,"px"),height:"".concat(a,"px")},children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-base md:text-lg opacity-90",children:l}),(0,t.jsxs)("div",{className:"text-xs md:text-sm opacity-70 mt-1",children:[s," \xd7 ",a]})]})})}},9175:function(e,s,a){var t=a(5893);a(7294);var l=a(7219);s.Z=e=>{let{children:s,variant:a="info",dismissible:r=!1,onDismiss:n,className:i="",...d}=e,c={success:{classes:"bg-green-50 border-green-200 text-green-800",icon:l._rq,iconColor:"text-green-400"},error:{classes:"bg-red-50 border-red-200 text-red-800",icon:l.bcx,iconColor:"text-red-400"},warning:{classes:"bg-yellow-50 border-yellow-200 text-yellow-800",icon:l.BJv,iconColor:"text-yellow-400"},info:{classes:"bg-blue-50 border-blue-200 text-blue-800",icon:l.H33,iconColor:"text-blue-400"}},x=c[a],o=x.icon;return(0,t.jsx)("div",{className:"".concat("p-4 rounded-md border"," ").concat(x.classes," ").concat(i),role:"alert",...d,children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(o,{className:"h-5 w-5 ".concat(x.iconColor),"aria-hidden":"true"})}),(0,t.jsx)("div",{className:"ml-3 flex-1",children:s}),r&&(0,t.jsx)("div",{className:"ml-auto pl-3",children:(0,t.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,t.jsx)("button",{type:"button",className:"inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat("success"===a?"text-green-500 hover:bg-green-100 focus:ring-green-600":"error"===a?"text-red-500 hover:bg-red-100 focus:ring-red-600":"warning"===a?"text-yellow-500 hover:bg-yellow-100 focus:ring-yellow-600":"text-blue-500 hover:bg-blue-100 focus:ring-blue-600"),onClick:n,"aria-label":"Dismiss alert",children:(0,t.jsx)(l.q5L,{className:"h-5 w-5","aria-hidden":"true"})})})})]})})}},7014:function(e,s,a){var t=a(5893);a(7294),s.Z=e=>{let{children:s,variant:a="default",size:l="md",className:r="",...n}=e;return(0,t.jsx)("span",{className:"".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[a]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}[l]," ").concat(r),...n,children:s})}},4082:function(e,s,a){var t=a(5893);a(7294);var l=a(6761);s.Z=()=>{var e;let{user:s,logout:a}=(0,l.a)();return(0,t.jsx)("header",{className:"bg-primary-blue text-white shadow-lg",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("h1",{className:"text-xl font-bold",children:"SMIS"}),(0,t.jsx)("span",{className:"text-sm opacity-75",children:"School Management Information System"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"opacity-75",children:"Welcome, "}),(0,t.jsxs)("span",{className:"font-medium",children:[null==s?void 0:s.first_name," ",null==s?void 0:s.last_name]}),(0,t.jsx)("span",{className:"ml-2 px-2 py-1 bg-primary-light rounded text-xs",children:null==s?void 0:null===(e=s.role)||void 0===e?void 0:e.toUpperCase()})]}),(0,t.jsx)("button",{onClick:a,className:"px-3 py-1 bg-accent-red hover:bg-red-600 rounded text-sm transition-colors",children:"Logout"})]})]})})}},5822:function(e,s,a){var t=a(5893),l=a(7294);let r=(0,l.forwardRef)((e,s)=>{let{label:a,error:l,helperText:r,className:n="",containerClassName:i="",required:d=!1,icon:c,...x}=e,o=c?"pl-10 pr-3 py-2":"px-3 py-2";return(0,t.jsxs)("div",{className:i,children:[a&&(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a,d&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[c&&(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(c,{className:"h-5 w-5 text-gray-400"})}),(0,t.jsx)("input",{ref:s,className:"".concat("block w-full border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 sm:text-sm transition-colors"," ").concat(l?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-light focus:border-primary-light"," ").concat(o," ").concat(n),"aria-invalid":l?"true":"false","aria-describedby":l?"".concat(x.id,"-error"):r?"".concat(x.id,"-helper"):void 0,...x})]}),l&&(0,t.jsx)("p",{id:"".concat(x.id,"-error"),className:"mt-1 text-sm text-red-600",role:"alert",children:l}),r&&!l&&(0,t.jsx)("p",{id:"".concat(x.id,"-helper"),className:"mt-1 text-sm text-gray-500",children:r})]})});r.displayName="Input",s.Z=r},5936:function(e,s,a){a.d(s,{Z:function(){return common_Sidebar}});var t={};a.r(t);var l=a(5893),r=a(7294),n=a(1664),i=a.n(n),d=a(6761),c=a(1163),x=a(7219),admin_AdminNavigation=()=>{let e=(0,c.useRouter)(),s=[{name:"Dashboard",href:"/dashboard",icon:x.m6D,current:"/dashboard"===e.pathname},{name:"Users",href:"/admin/users",icon:x.WY8,current:"/admin/users"===e.pathname},{name:"Analytics",href:"/admin/analytics",icon:x.DKx,current:"/admin/analytics"===e.pathname},{name:"Calendar",href:"/admin/calendar",icon:x.vlc,current:"/admin/calendar"===e.pathname},{name:"System",href:"/admin/system",icon:x.nbt,current:"/admin/system"===e.pathname}],a=[{name:"Database",href:"/admin/database",icon:x.bGz,current:"/admin/database"===e.pathname},{name:"Security",href:"/admin/security",icon:x.bfl,current:"/admin/security"===e.pathname},{name:"Email",href:"/admin/email",icon:x.Imn,current:"/admin/email"===e.pathname},{name:"Server",href:"/admin/server",icon:x.j8v,current:"/admin/server"===e.pathname}];return(0,l.jsxs)("nav",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"space-y-1",children:s.map(e=>{let s=e.icon;return(0,l.jsxs)(i(),{href:e.href,className:"group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ".concat(e.current?"bg-blue-100 text-blue-700 border-r-2 border-blue-500":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[s&&(0,l.jsx)(s,{className:"mr-3 h-5 w-5 flex-shrink-0 ".concat(e.current?"text-blue-500":"text-gray-400 group-hover:text-gray-500")}),e.name]},e.name)})}),(0,l.jsxs)("div",{className:"pt-6",children:[(0,l.jsx)("div",{className:"px-3 mb-3",children:(0,l.jsx)("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"System"})}),(0,l.jsx)("div",{className:"space-y-1",children:a.map(e=>{let s=e.icon;return(0,l.jsxs)(i(),{href:e.href,className:"group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ".concat(e.current?"bg-blue-100 text-blue-700 border-r-2 border-blue-500":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[s&&(0,l.jsx)(s,{className:"mr-3 h-5 w-5 flex-shrink-0 ".concat(e.current?"text-blue-500":"text-gray-400 group-hover:text-gray-500")}),e.name]},e.name)})})]})]})},common_Sidebar=()=>{let{user:e}=(0,d.a)(),[s,a]=(0,r.useState)(!1);if(!e)return(0,l.jsx)("aside",{className:"bg-gray-50 border-r border-gray-200 w-64",children:(0,l.jsx)("div",{className:"p-4",children:(0,l.jsx)("div",{className:"text-center text-gray-500",children:"Loading..."})})});let n=(()=>{let s=[{icon:x.m6D,label:"Dashboard",path:"/dashboard"}];switch(null==e?void 0:e.role){case"student":return[...s,{icon:x.fzv,label:"Profile",path:"/student/profile"},{icon:x.yK7,label:"Grades",path:"/student/grades"},{icon:x.j4u,label:"Attendance",path:"/student/attendance"},{icon:x.vlc,label:"Timetable",path:"/student/timetable"},{icon:x.oQC,label:"Fees",path:"/student/fees"}];case"teacher":return[...s,{icon:x.fzv,label:"Profile",path:"/teacher/profile"},{icon:x.WY8,label:"Classes",path:"/teacher/classes"},{icon:x.j4u,label:"Attendance",path:"/teacher/attendance"},{icon:x.yK7,label:"Grades",path:"/teacher/grades"},{icon:x.vlc,label:"Timetable",path:"/teacher/timetable"}];case"hod":return[...s,{icon:x.WY8,label:"Teachers",path:"/hod/teachers"},{icon:x.yK7,label:"Courses",path:"/hod/courses"},{icon:x.DKx,label:"Reports",path:"/hod/reports"},{icon:x.vlc,label:"Timetable",path:"/hod/timetable"},{icon:x.nbt,label:"Approvals",path:"/hod/approvals"},{icon:x.Imn,label:"Notifications",path:"/hod/notifications"}];case"finance":return[...s,{icon:x.oQC,label:"Fees",path:"/finance/fees"},{icon:FiBarChart3,label:"Reports",path:"/finance/reports"},{icon:x.WY8,label:"Students",path:"/finance/students"},{icon:x.j4u,label:"Invoices",path:"/finance/invoices"}];case"admin":return[...s,{icon:x.WY8,label:"Users",path:"/admin/users"},{icon:t.FiGraduationCap,label:"Students",path:"/admin/students"},{icon:x.vlc,label:"Calendar",path:"/admin/calendar"},{icon:x.nbt,label:"System",path:"/admin/system"},{icon:FiBarChart3,label:"Analytics",path:"/admin/analytics"}];default:return s}})();return(0,l.jsxs)("aside",{className:"bg-gray-50 border-r border-gray-200 transition-all duration-300 ".concat(s?"w-16":"w-64"),children:[(0,l.jsx)("div",{className:"p-4",children:(0,l.jsx)("button",{onClick:()=>a(!s),className:"w-full flex justify-end text-gray-500 hover:text-gray-700",children:s?(0,l.jsx)(x.Tfp,{}):(0,l.jsx)(x.YFh,{})})}),(0,l.jsx)("nav",{className:"px-2",children:(null==e?void 0:e.role)==="admin"?(0,l.jsx)(admin_AdminNavigation,{}):n.map((e,a)=>{let t=e.icon;return t?(0,l.jsxs)(i(),{href:e.path,className:"flex items-center px-3 py-2 mb-1 text-gray-700 rounded-lg hover:bg-primary-light hover:text-white transition-colors",children:[(0,l.jsx)(t,{className:"w-5 h-5"}),!s&&(0,l.jsx)("span",{className:"ml-3 text-sm font-medium",children:e.label})]},a):null})})]})}},6208:function(e,s,a){var t=a(5893),l=a(7294);let Table=e=>{let{children:s,className:a="",striped:l=!1,hover:r=!0,...n}=e;return(0,t.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,t.jsx)("table",{className:"".concat("min-w-full divide-y divide-gray-200"," ").concat(a),...n,children:s})})};Table.Header=e=>{let{children:s,className:a="",...l}=e;return(0,t.jsx)("thead",{className:"bg-gray-50 ".concat(a),...l,children:s})},Table.Body=e=>{let{children:s,className:a="",striped:r=!1,hover:n=!0,...i}=e;return(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 ".concat(a),...i,children:l.Children.map(s,(e,s)=>{if(l.isValidElement(e)){let a=[r&&s%2==1?"bg-gray-50":"",n?"hover:bg-gray-50":"",e.props.className||""].filter(Boolean).join(" ");return l.cloneElement(e,{className:a})}return e})})},Table.Row=e=>{let{children:s,className:a="",...l}=e;return(0,t.jsx)("tr",{className:"transition-colors ".concat(a),...l,children:s})},Table.Head=e=>{let{children:s,className:a="",sortable:l=!1,...r}=e,n="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ".concat(l?"cursor-pointer hover:text-gray-700":""," ").concat(a);return(0,t.jsx)("th",{className:n,scope:"col",...r,children:s})},Table.Cell=e=>{let{children:s,className:a="",...l}=e;return(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 ".concat(a),...l,children:s})},s.Z=Table},9060:function(e,s,a){a.d(s,{QD:function(){return timetable_TimetableFilters},mG:function(){return timetable_TimetableGrid},V:function(){return timetable_TimetableModal}});var t=a(5893),l=a(7294),r=a(7014),n=a(9180),timetable_TimetableSlot=e=>{let{slot:s,editable:a=!1,showActions:l=!1,onClick:i,onEdit:d,onDelete:c,colorScheme:x="default",size:o="default"}=e;if(!s)return(0,t.jsx)("div",{className:"\n        ".concat("small"===o?"min-h-12 p-1":"min-h-16 p-2","\n        border-2 border-dashed border-gray-200 rounded-lg\n        flex items-center justify-center text-gray-400 text-xs\n        ").concat(a?"hover:border-gray-300 cursor-pointer":"","\n      "),onClick:a?i:void 0,children:a&&(0,t.jsx)("span",{children:"+ Add Class"})});let formatTime=e=>e?e.substring(0,5):"";return(0,t.jsxs)("div",{className:"\n        ".concat((()=>{switch(x){case"status":return"approved"===s.status?"bg-green-100 border-green-200 text-green-800":"rejected"===s.status?"bg-red-100 border-red-200 text-red-800":"bg-yellow-100 border-yellow-200 text-yellow-800";case"course":let e=["bg-blue-100 border-blue-200 text-blue-800","bg-purple-100 border-purple-200 text-purple-800","bg-green-100 border-green-200 text-green-800","bg-orange-100 border-orange-200 text-orange-800","bg-pink-100 border-pink-200 text-pink-800"];return e[s.course_id%e.length];default:return"bg-blue-100 border-blue-200 text-blue-800"}})(),"\n        ").concat("small"===o?"p-1 text-xs":"p-2 text-sm","\n        border rounded-lg mb-1 relative group\n        ").concat(i?"cursor-pointer hover:shadow-md":"","\n        transition-all duration-200\n      "),onClick:i,children:[(0,t.jsx)("div",{className:"font-medium truncate ".concat("small"===o?"text-xs":"text-sm"),children:s.course_name||s.course_code}),s.teacher_name&&(0,t.jsx)("div",{className:"text-opacity-80 truncate ".concat("small"===o?"text-xs":"text-sm"),children:s.teacher_name}),(0,t.jsxs)("div",{className:"text-opacity-70 ".concat("text-xs"),children:[formatTime(s.start_time)," - ",formatTime(s.end_time)]}),s.room&&(0,t.jsxs)("div",{className:"text-opacity-70 ".concat("text-xs"),children:["\uD83D\uDCCD ",s.room]}),"status"===x&&s.status&&(0,t.jsx)("div",{className:"absolute top-1 right-1",children:(0,t.jsx)(r.Z,{variant:"approved"===s.status?"success":"rejected"===s.status?"error":"warning",size:"xs",children:s.status})}),l&&(a||d||c)&&(0,t.jsx)("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsxs)("div",{className:"flex space-x-1",children:[d&&(0,t.jsx)(n.Z,{size:"xs",variant:"outline",onClick:e=>{e.stopPropagation(),d(s)},className:"p-1",children:"✏️"}),c&&(0,t.jsx)(n.Z,{size:"xs",variant:"outline",onClick:e=>{e.stopPropagation(),c(s)},className:"p-1 text-red-600 hover:text-red-800",children:"\uD83D\uDDD1️"})]})})]})},i=a(4105),timetable_TimetableGrid=e=>{let{timetable:s=[],editable:a=!1,showActions:r=!1,colorScheme:d="default",onSlotClick:c,onSlotEdit:x,onSlotDelete:o,onAddSlot:m,title:h="Weekly Schedule"}=e,[u,j]=(0,l.useState)("grid"),g=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],v=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],p={};function getDayName(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]||"Unknown"}g.forEach(e=>{p[e]={},v.forEach(s=>{p[e][s]=[]})}),null==s||s.forEach(e=>{var s;let a=getDayName(e.day_of_week),t=null===(s=e.start_time)||void 0===s?void 0:s.substring(0,5);p[a]&&p[a][t]&&p[a][t].push(e)});let handleSlotClick=(e,s,t)=>{if(t.length>0)c&&c(t[0]);else if(a&&m){let a=g.indexOf(e)+1;m({day:a,start_time:s})}};return"list"===u?(0,t.jsxs)(i.Z,{className:"overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:h}),(0,t.jsx)("div",{className:"flex space-x-2",children:(0,t.jsx)(n.Z,{size:"sm",variant:"outline",onClick:()=>j("grid"),children:"\uD83D\uDCC5 Grid View"})})]}),(0,t.jsx)("div",{className:"p-6",children:g.map(e=>{let l=null==s?void 0:s.filter(s=>getDayName(s.day_of_week)===e).sort((e,s)=>{var a;return null===(a=e.start_time)||void 0===a?void 0:a.localeCompare(s.start_time)});return(null==l?void 0:l.length)?(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:e}),(0,t.jsx)("div",{className:"space-y-2",children:l.map((e,s)=>(0,t.jsx)(timetable_TimetableSlot,{slot:e,editable:a,showActions:r,colorScheme:d,onClick:()=>null==c?void 0:c(e),onEdit:x,onDelete:o},"".concat(e.id,"-").concat(s)))})]},e):null})})]}):(0,t.jsxs)(i.Z,{className:"overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:h}),(0,t.jsx)("div",{className:"flex space-x-2",children:(0,t.jsx)(n.Z,{size:"sm",variant:"outline",onClick:()=>j("list"),children:"\uD83D\uDCCB List View"})})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("div",{className:"min-w-full",children:[(0,t.jsxs)("div",{className:"grid grid-cols-8 gap-1 p-4 bg-gray-50 border-b",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-gray-500 text-center",children:"Time"}),g.map(e=>(0,t.jsx)("div",{className:"text-xs font-medium text-gray-500 text-center",children:e},e))]}),v.map(e=>(0,t.jsxs)("div",{className:"grid grid-cols-8 gap-1 p-2 border-b border-gray-100",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600 text-center py-2 font-medium",children:e}),g.map(s=>{let l=p[s][e]||[];return(0,t.jsx)("div",{className:"min-h-16 p-1",onClick:()=>handleSlotClick(s,e,l),children:l.length>0?l.map((e,s)=>(0,t.jsx)(timetable_TimetableSlot,{slot:e,editable:a,showActions:r,colorScheme:d,size:"small",onClick:()=>null==c?void 0:c(e),onEdit:x,onDelete:o},"".concat(e.id,"-").concat(s))):(0,t.jsx)(timetable_TimetableSlot,{slot:null,editable:a,size:"small",onClick:()=>handleSlotClick(s,e,l)})},"".concat(s,"-").concat(e))})]},e))]})})]})},d=a(5822),c=a(9175),timetable_TimetableModal=e=>{let{isOpen:s,onClose:a,onSave:r,slot:i=null,mode:x="create",courses:o=[],teachers:m=[],loading:h=!1,error:u=null}=e,[j,g]=(0,l.useState)({course_id:"",teacher_id:"",day:"",start_time:"",end_time:"",room:"",semester:"Fall 2024"}),[v,p]=(0,l.useState)({}),f=[];for(let e=8;e<=18;e++){let s="".concat(e.toString().padStart(2,"0"),":00");f.push(s)}(0,l.useEffect)(()=>{if(i&&"edit"===x){var e,s;g({course_id:i.course_id||"",teacher_id:i.teacher_id||"",day:i.day_of_week||"",start_time:(null===(e=i.start_time)||void 0===e?void 0:e.substring(0,5))||"",end_time:(null===(s=i.end_time)||void 0===s?void 0:s.substring(0,5))||"",room:i.room||"",semester:i.semester||"Fall 2024"})}else g({course_id:"",teacher_id:"",day:(null==i?void 0:i.day)||"",start_time:(null==i?void 0:i.start_time)||"",end_time:"",room:"",semester:"Fall 2024"});p({})},[i,x,s]);let handleInputChange=(e,s)=>{g(a=>({...a,[e]:s})),v[e]&&p(s=>({...s,[e]:null}))},validateForm=()=>{let e={};return j.course_id||(e.course_id="Course is required"),j.teacher_id||(e.teacher_id="Teacher is required"),j.day||(e.day="Day is required"),j.start_time||(e.start_time="Start time is required"),j.end_time||(e.end_time="End time is required"),j.room||(e.room="Room is required"),j.start_time&&j.end_time&&j.start_time>=j.end_time&&(e.end_time="End time must be after start time"),p(e),0===Object.keys(e).length};return s?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-screen overflow-y-auto",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"edit"===x?"Edit Timetable Slot":"Create Timetable Slot"})}),(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!validateForm())return;let s={...j,course_id:parseInt(j.course_id),teacher_id:parseInt(j.teacher_id),day_of_week:parseInt(j.day)};"edit"===x&&i&&(s.id=i.id),r(s)},className:"p-6 space-y-4",children:[u&&(0,t.jsx)(c.Z,{variant:"error",className:"mb-4",children:u}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course *"}),(0,t.jsxs)("select",{value:j.course_id,onChange:e=>handleInputChange("course_id",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(v.course_id?"border-red-500":"border-gray-300"),children:[(0,t.jsx)("option",{value:"",children:"Select a course"}),o.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.course_code," - ",e.name]},e.id))]}),v.course_id&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.course_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher *"}),(0,t.jsxs)("select",{value:j.teacher_id,onChange:e=>handleInputChange("teacher_id",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(v.teacher_id?"border-red-500":"border-gray-300"),children:[(0,t.jsx)("option",{value:"",children:"Select a teacher"}),m.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]}),v.teacher_id&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.teacher_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day *"}),(0,t.jsxs)("select",{value:j.day,onChange:e=>handleInputChange("day",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(v.day?"border-red-500":"border-gray-300"),children:[(0,t.jsx)("option",{value:"",children:"Select a day"}),[{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:7,label:"Sunday"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),v.day&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.day})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time *"}),(0,t.jsxs)("select",{value:j.start_time,onChange:e=>handleInputChange("start_time",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(v.start_time?"border-red-500":"border-gray-300"),children:[(0,t.jsx)("option",{value:"",children:"Select time"}),f.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),v.start_time&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.start_time})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time *"}),(0,t.jsxs)("select",{value:j.end_time,onChange:e=>handleInputChange("end_time",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(v.end_time?"border-red-500":"border-gray-300"),children:[(0,t.jsx)("option",{value:"",children:"Select time"}),f.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),v.end_time&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:v.end_time})]})]}),(0,t.jsx)("div",{children:(0,t.jsx)(d.Z,{label:"Room *",value:j.room,onChange:e=>handleInputChange("room",e.target.value),placeholder:"e.g., Room 101, Lab A",error:v.room})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Semester"}),(0,t.jsx)("select",{value:j.semester,onChange:e=>handleInputChange("semester",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:["Fall 2024","Spring 2025","Summer 2025","Fall 2025"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,t.jsx)(n.Z,{type:"button",variant:"outline",onClick:a,disabled:h,children:"Cancel"}),(0,t.jsxs)(n.Z,{type:"submit",loading:h,children:["edit"===x?"Update":"Create"," Slot"]})]})]})]})}):null},timetable_TimetableFilters=e=>{let{filters:s={},onFilterChange:a,departments:l=[],teachers:r=[],courses:i=[],showDepartmentFilter:c=!1,showTeacherFilter:x=!1,showCourseFilter:o=!1,onReset:m,onExport:h}=e,handleFilterChange=(e,t)=>{a({...s,[e]:t})},u=[{value:"",label:"All Days"},{value:"1",label:"Monday"},{value:"2",label:"Tuesday"},{value:"3",label:"Wednesday"},{value:"4",label:"Thursday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"},{value:"7",label:"Sunday"}];return(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[m&&(0,t.jsx)(n.Z,{variant:"outline",size:"sm",onClick:m,children:"Reset"}),h&&(0,t.jsx)(n.Z,{variant:"outline",size:"sm",onClick:h,children:"\uD83D\uDCE5 Export"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Semester"}),(0,t.jsx)("select",{value:s.semester||"",onChange:e=>handleFilterChange("semester",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"",label:"All Semesters"},{value:"Fall 2024",label:"Fall 2024"},{value:"Spring 2025",label:"Spring 2025"},{value:"Summer 2025",label:"Summer 2025"},{value:"Fall 2025",label:"Fall 2025"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day"}),(0,t.jsx)("select",{value:s.day||"",onChange:e=>handleFilterChange("day",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:u.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),c&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsxs)("select",{value:s.department||"",onChange:e=>handleFilterChange("department",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Departments"}),l.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),x&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher"}),(0,t.jsxs)("select",{value:s.teacher||"",onChange:e=>handleFilterChange("teacher",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Teachers"}),r.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]})]}),o&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course"}),(0,t.jsxs)("select",{value:s.course||"",onChange:e=>handleFilterChange("course",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Courses"}),i.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.course_code," - ",e.name]},e.id))]})]}),(0,t.jsx)("div",{children:(0,t.jsx)(d.Z,{label:"Search",value:s.search||"",onChange:e=>handleFilterChange("search",e.target.value),placeholder:"Search courses, teachers..."})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Range"}),(0,t.jsxs)("select",{value:s.timeRange||"",onChange:e=>handleFilterChange("timeRange",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Times"}),(0,t.jsx)("option",{value:"morning",children:"Morning (8:00-12:00)"}),(0,t.jsx)("option",{value:"afternoon",children:"Afternoon (12:00-17:00)"}),(0,t.jsx)("option",{value:"evening",children:"Evening (17:00-20:00)"})]})]})]}),Object.keys(s).some(e=>s[e])&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-200",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Active filters:"}),Object.entries(s).map(e=>{let[s,a]=e;if(!a)return null;let l=a;if("day"===s){let e=u.find(e=>e.value===a);l=(null==e?void 0:e.label)||a}return(0,t.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[s,": ",l,(0,t.jsx)("button",{onClick:()=>handleFilterChange(s,""),className:"ml-1 text-blue-600 hover:text-blue-800",children:"\xd7"})]},s)})]})]})}},3242:function(e,s,a){a.d(s,{c:function(){return useAsyncOperation},h:function(){return useApi}});var t=a(7294);let useApi=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{throwOnError:l=!1,fallbackData:r=null}=a,[n,i]=(0,t.useState)(r),[d,c]=(0,t.useState)(!0),[x,o]=(0,t.useState)(null),m=(0,t.useCallback)(async function(){for(var s,a,t,n=arguments.length,d=Array(n),x=0;x<n;x++)d[x]=arguments[x];try{c(!0),o(null);let s=await e(...d);return i(s.data),s.data}catch(n){let e=(null===(a=n.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||n.message||"An error occurred";if(o(e),(null===(t=n.response)||void 0===t?void 0:t.status)===404||!l)return i(r),r;throw n}finally{c(!1)}},s);(0,t.useEffect)(()=>{0===s.length&&m()},s);let h=(0,t.useCallback)(()=>m(),[m]);return{data:n,loading:d,error:x,execute:m,refetch:h}},useAsyncOperation=()=>{let[e,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(null),r=(0,t.useCallback)(async e=>{try{s(!0),l(null);let a=await e();return a}catch(s){var a,t;let e=(null===(t=s.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||s.message||"An error occurred";throw l(e),s}finally{s(!1)}},[]),n=(0,t.useCallback)(()=>l(null),[]);return{loading:e,error:a,execute:r,clearError:n}}},6761:function(e,s,a){a.d(s,{a:function(){return useAuth}});var t=a(7294),l=a(8786);let useAuth=()=>{let e=(0,t.useContext)(l.ZP);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},4218:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(9180),m=a(5822),h=a(9175),u=a(4549),j=a(7219);s.default=()=>{var e,s,a,g,v,p,f,y,N,b,w,C,Z,S,D,_,A,k,T,F,R,P,I,H,z,E,B,q,G,M,U,L,O,Y;let{user:W}=(0,r.a)(),[V,Q]=(0,l.useState)("general"),[$,K]=(0,l.useState)(null),[J,X]=(0,l.useState)({}),{data:ee,loading:es,error:ea,refetch:et}=(0,n.h)(i.Sb.getSystemConfig),{loading:el,execute:er}=(0,n.c)();if(l.useEffect(()=>{ee&&X(ee)},[ee]),!W||"admin"!==W.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(h.Z,{variant:"error",children:"Access denied. Admin access required."})});let en=[{id:"general",label:"General Settings",icon:j.nbt},{id:"database",label:"Database",icon:j.bGz},{id:"security",label:"Security",icon:j.bfl},{id:"email",label:"Email Settings",icon:j.Imn},{id:"system",label:"System Info",icon:j.j8v}],handleConfigChange=(e,s,a)=>{X(t=>({...t,[e]:{...t[e],[s]:a}}))},handleSaveConfig=async()=>{try{await er(()=>i.Sb.updateSystemConfig(J)),K({type:"success",text:"System configuration saved successfully!"}),et(),setTimeout(()=>K(null),5e3)}catch(a){var e,s;K({type:"error",text:(null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to save configuration"})}},handleTestEmailConfig=async()=>{try{await i.Sb.testEmailConfig(),K({type:"success",text:"Test email sent successfully!"}),setTimeout(()=>K(null),5e3)}catch(a){var e,s;K({type:"error",text:(null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to send test email"})}},handleBackupDatabase=async()=>{try{await i.Sb.backupDatabase(),K({type:"success",text:"Database backup initiated successfully!"}),setTimeout(()=>K(null),5e3)}catch(a){var e,s;K({type:"error",text:(null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to backup database"})}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"System Configuration"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage system settings, security, and configuration"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(o.Z,{variant:"outline",size:"sm",icon:j.Bw1,onClick:et,children:"Refresh"}),(0,t.jsx)(o.Z,{variant:"primary",size:"sm",icon:j.mW3,onClick:handleSaveConfig,loading:el,children:"Save Changes"})]})]}),$&&(0,t.jsx)(h.Z,{variant:$.type,dismissible:!0,onDismiss:()=>K(null),children:$.text}),es?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(u.Z,{size:"lg"})}):ea?(0,t.jsxs)(h.Z,{variant:"error",children:["Failed to load system configuration: ",ea]}):(0,t.jsxs)(x.Z,{children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8",children:en.map(e=>{let s=e.icon;return(0,t.jsxs)("button",{onClick:()=>Q(e.id),className:"py-3 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors duration-200 ".concat(V===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)(s,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:e.label})]},e.id)})})}),(0,t.jsxs)("div",{className:"p-6",children:["general"===V&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Institution Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(m.Z,{label:"Institution Name",value:(null===(e=J.general)||void 0===e?void 0:e.institutionName)||"",onChange:e=>handleConfigChange("general","institutionName",e.target.value),placeholder:"Enter institution name"}),(0,t.jsx)(m.Z,{label:"Institution Code",value:(null===(s=J.general)||void 0===s?void 0:s.institutionCode)||"",onChange:e=>handleConfigChange("general","institutionCode",e.target.value),placeholder:"Enter institution code"}),(0,t.jsx)(m.Z,{label:"Academic Year",value:(null===(a=J.general)||void 0===a?void 0:a.academicYear)||"",onChange:e=>handleConfigChange("general","academicYear",e.target.value),placeholder:"e.g., 2024-2025"}),(0,t.jsx)(m.Z,{label:"Current Semester",value:(null===(g=J.general)||void 0===g?void 0:g.currentSemester)||"",onChange:e=>handleConfigChange("general","currentSemester",e.target.value),placeholder:"e.g., Fall 2024"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(m.Z,{label:"Contact Email",type:"email",value:(null===(v=J.general)||void 0===v?void 0:v.contactEmail)||"",onChange:e=>handleConfigChange("general","contactEmail",e.target.value),placeholder:"admin@institution.edu"}),(0,t.jsx)(m.Z,{label:"Contact Phone",value:(null===(p=J.general)||void 0===p?void 0:p.contactPhone)||"",onChange:e=>handleConfigChange("general","contactPhone",e.target.value),placeholder:"+1 (555) 123-4567"})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Institution Address"}),(0,t.jsx)("textarea",{value:(null===(f=J.general)||void 0===f?void 0:f.address)||"",onChange:e=>handleConfigChange("general","address",e.target.value),rows:3,className:"form-textarea",placeholder:"Enter complete institution address..."})]})]})]}),"database"===V&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Database Status"}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-900",children:"Database Information"}),(0,t.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Connected"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-blue-700 font-medium",children:"Database Type:"}),(0,t.jsx)("span",{className:"font-semibold text-blue-900",children:(null===(y=J.database)||void 0===y?void 0:y.type)||"MySQL"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-blue-700 font-medium",children:"Database Size:"}),(0,t.jsx)("span",{className:"font-semibold text-blue-900",children:(null===(N=J.database)||void 0===N?void 0:N.size)||"2.4 GB"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-blue-700 font-medium",children:"Last Backup:"}),(0,t.jsx)("span",{className:"font-semibold text-blue-900",children:(null===(b=J.database)||void 0===b?void 0:b.lastBackup)?new Date(J.database.lastBackup).toLocaleDateString():"Never"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-blue-700 font-medium",children:"Uptime:"}),(0,t.jsx)("span",{className:"font-semibold text-blue-900",children:"99.9%"})]})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Database Operations"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(o.Z,{variant:"primary",onClick:handleBackupDatabase,className:"justify-start",children:[(0,t.jsx)(j.bGz,{className:"w-4 h-4 mr-2"}),"Create Backup"]}),(0,t.jsxs)(o.Z,{variant:"outline",className:"justify-start",children:[(0,t.jsx)(j.Bw1,{className:"w-4 h-4 mr-2"}),"View Backup History"]}),(0,t.jsxs)(o.Z,{variant:"warning",className:"justify-start",children:[(0,t.jsx)(j.nbt,{className:"w-4 h-4 mr-2"}),"Optimize Database"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Backup Settings"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(m.Z,{label:"Backup Frequency (hours)",type:"number",value:(null===(w=J.database)||void 0===w?void 0:w.backupFrequency)||"24",onChange:e=>handleConfigChange("database","backupFrequency",e.target.value),placeholder:"24"}),(0,t.jsx)(m.Z,{label:"Retention Period (days)",type:"number",value:(null===(C=J.database)||void 0===C?void 0:C.retentionPeriod)||"30",onChange:e=>handleConfigChange("database","retentionPeriod",e.target.value),placeholder:"30"})]})]})]}),"security"===V&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Policy"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:(null===(Z=J.security)||void 0===Z?void 0:Z.requireUppercase)||!1,onChange:e=>handleConfigChange("security","requireUppercase",e.target.checked),className:"form-checkbox"}),(0,t.jsx)("span",{className:"ml-2 text-sm",children:"Require uppercase letters"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:(null===(S=J.security)||void 0===S?void 0:S.requireNumbers)||!1,onChange:e=>handleConfigChange("security","requireNumbers",e.target.checked),className:"form-checkbox"}),(0,t.jsx)("span",{className:"ml-2 text-sm",children:"Require numbers"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:(null===(D=J.security)||void 0===D?void 0:D.requireSpecialChars)||!1,onChange:e=>handleConfigChange("security","requireSpecialChars",e.target.checked),className:"form-checkbox"}),(0,t.jsx)("span",{className:"ml-2 text-sm",children:"Require special characters"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(m.Z,{label:"Minimum Password Length",type:"number",value:(null===(_=J.security)||void 0===_?void 0:_.minPasswordLength)||"8",onChange:e=>handleConfigChange("security","minPasswordLength",e.target.value)}),(0,t.jsx)(m.Z,{label:"Session Timeout (minutes)",type:"number",value:(null===(A=J.security)||void 0===A?void 0:A.sessionTimeout)||"60",onChange:e=>handleConfigChange("security","sessionTimeout",e.target.value)}),(0,t.jsx)(m.Z,{label:"Max Login Attempts",type:"number",value:(null===(k=J.security)||void 0===k?void 0:k.maxLoginAttempts)||"5",onChange:e=>handleConfigChange("security","maxLoginAttempts",e.target.value)})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:(null===(T=J.security)||void 0===T?void 0:T.enableTwoFactor)||!1,onChange:e=>handleConfigChange("security","enableTwoFactor",e.target.checked),className:"form-checkbox"}),(0,t.jsx)("span",{className:"ml-2 text-sm font-medium",children:"Enable Two-Factor Authentication"})]})})]}),"email"===V&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(m.Z,{label:"SMTP Server",value:(null===(F=J.email)||void 0===F?void 0:F.smtpServer)||"",onChange:e=>handleConfigChange("email","smtpServer",e.target.value)}),(0,t.jsx)(m.Z,{label:"SMTP Port",type:"number",value:(null===(R=J.email)||void 0===R?void 0:R.smtpPort)||"587",onChange:e=>handleConfigChange("email","smtpPort",e.target.value)}),(0,t.jsx)(m.Z,{label:"Username",value:(null===(P=J.email)||void 0===P?void 0:P.username)||"",onChange:e=>handleConfigChange("email","username",e.target.value)}),(0,t.jsx)(m.Z,{label:"Password",type:"password",value:(null===(I=J.email)||void 0===I?void 0:I.password)||"",onChange:e=>handleConfigChange("email","password",e.target.value)}),(0,t.jsx)(m.Z,{label:"From Email",type:"email",value:(null===(H=J.email)||void 0===H?void 0:H.fromEmail)||"",onChange:e=>handleConfigChange("email","fromEmail",e.target.value)}),(0,t.jsx)(m.Z,{label:"From Name",value:(null===(z=J.email)||void 0===z?void 0:z.fromName)||"",onChange:e=>handleConfigChange("email","fromName",e.target.value)})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:(null===(E=J.email)||void 0===E?void 0:E.enableSSL)||!1,onChange:e=>handleConfigChange("email","enableSSL",e.target.checked),className:"form-checkbox"}),(0,t.jsx)("span",{className:"ml-2 text-sm",children:"Enable SSL/TLS"})]})}),(0,t.jsx)("div",{children:(0,t.jsx)(o.Z,{variant:"outline",onClick:handleTestEmailConfig,children:"Send Test Email"})})]}),"system"===V&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"System Information"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Version:"}),(0,t.jsx)("span",{className:"font-medium",children:(null===(B=J.system)||void 0===B?void 0:B.version)||"1.0.0"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Environment:"}),(0,t.jsx)("span",{className:"font-medium",children:(null===(q=J.system)||void 0===q?void 0:q.environment)||"Production"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Uptime:"}),(0,t.jsx)("span",{className:"font-medium",children:(null===(G=J.system)||void 0===G?void 0:G.uptime)||"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Last Updated:"}),(0,t.jsx)("span",{className:"font-medium",children:(null===(M=J.system)||void 0===M?void 0:M.lastUpdated)?new Date(J.system.lastUpdated).toLocaleString():"N/A"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Performance Metrics"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"CPU Usage:"}),(0,t.jsxs)("span",{className:"font-medium",children:[(null===(U=J.system)||void 0===U?void 0:U.cpuUsage)||"0","%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Memory Usage:"}),(0,t.jsxs)("span",{className:"font-medium",children:[(null===(L=J.system)||void 0===L?void 0:L.memoryUsage)||"0","%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Disk Usage:"}),(0,t.jsxs)("span",{className:"font-medium",children:[(null===(O=J.system)||void 0===O?void 0:O.diskUsage)||"0","%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Active Users:"}),(0,t.jsx)("span",{className:"font-medium",children:(null===(Y=J.system)||void 0===Y?void 0:Y.activeUsers)||"0"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"System Maintenance"}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(o.Z,{variant:"warning",children:"Clear Cache"}),(0,t.jsx)(o.Z,{variant:"outline",children:"View System Logs"}),(0,t.jsx)(o.Z,{variant:"danger",children:"Restart System"})]})]})]})]})]})]})})]})]})}},4420:function(e,s,a){a.r(s),a.d(s,{default:function(){return users}});var t=a(5893),l=a(7294),r=a(1163),n=a(6761),i=a(3240),d=a(4082),c=a(5936),x=a(9180),o=a(4105),m=a(856),h=a(7014),u=a(7219),users_UserTable=e=>{let{users:s,loading:a,error:r,currentPage:n,totalPages:i,onPageChange:d,onUserAction:c}=e,[m,j]=(0,l.useState)([]),[g,v]=(0,l.useState)(null),getRoleBadgeVariant=e=>({admin:"danger",hod:"warning",teacher:"primary",finance:"success",student:"default"})[e]||"default",getStatusBadgeVariant=e=>({active:"success",inactive:"default",suspended:"danger",pending:"warning"})[e]||"default",getRoleIcon=e=>{let s={admin:u.bfl,hod:u.bfl,teacher:u.WY8,finance:u.bAx,student:u.WY8};return s[e]||u.WY8},handleSelectUser=e=>{j(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},formatDate=e=>{if(!e)return"Never";let s=new Date(e);return s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},formatTime=e=>{if(!e)return"";let s=new Date(e);return s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};return a?(0,t.jsx)(o.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-48 mb-6"}),(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-16"}),(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-16"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-20"})]},s))})]})}):r?(0,t.jsx)(o.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"text-red-500 mb-2",children:(0,t.jsx)(u.WY8,{className:"w-12 h-12 mx-auto"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Users"}),(0,t.jsx)("p",{className:"text-gray-500",children:r})]})}):s&&0!==s.length?(0,t.jsxs)(o.Z,{className:"overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Users"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[m.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[m.length," selected"]}),(0,t.jsx)(x.Z,{variant:"outline",size:"sm",children:"Bulk Actions"})]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[s.length," users"]})]})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:(0,t.jsx)("input",{type:"checkbox",checked:m.length===s.length,onChange:()=>{m.length===s.length?j([]):j(s.map(e=>e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{var s,a,l;let r=getRoleIcon(e.role);return(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors ".concat(m.includes(e.id)?"bg-blue-50":""),children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("input",{type:"checkbox",checked:m.includes(e.id),onChange:()=>handleSelectUser(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mr-4",children:(0,t.jsxs)("span",{className:"text-sm font-medium text-white",children:[null===(s=e.first_name)||void 0===s?void 0:s[0],null===(a=e.last_name)||void 0===a?void 0:a[0]]})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,t.jsx)(u.Imn,{className:"w-3 h-3 mr-1"}),e.email]}),e.staff_id&&(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",e.staff_id]})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(r,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,t.jsx)(h.Z,{variant:getRoleBadgeVariant(e.role),children:null===(l=e.role)||void 0===l?void 0:l.toUpperCase()})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.department_name||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)(h.Z,{variant:getStatusBadgeVariant(e.status||"active"),children:e.status||"active"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.vlc,{className:"w-4 h-4 mr-1 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:formatDate(e.last_login)}),e.last_login&&(0,t.jsx)("div",{className:"text-xs text-gray-500",children:formatTime(e.last_login)})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:formatDate(e.created_at)}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,t.jsx)(x.Z,{variant:"outline",size:"sm",icon:u.rDJ,onClick:()=>c("view",e),children:"View"}),(0,t.jsx)(x.Z,{variant:"primary",size:"sm",icon:u.vPQ,onClick:()=>c("edit",e),children:"Edit"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.Z,{variant:"outline",size:"sm",icon:u.$Pu,onClick:()=>v(g===e.id?null:e.id)}),g===e.id&&(0,t.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("button",{onClick:()=>{c("activate",e),v(null)},className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:[(0,t.jsx)(u.tMu,{className:"w-4 h-4 mr-2"}),"Activate"]}),(0,t.jsxs)("button",{onClick:()=>{c("deactivate",e),v(null)},className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:[(0,t.jsx)(u.pBC,{className:"w-4 h-4 mr-2"}),"Deactivate"]}),(0,t.jsx)("hr",{className:"my-1"}),(0,t.jsxs)("button",{onClick:()=>{c("delete",e),v(null)},className:"flex items-center px-4 py-2 text-sm text-red-700 hover:bg-red-50 w-full text-left",children:[(0,t.jsx)(u.Ybf,{className:"w-4 h-4 mr-2"}),"Delete"]})]})})]})]})})]},e.id)})})]})}),i>1&&(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",n," of ",i]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.Z,{variant:"outline",size:"sm",icon:u.YFh,disabled:1===n,onClick:()=>d(n-1),children:"Previous"}),(0,t.jsx)(x.Z,{variant:"outline",size:"sm",icon:u.Tfp,iconPosition:"right",disabled:n===i,onClick:()=>d(n+1),children:"Next"})]})]})})]}):(0,t.jsx)(o.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(u.WY8,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Users Found"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:"No users match the current filters. Try adjusting your search criteria."}),(0,t.jsx)(x.Z,{variant:"primary",onClick:()=>c("create"),children:"Create First User"})]})})},j=a(5822),users_CreateUserModal=e=>{let{isOpen:s,onClose:a,onSubmit:r}=e,[n,i]=(0,l.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"student",departmentId:"",phone:"",address:"",dateOfBirth:"",gender:"",studentId:"",staffId:"",enrollmentYear:"",currentYear:"",hireDate:"",qualifications:"",subjects:[]}),[d,c]=(0,l.useState)({}),[o,m]=(0,l.useState)(!1),[h,g]=(0,l.useState)([]),v=[{value:"student",label:"Student",icon:u.WY8},{value:"teacher",label:"Teacher",icon:u.fzv},{value:"hod",label:"Head of Department",icon:u.bfl},{value:"finance",label:"Finance Staff",icon:u.fzv},{value:"admin",label:"Administrator",icon:u.bfl}];(0,l.useEffect)(()=>{g([{id:1,name:"Computer Science"},{id:2,name:"Mathematics"},{id:3,name:"Physics"},{id:4,name:"Chemistry"},{id:5,name:"Biology"}])},[]);let handleChange=e=>{let{name:s,value:a}=e.target;i(e=>({...e,[s]:a})),d[s]&&c(e=>({...e,[s]:""}))},validateForm=()=>{let e={};return n.firstName.trim()||(e.firstName="First name is required"),n.lastName.trim()||(e.lastName="Last name is required"),n.email.trim()||(e.email="Email is required"),n.password||(e.password="Password is required"),n.confirmPassword||(e.confirmPassword="Please confirm password"),n.role||(e.role="Role is required"),n.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)&&(e.email="Please enter a valid email address"),n.password&&n.password.length<6&&(e.password="Password must be at least 6 characters"),n.password!==n.confirmPassword&&(e.confirmPassword="Passwords do not match"),"student"!==n.role||(n.studentId.trim()||(e.studentId="Student ID is required"),n.enrollmentYear||(e.enrollmentYear="Enrollment year is required"),n.currentYear||(e.currentYear="Current year is required")),["teacher","hod","finance","admin"].includes(n.role)&&(n.staffId.trim()||(e.staffId="Staff ID is required"),n.hireDate||(e.hireDate="Hire date is required")),c(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){m(!0);try{let e={firstName:n.firstName.trim(),lastName:n.lastName.trim(),email:n.email.trim().toLowerCase(),password:n.password,role:n.role,departmentId:n.departmentId||null,additionalData:{phone:n.phone,address:n.address,dateOfBirth:n.dateOfBirth,gender:n.gender,..."student"===n.role&&{studentId:n.studentId,enrollmentYear:parseInt(n.enrollmentYear),currentYear:parseInt(n.currentYear)},...["teacher","hod","finance","admin"].includes(n.role)&&{staffId:n.staffId,hireDate:n.hireDate,qualifications:n.qualifications,subjects:n.subjects}}};await r(e),i({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"student",departmentId:"",phone:"",address:"",dateOfBirth:"",gender:"",studentId:"",staffId:"",enrollmentYear:"",currentYear:"",hireDate:"",qualifications:"",subjects:[]}),c({})}catch(e){var s,a;c({submit:(null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to create user"})}finally{m(!1)}}};return s?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New User"}),(0,t.jsx)(x.Z,{variant:"outline",size:"sm",icon:u.q5L,onClick:a})]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[d.submit&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:d.submit})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"First Name",name:"firstName",value:n.firstName,onChange:handleChange,error:d.firstName,required:!0,icon:u.fzv}),(0,t.jsx)(j.Z,{label:"Last Name",name:"lastName",value:n.lastName,onChange:handleChange,error:d.lastName,required:!0,icon:u.fzv})]}),(0,t.jsx)(j.Z,{label:"Email Address",name:"email",type:"email",value:n.email,onChange:handleChange,error:d.email,required:!0,icon:u.Imn})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Role ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:v.map(e=>{let s=e.icon;return(0,t.jsxs)("label",{className:"relative flex items-center p-3 border rounded-lg cursor-pointer transition-colors ".concat(n.role===e.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[(0,t.jsx)("input",{type:"radio",name:"role",value:e.value,checked:n.role===e.value,onChange:handleChange,className:"sr-only"}),(0,t.jsx)(s,{className:"w-5 h-5 mr-2"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:e.label})]},e.value)})}),d.role&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.role})]}),"student"===n.role?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"Student ID",name:"studentId",value:n.studentId,onChange:handleChange,error:d.studentId,required:!0,placeholder:"e.g., STU2024001"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsxs)("select",{name:"departmentId",value:n.departmentId,onChange:handleChange,className:"form-select",children:[(0,t.jsx)("option",{value:"",children:"Select Department"}),h.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"Enrollment Year",name:"enrollmentYear",type:"number",value:n.enrollmentYear,onChange:handleChange,error:d.enrollmentYear,required:!0,min:"2020",max:"2030"}),(0,t.jsx)(j.Z,{label:"Current Year",name:"currentYear",type:"number",value:n.currentYear,onChange:handleChange,error:d.currentYear,required:!0,min:"1",max:"4"})]})]}):["teacher","hod","finance","admin"].includes(n.role)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"Staff ID",name:"staffId",value:n.staffId,onChange:handleChange,error:d.staffId,required:!0,placeholder:"e.g., STAFF2024001"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsxs)("select",{name:"departmentId",value:n.departmentId,onChange:handleChange,className:"form-select",children:[(0,t.jsx)("option",{value:"",children:"Select Department"}),h.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsx)(j.Z,{label:"Hire Date",name:"hireDate",type:"date",value:n.hireDate,onChange:handleChange,error:d.hireDate,required:!0}),(0,t.jsx)(j.Z,{label:"Qualifications",name:"qualifications",value:n.qualifications,onChange:handleChange,placeholder:"e.g., PhD in Computer Science, MSc Mathematics"})]}):null,(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"Password",name:"password",type:"password",value:n.password,onChange:handleChange,error:d.password,required:!0,icon:u.UIZ}),(0,t.jsx)(j.Z,{label:"Confirm Password",name:"confirmPassword",type:"password",value:n.confirmPassword,onChange:handleChange,error:d.confirmPassword,required:!0,icon:u.UIZ})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"Phone Number",name:"phone",value:n.phone,onChange:handleChange,icon:u.tUt,placeholder:"+1 (555) 123-4567"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,t.jsx)("select",{name:"gender",value:n.gender,onChange:handleChange,className:"form-select",children:[{value:"",label:"Select Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsx)(j.Z,{label:"Date of Birth",name:"dateOfBirth",type:"date",value:n.dateOfBirth,onChange:handleChange,icon:u.vlc}),(0,t.jsx)(j.Z,{label:"Address",name:"address",value:n.address,onChange:handleChange,icon:u.i63,placeholder:"Street address, city, state, zip code"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,t.jsx)(x.Z,{type:"button",variant:"outline",onClick:a,disabled:o,children:"Cancel"}),(0,t.jsx)(x.Z,{type:"submit",variant:"primary",loading:o,children:"Create User"})]})]})]})}):null},users_EditUserModal=e=>{let{isOpen:s,user:a,onClose:r,onSubmit:n}=e,[i,d]=(0,l.useState)({firstName:"",lastName:"",email:"",role:"",departmentId:"",phone:"",address:"",dateOfBirth:"",gender:"",status:"active",studentId:"",staffId:"",enrollmentYear:"",currentYear:"",hireDate:"",qualifications:"",subjects:[]}),[c,o]=(0,l.useState)({}),[m,h]=(0,l.useState)(!1),[g,v]=(0,l.useState)([]),p=[{value:"student",label:"Student",icon:u.WY8},{value:"teacher",label:"Teacher",icon:u.fzv},{value:"hod",label:"Head of Department",icon:u.bfl},{value:"finance",label:"Finance Staff",icon:u.fzv},{value:"admin",label:"Administrator",icon:u.bfl}];(0,l.useEffect)(()=>{v([{id:1,name:"Computer Science"},{id:2,name:"Mathematics"},{id:3,name:"Physics"},{id:4,name:"Chemistry"},{id:5,name:"Biology"}])},[]),(0,l.useEffect)(()=>{a&&s&&d({firstName:a.first_name||"",lastName:a.last_name||"",email:a.email||"",role:a.role||"",departmentId:a.department_id||"",phone:a.phone||"",address:a.address||"",dateOfBirth:a.date_of_birth||"",gender:a.gender||"",status:a.status||"active",studentId:a.student_id||"",staffId:a.staff_id||"",enrollmentYear:a.enrollment_year||"",currentYear:a.current_year||"",hireDate:a.hire_date||"",qualifications:a.qualifications||"",subjects:a.subjects||[]})},[a,s]);let handleChange=e=>{let{name:s,value:a}=e.target;d(e=>({...e,[s]:a})),c[s]&&o(e=>({...e,[s]:""}))},validateForm=()=>{let e={};return i.firstName.trim()||(e.firstName="First name is required"),i.lastName.trim()||(e.lastName="Last name is required"),i.email.trim()||(e.email="Email is required"),i.role||(e.role="Role is required"),i.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)&&(e.email="Please enter a valid email address"),"student"!==i.role||(i.studentId.trim()||(e.studentId="Student ID is required"),i.enrollmentYear||(e.enrollmentYear="Enrollment year is required"),i.currentYear||(e.currentYear="Current year is required")),["teacher","hod","finance","admin"].includes(i.role)&&(i.staffId.trim()||(e.staffId="Staff ID is required"),i.hireDate||(e.hireDate="Hire date is required")),o(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){h(!0);try{let e={firstName:i.firstName.trim(),lastName:i.lastName.trim(),email:i.email.trim().toLowerCase(),role:i.role,departmentId:i.departmentId||null,status:i.status,additionalData:{phone:i.phone,address:i.address,dateOfBirth:i.dateOfBirth,gender:i.gender,..."student"===i.role&&{studentId:i.studentId,enrollmentYear:parseInt(i.enrollmentYear),currentYear:parseInt(i.currentYear)},...["teacher","hod","finance","admin"].includes(i.role)&&{staffId:i.staffId,hireDate:i.hireDate,qualifications:i.qualifications,subjects:i.subjects}}};await n(a.id,e)}catch(e){var s,t;o({submit:(null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to update user"})}finally{h(!1)}}};return s&&a?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit User"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Editing ",a.first_name," ",a.last_name]})]}),(0,t.jsx)(x.Z,{variant:"outline",size:"sm",icon:u.q5L,onClick:r})]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[c.submit&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:c.submit})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"First Name",name:"firstName",value:i.firstName,onChange:handleChange,error:c.firstName,required:!0,icon:u.fzv}),(0,t.jsx)(j.Z,{label:"Last Name",name:"lastName",value:i.lastName,onChange:handleChange,error:c.lastName,required:!0,icon:u.fzv})]}),(0,t.jsx)(j.Z,{label:"Email Address",name:"email",type:"email",value:i.email,onChange:handleChange,error:c.email,required:!0,icon:u.Imn})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Role & Status"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Role ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{name:"role",value:i.role,onChange:handleChange,className:"form-select",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Role"}),p.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),c.role&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.role})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,t.jsx)("select",{name:"status",value:i.status,onChange:handleChange,className:"form-select",children:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),"student"===i.role?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"Student ID",name:"studentId",value:i.studentId,onChange:handleChange,error:c.studentId,required:!0,placeholder:"e.g., STU2024001"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsxs)("select",{name:"departmentId",value:i.departmentId,onChange:handleChange,className:"form-select",children:[(0,t.jsx)("option",{value:"",children:"Select Department"}),g.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"Enrollment Year",name:"enrollmentYear",type:"number",value:i.enrollmentYear,onChange:handleChange,error:c.enrollmentYear,required:!0,min:"2020",max:"2030"}),(0,t.jsx)(j.Z,{label:"Current Year",name:"currentYear",type:"number",value:i.currentYear,onChange:handleChange,error:c.currentYear,required:!0,min:"1",max:"4"})]})]}):["teacher","hod","finance","admin"].includes(i.role)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"Staff ID",name:"staffId",value:i.staffId,onChange:handleChange,error:c.staffId,required:!0,placeholder:"e.g., STAFF2024001"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsxs)("select",{name:"departmentId",value:i.departmentId,onChange:handleChange,className:"form-select",children:[(0,t.jsx)("option",{value:"",children:"Select Department"}),g.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsx)(j.Z,{label:"Hire Date",name:"hireDate",type:"date",value:i.hireDate,onChange:handleChange,error:c.hireDate,required:!0}),(0,t.jsx)(j.Z,{label:"Qualifications",name:"qualifications",value:i.qualifications,onChange:handleChange,placeholder:"e.g., PhD in Computer Science, MSc Mathematics"})]}):null,(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(j.Z,{label:"Phone Number",name:"phone",value:i.phone,onChange:handleChange,icon:u.tUt,placeholder:"+1 (555) 123-4567"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,t.jsx)("select",{name:"gender",value:i.gender,onChange:handleChange,className:"form-select",children:[{value:"",label:"Select Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsx)(j.Z,{label:"Date of Birth",name:"dateOfBirth",type:"date",value:i.dateOfBirth,onChange:handleChange,icon:u.vlc}),(0,t.jsx)(j.Z,{label:"Address",name:"address",value:i.address,onChange:handleChange,icon:u.i63,placeholder:"Street address, city, state, zip code"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,t.jsx)(x.Z,{type:"button",variant:"outline",onClick:r,disabled:m,children:"Cancel"}),(0,t.jsx)(x.Z,{type:"submit",variant:"primary",loading:m,icon:u.mW3,children:"Save Changes"})]})]})]})}):null},users_DeleteUserModal=e=>{var s,a;let{isOpen:r,user:n,onClose:i,onConfirm:d}=e,[c,o]=(0,l.useState)(!1),[m,h]=(0,l.useState)(""),[j,g]=(0,l.useState)(""),v="DELETE",handleConfirm=async()=>{if(m!==v){g('Please type "'.concat(v,'" to confirm'));return}o(!0),g("");try{await d(n.id)}catch(a){var e,s;g((null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to delete user")}finally{o(!1)}},handleClose=()=>{c||(h(""),g(""),i())};if(!r||!n)return null;let p=(e=>{let s={admin:u.bfl,hod:u.bfl,teacher:u.fzv,finance:u.fzv,student:u.fzv};return s[e]||u.fzv})(n.role);return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",children:(0,t.jsx)(u.BJv,{className:"w-5 h-5 text-red-600"})}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Delete User"})]}),(0,t.jsx)(x.Z,{variant:"outline",size:"sm",icon:u.q5L,onClick:handleClose,disabled:c})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mr-4",children:(0,t.jsxs)("span",{className:"text-sm font-medium text-white",children:[null===(s=n.first_name)||void 0===s?void 0:s[0],null===(a=n.last_name)||void 0===a?void 0:a[0]]})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("h3",{className:"font-medium text-gray-900",children:[n.first_name," ",n.last_name]}),(0,t.jsxs)("div",{className:"ml-2 flex items-center ".concat({admin:"text-red-600",hod:"text-orange-600",teacher:"text-blue-600",finance:"text-green-600",student:"text-purple-600"}[n.role]||"text-gray-600"),children:[(0,t.jsx)(p,{className:"w-4 h-4 mr-1"}),(0,t.jsx)("span",{className:"text-sm font-medium capitalize",children:n.role})]})]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[(0,t.jsx)(u.Imn,{className:"w-3 h-3 mr-1"}),n.email]}),n.department_name&&(0,t.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:n.department_name})]})]})}),(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(u.BJv,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Warning: This action cannot be undone"}),(0,t.jsx)("p",{className:"text-sm text-red-700",children:{admin:"Deleting an administrator will remove all their system access and permissions. This action cannot be undone.",hod:"Deleting a Head of Department will affect department management and approvals. Consider transferring responsibilities first.",teacher:"Deleting a teacher will remove their access to classes, grades, and student records. This may affect ongoing courses.",finance:"Deleting finance staff will remove their access to financial records and payment processing.",student:"Deleting a student will remove their academic records, grades, and enrollment status. This action cannot be undone."}[n.role]||"This action will permanently delete the user and cannot be undone."})]})]})}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["To confirm deletion, type ",(0,t.jsx)("span",{className:"font-mono font-bold text-red-600",children:v})," below:"]}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>{h(e.target.value),j&&g("")},placeholder:'Type "'.concat(v,'" to confirm'),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 ".concat(j?"border-red-300":"border-gray-300"),disabled:c}),j&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"What will be deleted:"}),(0,t.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,t.jsx)("li",{children:"• User account and login credentials"}),(0,t.jsx)("li",{children:"• Personal information and profile data"}),"student"===n.role&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{children:"• Academic records and grades"}),(0,t.jsx)("li",{children:"• Enrollment and attendance history"}),(0,t.jsx)("li",{children:"• Fee payment records"})]}),["teacher","hod"].includes(n.role)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{children:"• Class assignments and teaching records"}),(0,t.jsx)("li",{children:"• Grade entries and assessments"}),(0,t.jsx)("li",{children:"• Department associations"})]}),"finance"===n.role&&(0,t.jsx)("li",{children:"• Financial transaction records"}),(0,t.jsx)("li",{children:"• System access and permissions"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,t.jsx)(x.Z,{variant:"outline",onClick:handleClose,disabled:c,children:"Cancel"}),(0,t.jsx)(x.Z,{variant:"danger",onClick:handleConfirm,loading:c,disabled:m!==v,icon:u.Ybf,children:"Delete User"})]})]})]})})},users=()=>{let{user:e,isAuthenticated:s}=(0,n.a)(),a=(0,r.useRouter)(),[h,j]=(0,l.useState)([]),[g,v]=(0,l.useState)(!0),[p,f]=(0,l.useState)(null),[y,N]=(0,l.useState)(!1),[b,w]=(0,l.useState)(1),[C,Z]=(0,l.useState)(1),[S,D]=(0,l.useState)(0),[_,A]=(0,l.useState)(""),[k,T]=(0,l.useState)(""),[F,R]=(0,l.useState)(""),[P,I]=(0,l.useState)(!1),[H,z]=(0,l.useState)(!1),[E,B]=(0,l.useState)(!1),[q,G]=(0,l.useState)(null),[M,U]=(0,l.useState)({totalUsers:0,activeUsers:0,newThisMonth:0,byRole:{}});(0,l.useEffect)(()=>{if(!s||(null==e?void 0:e.role)!=="admin"){a.push("/dashboard");return}},[s,e,a]);let fetchUsers=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{v(1===e),N(1!==e);let l={page:e,limit:10,...s&&{search:s},...a&&{role:a},...t&&{departmentId:t}},r=await i.Sb.getAllUsers(l),{users:n,pagination:d}=r.data;j(n),w(d.page),Z(d.pages),D(d.total),calculateUserStats(n),f(null)}catch(e){f("Failed to load users. Please try again.")}finally{v(!1),N(!1)}},calculateUserStats=e=>{let s={totalUsers:e.length,activeUsers:e.filter(e=>"active"===e.status).length,newThisMonth:e.filter(e=>{let s=new Date(e.created_at),a=new Date;return s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}).length,byRole:{}};e.forEach(e=>{s.byRole[e.role]=(s.byRole[e.role]||0)+1}),U(s)};(0,l.useEffect)(()=>{s&&(null==e?void 0:e.role)==="admin"&&fetchUsers()},[s,e]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{fetchUsers(1,_,k,F)},500);return()=>clearTimeout(e)},[_,k,F]);let handleRefresh=()=>{fetchUsers(b,_,k,F)},handleCreateUser=async e=>{try{await i.Sb.createUser(e),I(!1),handleRefresh()}catch(e){throw e}},handleEditUser=async(e,s)=>{try{await i.Sb.updateUser(e,s),z(!1),G(null),handleRefresh()}catch(e){throw e}},handleDeleteUser=async e=>{try{await i.Sb.deleteUser(e),B(!1),G(null),handleRefresh()}catch(e){throw e}},handleActivateUser=async e=>{try{await i.Sb.updateUserStatus(e,"active"),handleRefresh()}catch(e){}},handleDeactivateUser=async e=>{try{await i.Sb.updateUserStatus(e,"inactive"),handleRefresh()}catch(e){}};return s&&(null==e?void 0:e.role)==="admin"?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 overflow-auto",children:(0,t.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,t.jsx)(u.WY8,{className:"mr-3 text-blue-600"}),"User Management"]}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage all users across the system - students, teachers, and staff"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(x.Z,{variant:"outline",icon:u.Bw1,onClick:handleRefresh,loading:y,size:"sm",children:"Refresh"}),(0,t.jsx)(x.Z,{variant:"outline",icon:u._hL,size:"sm",children:"Export"}),(0,t.jsx)(x.Z,{variant:"primary",icon:u.OvN,onClick:()=>I(!0),children:"Add User"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsx)("div",{className:"lg:col-span-3",children:(0,t.jsx)(m.Z,{stats:M,totalUsers:S,loading:g})}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)(m.f,{stats:M,loading:g})})]}),(0,t.jsx)(o.Z,{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 flex-1",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(u.jRj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,t.jsx)("input",{type:"text",placeholder:"Search users...",value:_,onChange:e=>A(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("select",{value:k,onChange:e=>T(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Roles"}),(0,t.jsx)("option",{value:"student",children:"Students"}),(0,t.jsx)("option",{value:"teacher",children:"Teachers"}),(0,t.jsx)("option",{value:"hod",children:"HODs"}),(0,t.jsx)("option",{value:"finance",children:"Finance"}),(0,t.jsx)("option",{value:"admin",children:"Admins"})]})]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,t.jsx)(u.QqI,{className:"w-4 h-4 mr-1"}),S," total users"]})]})}),(0,t.jsx)(users_UserTable,{users:h,loading:g,error:p,currentPage:b,totalPages:C,onPageChange:e=>{fetchUsers(e,_,k,F)},onUserAction:(e,s)=>{switch(G(s),e){case"create":I(!0);break;case"edit":z(!0);break;case"delete":B(!0);break;case"view":a.push("/admin/users/".concat(s.id));break;case"activate":handleActivateUser(s.id);break;case"deactivate":handleDeactivateUser(s.id)}}})]})})]}),P&&(0,t.jsx)(users_CreateUserModal,{isOpen:P,onClose:()=>I(!1),onSubmit:handleCreateUser}),H&&q&&(0,t.jsx)(users_EditUserModal,{isOpen:H,user:q,onClose:()=>{z(!1),G(null)},onSubmit:handleEditUser}),E&&q&&(0,t.jsx)(users_DeleteUserModal,{isOpen:E,user:q,onClose:()=>{B(!1),G(null)},onConfirm:handleDeleteUser})]}):null}},7893:function(e,s,a){a.r(s),a.d(s,{default:function(){return dashboard}});var t=a(5893),l=a(7294),r=a(6761),n=a(4082),i=a(5936),d=a(1664),c=a.n(d),x=a(3242),o=a(3240),m=a(4105),h=a(9180),u=a(7014),j=a(4549),g=a(7219),student_StudentDashboard=()=>{var e,s,a,r,n;let[i,d]=(0,l.useState)("7d"),{data:v,loading:p,refetch:f}=(0,x.h)(o.t7.getProfile),{data:y,loading:N,refetch:b}=(0,x.h)(o.t7.getGrades),{data:w,loading:C,refetch:Z}=(0,x.h)(o.t7.getFees),{data:S,loading:D}=(0,x.h)(()=>o.t7.getAttendance({limit:10})),{data:_,loading:A}=(0,x.h)(()=>o.t7.getTimetable({week:"current"})),k=[{title:"View Timetable",description:"Check your class schedule",icon:g.vlc,href:"/student/timetable",color:"bg-blue-500",textColor:"text-blue-600"},{title:"Check Attendance",description:"View your attendance record",icon:g.yK7,href:"/student/attendance",color:"bg-green-500",textColor:"text-green-600"},{title:"View Grades",description:"See your academic performance",icon:g.QqI,href:"/student/grades",color:"bg-purple-500",textColor:"text-purple-600"},{title:"Update Profile",description:"Manage your personal information",icon:g.fzv,href:"/student/profile",color:"bg-orange-500",textColor:"text-orange-600"}],T=(e=>{if(!e||0===e.length)return 0;let s=e.reduce((e,s)=>e+(({"A+":4,A:4,"A-":3.7,"B+":3.3,B:3,"B-":2.7,"C+":2.3,C:2,"C-":1.7,"D+":1.3,D:1,F:0})[s.grade]||0),0);return(s/e.length).toFixed(2)})((null==y?void 0:y.grades)||[]),F=(null==S?void 0:S.attendanceRate)||0,R=(null==w?void 0:w.totalOutstanding)||0;return p?(0,t.jsx)("div",{className:"p-6 flex justify-center items-center min-h-96",children:(0,t.jsx)(j.Z,{size:"lg"})}):(0,t.jsxs)("div",{className:"p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",null==v?void 0:null===(e=v.user)||void 0===e?void 0:e.first_name,"! Here's your academic overview."]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("select",{value:i,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"24h",label:"Last 24 hours"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:g.Bw1,onClick:()=>{f(),b(),Z()},children:"Refresh"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Current GPA"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:T}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.QqI,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"+0.2"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"from last semester"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.HR2,{className:"w-6 h-6 text-green-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Attendance Rate"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[F,"%"]}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g._rq,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"Excellent"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"attendance"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.xUG,{className:"w-6 h-6 text-blue-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Courses"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(null==y?void 0:null===(s=y.grades)||void 0===s?void 0:s.length)||0}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.yK7,{className:"w-4 h-4 text-purple-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-purple-600",children:"This semester"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.yK7,{className:"w-6 h-6 text-purple-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Outstanding Fees"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",R]}),(0,t.jsx)("div",{className:"flex items-center mt-2",children:R>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.bcx,{className:"w-4 h-4 text-red-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-red-600",children:"Payment due"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g._rq,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"All paid"})]})})]}),(0,t.jsx)("div",{className:"w-12 h-12 ".concat(R>0?"bg-red-100":"bg-green-100"," rounded-lg flex items-center justify-center"),children:(0,t.jsx)(g.oQC,{className:"w-6 h-6 ".concat(R>0?"text-red-600":"text-green-600")})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",children:"View All"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:k.map((e,s)=>{let a=e.icon;return(0,t.jsxs)(c(),{href:e.href,className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-sm transition-all duration-200 text-left group",children:[(0,t.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-lg flex items-center justify-center mb-3 group-hover:scale-105 transition-transform"),children:(0,t.jsx)(a,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500 group-hover:text-gray-700",children:[(0,t.jsx)("span",{children:"Go to"}),(0,t.jsx)(g.Rgz,{className:"w-4 h-4 ml-1"})]})]},s)})})]}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Grades"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/student/grades",children:"View All"})]}),N?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(null==y?void 0:null===(a=y.grades)||void 0===a?void 0:a.length)>0?(0,t.jsx)("div",{className:"space-y-4",children:y.grades.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(g.yK7,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.course_name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.semester," ",e.year]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"font-bold text-lg text-gray-900",children:e.grade}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.assessment_type})]})]},s))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.yK7,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Grades Yet"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Your grades will appear here once they're posted."})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Fee Status"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/student/fees",children:"View All"})]}),C?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(g.oQC,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Total Outstanding"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Amount due for payment"})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold ".concat(R>0?"text-red-600":"text-green-600"),children:["$",R]}),(0,t.jsx)(u.Z,{variant:R>0?"danger":"success",children:R>0?"Payment Due":"All Paid"})]})]}),null==w?void 0:null===(r=w.fees)||void 0===r?void 0:r.slice(0,3).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.fee_type}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-bold text-gray-900",children:["$",e.amount]}),(0,t.jsx)(u.Z,{variant:"paid"===e.status?"success":"danger",children:e.status})]})]},s))]})]}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Schedule"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/student/timetable",children:"View Timetable"})]}),A?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(null==_?void 0:null===(n=_.classes)||void 0===n?void 0:n.length)>0?(0,t.jsx)("div",{className:"space-y-4",children:_.classes.slice(0,4).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.TCC,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.course_name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.start_time," - ",e.end_time]}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:e.room||"TBA"})]})]},s))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.vlc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Today"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Enjoy your free time!"})]})]})]})]})},teacher_TeacherDashboard=()=>{var e,s,a,r,n,i,d;let[v,p]=(0,l.useState)("7d"),{data:f,loading:y,refetch:N}=(0,x.h)(o.$o.getProfile),{data:b,loading:w,refetch:C}=(0,x.h)(o.$o.getClasses),{data:Z,loading:S}=(0,x.h)(()=>o.$o.getTimetable({week:"current"})),{data:D,loading:_}=(0,x.h)(o.$o.getAllStudents),A=[{title:"Mark Attendance",description:"Record student attendance",icon:g.j4u,href:"/teacher/attendance",color:"bg-blue-500",textColor:"text-blue-600"},{title:"Enter Grades",description:"Submit student grades",icon:g.yK7,href:"/teacher/grades",color:"bg-green-500",textColor:"text-green-600"},{title:"View Classes",description:"Manage your classes",icon:g.WY8,href:"/teacher/classes",color:"bg-purple-500",textColor:"text-purple-600"},{title:"View Timetable",description:"Check your schedule",icon:g.vlc,href:"/teacher/timetable",color:"bg-orange-500",textColor:"text-orange-600"}],k=(null==D?void 0:null===(e=D.students)||void 0===e?void 0:e.length)||0,T=(null==b?void 0:null===(s=b.classes)||void 0===s?void 0:s.length)||0,F=(null==b?void 0:null===(a=b.classes)||void 0===a?void 0:a.reduce((e,s)=>e+(s.pendingGrades||0),0))||0;return y?(0,t.jsx)("div",{className:"p-6 flex justify-center items-center min-h-96",children:(0,t.jsx)(j.Z,{size:"lg"})}):(0,t.jsxs)("div",{className:"p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",null==f?void 0:null===(r=f.user)||void 0===r?void 0:r.first_name,"! Here's your teaching overview."]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("select",{value:v,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"24h",label:"Last 24 hours"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:g.Bw1,onClick:()=>{N(),C()},children:"Refresh"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:k}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.QqI,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"+5"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"this semester"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.WY8,{className:"w-6 h-6 text-blue-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Classes"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:T}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.yK7,{className:"w-4 h-4 text-purple-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-purple-600",children:"This semester"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.yK7,{className:"w-6 h-6 text-purple-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Attendance Rate"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[95,"%"]}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g._rq,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"Excellent"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"overall"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.xUG,{className:"w-6 h-6 text-green-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Grades"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:F}),(0,t.jsx)("div",{className:"flex items-center mt-2",children:F>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.bcx,{className:"w-4 h-4 text-orange-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-orange-600",children:"Needs attention"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g._rq,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"All caught up"})]})})]}),(0,t.jsx)("div",{className:"w-12 h-12 ".concat(F>0?"bg-orange-100":"bg-green-100"," rounded-lg flex items-center justify-center"),children:(0,t.jsx)(g.vPQ,{className:"w-6 h-6 ".concat(F>0?"text-orange-600":"text-green-600")})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",children:"View All"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:A.map((e,s)=>{let a=e.icon;return(0,t.jsxs)(c(),{href:e.href,className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-sm transition-all duration-200 text-left group",children:[(0,t.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-lg flex items-center justify-center mb-3 group-hover:scale-105 transition-transform"),children:(0,t.jsx)(a,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500 group-hover:text-gray-700",children:[(0,t.jsx)("span",{children:"Go to"}),(0,t.jsx)(g.Rgz,{className:"w-4 h-4 ml-1"})]})]},s)})})]}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"My Classes"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/teacher/classes",children:"View All"})]}),w?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(null==b?void 0:null===(n=b.classes)||void 0===n?void 0:n.length)>0?(0,t.jsx)("div",{className:"space-y-4",children:b.classes.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(g.yK7,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.course_name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.semester," • ",e.student_count," students"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)(u.Z,{variant:"active"===e.status?"success":"default",children:e.status}),e.pendingGrades>0&&(0,t.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:[e.pendingGrades," pending"]})]})]},s))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.yK7,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Assigned"}),(0,t.jsx)("p",{className:"text-gray-500",children:"You haven't been assigned to any classes yet."})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Schedule"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/teacher/timetable",children:"View Timetable"})]}),S?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(null==Z?void 0:null===(i=Z.classes)||void 0===i?void 0:i.length)>0?(0,t.jsx)("div",{className:"space-y-4",children:Z.classes.slice(0,4).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.TCC,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.course_name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.start_time," - ",e.end_time]}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:e.room||"TBA"})]}),(0,t.jsx)(u.Z,{variant:"primary",children:e.day})]},s))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.vlc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Today"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Enjoy your free time!"})]})]}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Students"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/teacher/classes",children:"View All"})]}),_?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(null==D?void 0:null===(d=D.students)||void 0===d?void 0:d.length)>0?(0,t.jsx)("div",{className:"space-y-4",children:D.students.slice(0,5).map((e,s)=>{var a,l;return(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[null===(a=e.first_name)||void 0===a?void 0:a[0],null===(l=e.last_name)||void 0===l?void 0:l[0]]})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("p",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.course_name})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)(u.Z,{variant:"success",children:"Active"})})]},s)})}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.WY8,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Students Yet"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Students will appear here once classes are assigned."})]})]})]})]})},v=a(9175),hod_EnhancedHodDashboard=()=>{var e;let{user:s,isAuthenticated:a}=(0,r.a)(),[n,i]=(0,l.useState)(!1),[d,p]=(0,l.useState)(!1),f={teachers:[{id:1,first_name:"John",last_name:"Smith",email:"john.smith@school.edu",status:"active",course_count:3},{id:2,first_name:"Jane",last_name:"Doe",email:"jane.doe@school.edu",status:"active",course_count:2},{id:3,first_name:"Bob",last_name:"Wilson",email:"bob.wilson@school.edu",status:"active",course_count:4}],stats:{courses:12,teachers:3,attendance:{avg_attendance_percentage:85.5}},timetable:[{id:1,course_name:"Mathematics 101",course_code:"MATH101",teacher_name:"John Smith",day_of_week:1,start_time:"09:00",end_time:"10:30",room:"Room 101"},{id:2,course_name:"Physics 201",course_code:"PHYS201",teacher_name:"Jane Doe",day_of_week:2,start_time:"11:00",end_time:"12:30",room:"Lab 1"},{id:3,course_name:"Chemistry 101",course_code:"CHEM101",teacher_name:"Bob Wilson",day_of_week:3,start_time:"14:00",end_time:"15:30",room:"Lab 2"}]},{data:y,loading:N,error:b,refetch:w}=(0,x.h)(o.pW.getDepartmentTeachers,[],{fallbackData:[]}),{data:C,loading:Z,error:S,refetch:D}=(0,x.h)(o.pW.getDepartmentStats,[],{fallbackData:{courses:0,teachers:0,attendance:{avg_attendance_percentage:0}}}),{data:_,loading:A,error:k,refetch:T}=(0,x.h)(()=>o.pW.getDepartmentTimetable({semester:"current"}),[],{fallbackData:[]}),F=d||b&&!(null==y?void 0:y.length)?f.teachers:y,R=d||S&&!(null==C?void 0:C.courses)?f.stats:C,P=d||k&&!(null==_?void 0:_.length)?f.timetable:_,[I,H]=(0,l.useState)("checking");(0,l.useEffect)(()=>{let testBackend=async()=>{try{let e=await fetch("http://localhost:5000/api/health");e.ok?H("connected"):H("error")}catch(e){H("disconnected")}};testBackend()},[]);let z=N||Z||A,handleRefresh=async()=>{i(!0);try{await Promise.all([w(),D(),T()])}catch(e){}finally{i(!1)}},E=[{title:"Manage Teachers",description:"View and manage department staff",icon:g.WY8,href:"/hod/teachers",color:"bg-blue-500",count:(null==F?void 0:F.length)||0},{title:"Course Management",description:"Manage department courses",icon:g.yK7,href:"/hod/courses",color:"bg-green-500",count:(null==R?void 0:R.courses)||0},{title:"Reports & Analytics",description:"Generate departmental reports",icon:g.DKx,href:"/hod/reports",color:"bg-purple-500",count:null},{title:"Timetable Management",description:"View and approve timetables",icon:g.vlc,href:"/hod/timetable",color:"bg-orange-500",count:(null==P?void 0:P.length)||0},{title:"Approvals",description:"Review pending approvals",icon:g._rq,href:"/hod/approvals",color:"bg-red-500",count:null},{title:"Notifications",description:"Send notifications to staff",icon:g.Imn,href:"/hod/notifications",color:"bg-indigo-500",count:null}],B=[{title:"Total Teachers",value:(null==F?void 0:F.length)||0,icon:g.WY8,color:"text-blue-600",bgColor:"bg-blue-50",change:null},{title:"Total Courses",value:(null==R?void 0:R.courses)||0,icon:g.yK7,color:"text-green-600",bgColor:"bg-green-50",change:null},{title:"Avg Attendance",value:"".concat((null==R?void 0:null===(e=R.attendance)||void 0===e?void 0:e.avg_attendance_percentage)||0,"%"),icon:g.QqI,color:"text-purple-600",bgColor:"bg-purple-50",change:null},{title:"Active Classes",value:(null==P?void 0:P.length)||0,icon:g.vlc,color:"text-orange-600",bgColor:"bg-orange-50",change:null}];return(b||S||k)&&!d?(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)(v.Z,{variant:"error",className:"mb-6",children:["Error loading dashboard data. Please try refreshing the page.",!1]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(h.Z,{onClick:handleRefresh,loading:n,icon:g.Bw1,children:"Retry"}),(0,t.jsx)(h.Z,{variant:"outline",onClick:()=>p(!0),icon:g.aCJ,children:"Use Test Data"})]})]}):(0,t.jsxs)("div",{className:"p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"HOD Dashboard"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Welcome back! Here's your department overview.",d&&(0,t.jsx)("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Test Mode"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(h.Z,{variant:"outline",size:"sm",onClick:handleRefresh,loading:n,icon:g.Bw1,children:"Refresh"}),!1]})]}),!1,(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:B.map((e,s)=>{let a=e.icon;return(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg ".concat(e.bgColor),children:(0,t.jsx)(a,{className:"w-6 h-6 ".concat(e.color)})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,t.jsx)("div",{className:"flex items-center",children:z?(0,t.jsx)(j.Z,{size:"sm"}):(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.value})})]})]})},s)})}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map((e,s)=>{let a=e.icon;return(0,t.jsx)(c(),{href:e.href,className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-sm transition-all duration-200 text-left group",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform"),children:(0,t.jsx)(a,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900 group-hover:text-gray-700",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[null!==e.count&&(0,t.jsx)(u.Z,{variant:"default",size:"sm",children:z?"...":e.count}),(0,t.jsx)(g.Rgz,{className:"w-4 h-4 text-gray-400 group-hover:text-gray-600"})]})]})},s)})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Department Teachers"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/hod/teachers",children:"View All"})]}),N&&!d?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(null==F?void 0:F.length)>0?(0,t.jsx)("div",{className:"space-y-4",children:F.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(g.WY8,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.email})]}),(0,t.jsx)(u.Z,{variant:"active"===e.status?"success":"default",size:"sm",children:e.status})]},s))}):(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No teachers found"})]}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Schedule"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/hod/timetable",children:"View Timetable"})]}),A&&!d?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(null==P?void 0:P.length)>0?(0,t.jsx)("div",{className:"space-y-4",children:P.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.vlc,{className:"w-5 h-5 text-green-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.course_name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.teacher_name," • ",e.start_time," - ",e.end_time,e.room&&" • ".concat(e.room)]})]})]},s))}):(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No classes scheduled"})]})]})]})},finance_FinanceDashboard=()=>{var e,s,a;let[r,n]=(0,l.useState)("7d"),{data:i,loading:d,error:u,refetch:v}=(0,x.h)(()=>{var e;return(null===(e=o.sz.getProfile)||void 0===e?void 0:e.call(o.sz))||Promise.resolve({data:{user:{first_name:"Finance User"}}})},[],{fallbackData:{user:{first_name:"Finance User"}}}),{data:p,loading:f,error:y,refetch:N}=(0,x.h)(()=>{var e;return(null===(e=o.sz.getOverdueFees)||void 0===e?void 0:e.call(o.sz))||Promise.resolve({data:{fees:[],totalOutstanding:0,overdueCount:0}})},[],{fallbackData:{fees:[],totalOutstanding:0,overdueCount:0}}),{data:b,loading:w}=(0,x.h)(()=>o.WP.getActivitiesByEntityType("payment",{limit:5}),[],{fallbackData:{data:[]}}),{data:C,loading:Z,error:S,refetch:D}=(0,x.h)(()=>{var e;return(null===(e=o.sz.getFinancialReports)||void 0===e?void 0:e.call(o.sz,{period:"month"}))||Promise.resolve({data:{totalRevenue:0,totalPaid:0}})},[],{fallbackData:{totalRevenue:0,totalPaid:0}}),_=[{title:"Manage Fees",description:"Create and manage student fees",icon:g.oQC,href:"/finance/fees",color:"bg-blue-500",textColor:"text-blue-600"},{title:"Generate Reports",description:"Create financial reports",icon:g.DKx,href:"/finance/reports",color:"bg-green-500",textColor:"text-green-600"},{title:"View Students",description:"Manage student accounts",icon:g.WY8,href:"/finance/students",color:"bg-purple-500",textColor:"text-purple-600"},{title:"Create Invoice",description:"Generate student invoices",icon:g.NOg,href:"/finance/invoices",color:"bg-orange-500",textColor:"text-orange-600"}],A=(null==C?void 0:C.totalRevenue)||0,k=(null==p?void 0:p.totalOutstanding)||0,T=(null==C?void 0:C.totalPaid)||0,F=(null==p?void 0:p.overdueCount)||0;return d?(0,t.jsx)("div",{className:"p-6 flex justify-center items-center min-h-96",children:(0,t.jsx)(j.Z,{size:"lg"})}):(0,t.jsxs)("div",{className:"p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",(null==i?void 0:null===(e=i.user)||void 0===e?void 0:e.first_name)||"Finance User","! Here's your financial overview."]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("select",{value:r,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"24h",label:"Last 24 hours"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:g.Bw1,onClick:()=>{v(),N(),D()},children:"Refresh"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",A.toLocaleString()]}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.QqI,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"+12%"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"this month"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.oQC,{className:"w-6 h-6 text-green-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Outstanding Fees"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",k.toLocaleString()]}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.bcx,{className:"w-4 h-4 text-orange-500 mr-1"}),(0,t.jsxs)("span",{className:"text-sm text-orange-600",children:[F," overdue"]})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.bcx,{className:"w-6 h-6 text-orange-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Paid"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",T.toLocaleString()]}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g._rq,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"This month"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.XiQ,{className:"w-6 h-6 text-blue-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Collection Rate"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[A>0?Math.round((A-k)/A*100):0,"%"]}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.xUG,{className:"w-4 h-4 text-purple-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-purple-600",children:"Efficiency"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.xUG,{className:"w-6 h-6 text-purple-600"})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",children:"View All"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:_.map((e,s)=>{let a=e.icon;return a?(0,t.jsxs)(c(),{href:e.href,className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-sm transition-all duration-200 text-left group",children:[(0,t.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-lg flex items-center justify-center mb-3 group-hover:scale-105 transition-transform"),children:(0,t.jsx)(a,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500 group-hover:text-gray-700",children:[(0,t.jsx)("span",{children:"Go to"}),(0,t.jsx)(g.Rgz,{className:"w-4 h-4 ml-1"})]})]},s):null})})]}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Overdue Fees"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/finance/overdue",children:"View All"})]}),f?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(null==p?void 0:null===(s=p.fees)||void 0===s?void 0:s.length)>0?(0,t.jsx)("div",{className:"space-y-4",children:p.fees.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(g.oQC,{className:"w-4 h-4 text-red-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.student_name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.fee_type})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-bold text-red-600",children:["$",e.amount]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]})]},s))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g._rq,{className:"w-12 h-12 text-green-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Overdue Fees"}),(0,t.jsx)("p",{className:"text-gray-500",children:"All fees are up to date!"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Summary"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/finance/reports",children:"View Reports"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(g.oQC,{className:"w-5 h-5 text-green-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Monthly Revenue"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Total income this month"})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",A.toLocaleString()]}),(0,t.jsx)("p",{className:"text-sm text-green-600",children:"+12% from last month"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(g.XiQ,{className:"w-5 h-5 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Payments Processed"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Successful transactions"})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",T.toLocaleString()]}),(0,t.jsx)("p",{className:"text-sm text-blue-600",children:"This month"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(g.bcx,{className:"w-5 h-5 text-orange-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Outstanding Amount"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Fees pending collection"})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:["$",k.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-sm text-orange-600",children:[F," overdue"]})]})]})]})]}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",children:"View All"})]}),w?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(0,t.jsx)("div",{className:"space-y-4",children:(null==b?void 0:null===(a=b.data)||void 0===a?void 0:a.length)>0?b.data.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 ".concat((e=>{switch(e){case"payment_received":return"bg-green-500";case"invoice_generated":return"bg-blue-500";case"fee_overdue":return"bg-orange-500";case"report_generated":return"bg-purple-500";default:return"bg-gray-500"}})(e.action)," rounded-full mt-2")}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.description}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.user_name," - ",e.user_role]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.created_at).toLocaleString()})]})]},e.id||s)):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.bAx,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No recent financial activities"})]})})]})]})]})},admin_AdminDashboard=()=>{var e,s;let[a,r]=(0,l.useState)("7d"),{data:n,loading:i,refetch:d}=(0,x.h)(o.Sb.getSystemStats),{data:u,loading:v}=(0,x.h)(()=>o.Sb.getAllUsers({limit:5})),{data:p,loading:f}=(0,x.h)(()=>o.WP.getSystemAlerts({limit:5})),y=[{title:"Create User",description:"Add new student, teacher, or staff",icon:g.WY8,href:"/admin/users",color:"bg-blue-500",textColor:"text-blue-600"},{title:"Manage Calendar",description:"Add events and academic dates",icon:g.vlc,href:"/admin/calendar",color:"bg-green-500",textColor:"text-green-600"},{title:"System Settings",description:"Configure system preferences",icon:g.nbt,href:"/admin/system",color:"bg-purple-500",textColor:"text-purple-600"},{title:"View Analytics",description:"System performance and usage",icon:g.DKx,href:"/admin/analytics",color:"bg-orange-500",textColor:"text-orange-600"}],N=[{label:"Database",status:"healthy",value:"99.9%"},{label:"API Response",status:"healthy",value:"120ms"},{label:"Active Users",status:"healthy",value:(null==n?void 0:n.totalUsers)||0},{label:"System Load",status:"warning",value:"78%"}];return i?(0,t.jsx)("div",{className:"p-6 flex justify-center items-center min-h-96",children:(0,t.jsx)(j.Z,{size:"lg"})}):(0,t.jsxs)("div",{className:"p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening with your school management system."})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("select",{value:a,onChange:e=>r(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"24h",label:"Last 24 hours"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:g.Bw1,onClick:d,children:"Refresh"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(null==n?void 0:n.totalUsers)||0}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.QqI,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"+12%"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"from last month"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.WY8,{className:"w-6 h-6 text-blue-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Students"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(null==n?void 0:n.totalStudents)||0}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.QqI,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"+8%"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"from last month"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.hbr,{className:"w-6 h-6 text-green-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Teachers"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(null==n?void 0:n.totalTeachers)||0}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.QqI,{className:"w-4 h-4 text-green-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"+3%"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"from last month"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.WY8,{className:"w-6 h-6 text-purple-600"})})]})}),(0,t.jsx)(m.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Sessions"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"24"}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(g.bAx,{className:"w-4 h-4 text-blue-500 mr-1"}),(0,t.jsx)("span",{className:"text-sm text-blue-600",children:"Live"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"right now"})]})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g.bAx,{className:"w-6 h-6 text-orange-600"})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Health"}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[(0,t.jsx)(g._rq,{className:"w-4 h-4 mr-1"}),"All Systems Operational"]})]}),(0,t.jsx)("div",{className:"space-y-4",children:N.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.value}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("healthy"===e.status?"bg-green-500":"warning"===e.status?"bg-yellow-500":"bg-red-500")})]})]},s))})]}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:g.OvN,children:"Add New"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:y.map((e,s)=>{let a=e.icon;return(0,t.jsxs)(c(),{href:e.href,className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-sm transition-all duration-200 text-left group",children:[(0,t.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-lg flex items-center justify-center mb-3 group-hover:scale-105 transition-transform"),children:(0,t.jsx)(a,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500 group-hover:text-gray-700",children:[(0,t.jsx)("span",{children:"Go to"}),(0,t.jsx)(g.Rgz,{className:"w-4 h-4 ml-1"})]})]},s)})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Users"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",href:"/admin/users",children:"View All"})]}),v?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(0,t.jsx)("div",{className:"space-y-4",children:null==u?void 0:null===(e=u.users)||void 0===e?void 0:e.slice(0,5).map((e,s)=>{var a,l;return(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[null===(a=e.first_name)||void 0===a?void 0:a[0],null===(l=e.last_name)||void 0===l?void 0:l[0]]})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate",children:[e.first_name," ",e.last_name]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.email})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("admin"===e.role?"bg-red-100 text-red-800":"teacher"===e.role?"bg-blue-100 text-blue-800":"student"===e.role?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.role}),(0,t.jsx)(g.TCC,{className:"w-4 h-4 text-gray-400"})]})]},s)})})]}),(0,t.jsxs)(m.Z,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Alerts"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",children:"Manage"})]}),f?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{})}):(0,t.jsx)("div",{className:"space-y-4",children:(null==p?void 0:null===(s=p.data)||void 0===s?void 0:s.length)>0?p.data.map((e,s)=>{let a="check-circle"===e.icon?g._rq:"alert-circle"===e.icon?g.bcx:g.bAx,l="success"===e.type?"text-green-500":"error"===e.type?"text-red-500":"warning"===e.type?"text-yellow-500":"text-blue-500";return(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(a,{className:"w-5 h-5 ".concat(l," mt-0.5")}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),e.message&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleString()})]})]},e.id||s)}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g._rq,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No recent system alerts"})]})})]})]})]})},dashboard=()=>{let{user:e,isAuthenticated:s,isLoading:a}=(0,r.a)();return a?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"spinner"})}):s?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(n.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(i.Z,{}),(0,t.jsx)("main",{className:"flex-1 overflow-auto",children:(()=>{switch(null==e?void 0:e.role){case"student":return(0,t.jsx)(student_StudentDashboard,{});case"teacher":return(0,t.jsx)(teacher_TeacherDashboard,{});case"hod":return(0,t.jsx)(hod_EnhancedHodDashboard,{});case"finance":return(0,t.jsx)(finance_FinanceDashboard,{});case"admin":return(0,t.jsx)(admin_AdminDashboard,{});default:return(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{className:"card-title",children:"Welcome to SMIS"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-2",children:["Your role (",null==e?void 0:e.role,") dashboard is being prepared."]})]})})}})()})]})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Please log in to access the dashboard."}),(0,t.jsx)("a",{href:"/login",className:"btn btn-primary",children:"Go to Login"})]})})}},5122:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(6208),m=a(7014),h=a(9180),u=a(5822),j=a(9175),g=a(4549),v=a(7219);s.default=()=>{var e,s,a,p;let{user:f}=(0,r.a)(),[y,N]=(0,l.useState)(""),[b,w]=(0,l.useState)("all"),[C,Z]=(0,l.useState)("all"),[S,D]=(0,l.useState)(null),{data:_,loading:A,error:k,refetch:T}=(0,n.h)(()=>i.sz.getAllFees({search:y,status:b,feeType:C}),[y,b,C]),{loading:F,execute:R}=(0,n.c)();if(!f||"finance"!==f.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(j.Z,{variant:"error",children:"Access denied. Finance access required."})});let P=(null==_?void 0:_.fees)||[],I=(null==_?void 0:_.stats)||{},handleEditFee=e=>{alert("Edit fee ".concat(e," functionality would be implemented here"))},handleViewDetails=e=>{alert("View fee ".concat(e," details functionality would be implemented here"))},handleSendReminder=async(e,s)=>{try{await R(()=>i.sz.sendPaymentReminder({studentId:e,feeId:s})),D({type:"success",text:"Payment reminder sent successfully!"}),setTimeout(()=>D(null),5e3)}catch(e){var a,t;D({type:"error",text:(null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to send reminder"})}},getStatusBadgeVariant=(e,s)=>"paid"===e?"success":"partial"===e?"warning":"unpaid"===e&&new Date(s)<new Date?"danger":"warning",getStatusText=(e,s)=>"paid"===e?"Paid":"partial"===e?"Partial":"unpaid"===e&&new Date(s)<new Date?"Overdue":"Pending";return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Fee Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage student fees and payment tracking"})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(h.Z,{variant:"outline",icon:v._hL,children:"Export Report"}),(0,t.jsx)(h.Z,{variant:"primary",icon:v.OvN,onClick:()=>{alert("Create fee functionality would be implemented here")},children:"Create Fee"})]})]}),S&&(0,t.jsx)(j.Z,{variant:S.type,dismissible:!0,onDismiss:()=>D(null),children:S.text}),A?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(g.Z,{size:"lg"})}):k?(0,t.jsxs)(j.Z,{variant:"error",children:["Failed to load fees: ",k]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(v.oQC,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null===(e=I.totalRevenue)||void 0===e?void 0:e.toLocaleString())||"0"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(v.XiQ,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Collected"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null===(s=I.collectedAmount)||void 0===s?void 0:s.toLocaleString())||"0"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[I.collectionRate?"".concat(I.collectionRate.toFixed(1),"%"):"0%"," rate"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(v.oQC,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Outstanding"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null===(a=I.outstandingAmount)||void 0===a?void 0:a.toLocaleString())||"0"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[I.outstandingCount||0," students"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(v.oQC,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null===(p=I.overdueAmount)||void 0===p?void 0:p.toLocaleString())||"0"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[I.overdueCount||0," fees"]})]})]})})]}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(u.Z,{label:"Search",placeholder:"Search by student name or ID...",value:y,onChange:e=>N(e.target.value),icon:v.jRj})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,t.jsx)("select",{value:b,onChange:e=>w(e.target.value),className:"form-select",children:[{value:"all",label:"All Status"},{value:"paid",label:"Paid"},{value:"unpaid",label:"Unpaid"},{value:"overdue",label:"Overdue"},{value:"partial",label:"Partial Payment"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee Type"}),(0,t.jsx)("select",{value:C,onChange:e=>Z(e.target.value),className:"form-select",children:[{value:"all",label:"All Types"},{value:"tuition",label:"Tuition"},{value:"library",label:"Library"},{value:"lab",label:"Laboratory"},{value:"hostel",label:"Hostel"},{value:"transport",label:"Transport"},{value:"exam",label:"Examination"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)(h.Z,{variant:"outline",onClick:T,className:"w-full",children:"Refresh"})})]})}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Fee Records"})}),P.length>0?(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Student"}),(0,t.jsx)(o.Z.Head,{children:"Fee Type"}),(0,t.jsx)(o.Z.Head,{children:"Amount"}),(0,t.jsx)(o.Z.Head,{children:"Due Date"}),(0,t.jsx)(o.Z.Head,{children:"Status"}),(0,t.jsx)(o.Z.Head,{children:"Paid Amount"}),(0,t.jsx)(o.Z.Head,{children:"Actions"})]})}),(0,t.jsx)(o.Z.Body,{children:P.map((e,s)=>(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.student_name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.student_id]})]}),(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.fee_type}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:["$",parseFloat(e.amount).toFixed(2)]})}),(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"text-gray-900",children:new Date(e.due_date).toLocaleDateString()}),new Date(e.due_date)<new Date&&"unpaid"===e.status&&(0,t.jsxs)("div",{className:"text-xs text-red-600",children:[Math.ceil((new Date-new Date(e.due_date))/864e5)," days overdue"]})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:getStatusBadgeVariant(e.status,e.due_date),children:getStatusText(e.status,e.due_date)})}),(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsxs)("span",{className:"font-medium text-gray-900",children:["$",parseFloat(e.paid_amount||0).toFixed(2)]}),"partial"===e.status&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["$",(parseFloat(e.amount)-parseFloat(e.paid_amount||0)).toFixed(2)," remaining"]})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:v.rDJ,onClick:()=>handleViewDetails(e.id),children:"View"}),(0,t.jsx)(h.Z,{variant:"primary",size:"sm",icon:v.vPQ,onClick:()=>handleEditFee(e.id),children:"Edit"}),"paid"!==e.status&&(0,t.jsx)(h.Z,{variant:"warning",size:"sm",onClick:()=>handleSendReminder(e.student_id,e.id),loading:F,children:"Remind"})]})})]},s))})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(v.oQC,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Fees Found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No fees match the current filters. Try adjusting your search criteria."})]})]})]})]})})]})]})}},3601:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(6208),m=a(7014),h=a(9180),u=a(5822),j=a(9175),g=a(4549),v=a(7219);s.default=()=>{var e,s,a,p;let{user:f}=(0,r.a)(),[y,N]=(0,l.useState)(""),[b,w]=(0,l.useState)("all"),[C,Z]=(0,l.useState)("all"),[S,D]=(0,l.useState)({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[_,A]=(0,l.useState)(null),{data:k,loading:T,error:F,refetch:R}=(0,n.h)(()=>i.sz.getPayments({search:y,status:b,method:C,...S}),[y,b,C,S]),{loading:P,execute:I}=(0,n.c)();if(!f||"finance"!==f.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(j.Z,{variant:"error",children:"Access denied. Finance access required."})});let H=(null==k?void 0:k.payments)||[],z=(null==k?void 0:k.stats)||{},handleDateChange=(e,s)=>{D(a=>({...a,[e]:s}))},handleViewReceipt=e=>{alert("View receipt for payment ".concat(e," functionality would be implemented here"))},handleRefundPayment=async e=>{try{await I(()=>i.sz.refundPayment(e)),A({type:"success",text:"Payment refund initiated successfully!"}),R(),setTimeout(()=>A(null),5e3)}catch(e){var s,a;A({type:"error",text:(null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to initiate refund"})}},handleVerifyPayment=async e=>{try{await I(()=>i.sz.verifyPayment(e)),A({type:"success",text:"Payment verified successfully!"}),R(),setTimeout(()=>A(null),5e3)}catch(e){var s,a;A({type:"error",text:(null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to verify payment"})}},getStatusBadgeVariant=e=>{switch(e){case"completed":return"success";case"pending":return"warning";case"failed":return"danger";default:return"default"}},getMethodBadgeVariant=e=>{switch(e){case"cash":return"success";case"card":case"online":return"primary";case"bank_transfer":return"warning";default:return"default"}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Track and manage all payment transactions"})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(h.Z,{variant:"outline",icon:v._hL,children:"Export Report"}),(0,t.jsx)(h.Z,{variant:"outline",icon:v.Bw1,onClick:R,children:"Refresh"})]})]}),_&&(0,t.jsx)(j.Z,{variant:_.type,dismissible:!0,onDismiss:()=>A(null),children:_.text}),T?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(g.Z,{size:"lg"})}):F?(0,t.jsxs)(j.Z,{variant:"error",children:["Failed to load payments: ",F]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(v.oQC,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Payments"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null===(e=z.totalAmount)||void 0===e?void 0:e.toLocaleString())||"0"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[z.totalCount||0," transactions"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(v.XiQ,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null===(s=z.completedAmount)||void 0===s?void 0:s.toLocaleString())||"0"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[z.completedCount||0," payments"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(v.vlc,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null===(a=z.pendingAmount)||void 0===a?void 0:a.toLocaleString())||"0"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[z.pendingCount||0," payments"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(v.Bw1,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Failed/Refunded"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null===(p=z.failedAmount)||void 0===p?void 0:p.toLocaleString())||"0"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[z.failedCount||0," payments"]})]})]})})]}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(u.Z,{label:"Search",placeholder:"Search by student or transaction ID...",value:y,onChange:e=>N(e.target.value),icon:v.jRj})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,t.jsx)("select",{value:b,onChange:e=>w(e.target.value),className:"form-select",children:[{value:"all",label:"All Status"},{value:"completed",label:"Completed"},{value:"pending",label:"Pending"},{value:"failed",label:"Failed"},{value:"refunded",label:"Refunded"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),(0,t.jsx)("select",{value:C,onChange:e=>Z(e.target.value),className:"form-select",children:[{value:"all",label:"All Methods"},{value:"cash",label:"Cash"},{value:"card",label:"Credit/Debit Card"},{value:"bank_transfer",label:"Bank Transfer"},{value:"online",label:"Online Payment"},{value:"cheque",label:"Cheque"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,t.jsx)("input",{type:"date",value:S.startDate,onChange:e=>handleDateChange("startDate",e.target.value),className:"form-input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,t.jsx)("input",{type:"date",value:S.endDate,onChange:e=>handleDateChange("endDate",e.target.value),className:"form-input"})]})]})}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Payment Transactions"})}),H.length>0?(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Transaction ID"}),(0,t.jsx)(o.Z.Head,{children:"Student"}),(0,t.jsx)(o.Z.Head,{children:"Fee Type"}),(0,t.jsx)(o.Z.Head,{children:"Amount"}),(0,t.jsx)(o.Z.Head,{children:"Method"}),(0,t.jsx)(o.Z.Head,{children:"Date"}),(0,t.jsx)(o.Z.Head,{children:"Status"}),(0,t.jsx)(o.Z.Head,{children:"Actions"})]})}),(0,t.jsx)(o.Z.Body,{children:H.map((e,s)=>{var a;return(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-mono text-sm",children:e.transaction_id})}),(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.student_name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.student_id]})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-900",children:e.fee_type})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:["$",parseFloat(e.amount).toFixed(2)]})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:getMethodBadgeVariant(e.payment_method),children:null===(a=e.payment_method)||void 0===a?void 0:a.replace("_"," ")})}),(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"text-gray-900",children:new Date(e.payment_date).toLocaleDateString()}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.payment_date).toLocaleTimeString()})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:getStatusBadgeVariant(e.status),children:e.status})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:v.rDJ,onClick:()=>handleViewReceipt(e.id),children:"Receipt"}),"pending"===e.status&&(0,t.jsx)(h.Z,{variant:"success",size:"sm",onClick:()=>handleVerifyPayment(e.id),loading:P,children:"Verify"}),"completed"===e.status&&(0,t.jsx)(h.Z,{variant:"warning",size:"sm",onClick:()=>handleRefundPayment(e.id),loading:P,children:"Refund"})]})})]},s)})})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(v.XiQ,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payments Found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No payment transactions match the current filters."})]})]})]})]})})]})]})}},6939:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(6208),m=a(9180),h=a(9175),u=a(4549),j=a(7219);s.default=()=>{var e,s,a,g,v,p,f,y,N,b;let{user:w}=(0,r.a)(),[C,Z]=(0,l.useState)("revenue"),[S,D]=(0,l.useState)("current_month"),[_,A]=(0,l.useState)({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),{data:k,loading:T,error:F,execute:R}=(0,n.h)(()=>i.sz.getFinancialReport({type:C,period:S,..."custom"===S?_:{}}),[]);if(l.useEffect(()=>{R()},[C,S,_,R]),!w||"finance"!==w.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(h.Z,{variant:"error",children:"Access denied. Finance access required."})});let P=[{value:"revenue",label:"Revenue Report",icon:j.oQC},{value:"collections",label:"Collections Report",icon:j.QqI},{value:"outstanding",label:"Outstanding Report",icon:j.DKx},{value:"fee_analysis",label:"Fee Analysis",icon:j.CFv}],handleDateChange=(e,s)=>{A(a=>({...a,[e]:s}))},formatCurrency=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e||0),formatPercentage=e=>"".concat((e||0).toFixed(1),"%");return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Financial Reports"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Generate and analyze financial reports and insights"})]}),(0,t.jsx)(m.Z,{variant:"primary",icon:j._hL,onClick:()=>{alert("Export report functionality would be implemented here")},children:"Export Report"})]}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Report Type"}),(0,t.jsx)("select",{value:C,onChange:e=>Z(e.target.value),className:"form-select",children:P.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),(0,t.jsx)("select",{value:S,onChange:e=>D(e.target.value),className:"form-select",children:[{value:"current_month",label:"Current Month"},{value:"last_month",label:"Last Month"},{value:"current_quarter",label:"Current Quarter"},{value:"current_year",label:"Current Year"},{value:"last_year",label:"Last Year"},{value:"custom",label:"Custom Range"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"custom"===S&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,t.jsx)("input",{type:"date",value:_.startDate,onChange:e=>handleDateChange("startDate",e.target.value),className:"form-input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,t.jsx)("input",{type:"date",value:_.endDate,onChange:e=>handleDateChange("endDate",e.target.value),className:"form-input"})]})]})]})}),T?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(u.Z,{size:"lg"})}):F?(0,t.jsxs)(h.Z,{variant:"error",children:["Failed to load report: ",F]}):k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.oQC,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(null===(e=k.summary)||void 0===e?void 0:e.totalRevenue)}),(null===(s=k.summary)||void 0===s?void 0:s.revenueGrowth)&&(0,t.jsxs)("p",{className:"text-xs text-green-600",children:["+",formatPercentage(k.summary.revenueGrowth)," from last period"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.QqI,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Collections"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(null===(a=k.summary)||void 0===a?void 0:a.totalCollections)}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[formatPercentage(null===(g=k.summary)||void 0===g?void 0:g.collectionRate)," collection rate"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.DKx,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Outstanding"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(null===(v=k.summary)||void 0===v?void 0:v.totalOutstanding)}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(p=k.summary)||void 0===p?void 0:p.outstandingCount)||0," students"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.vlc,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(null===(f=k.summary)||void 0===f?void 0:f.totalOverdue)}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(y=k.summary)||void 0===y?void 0:y.overdueCount)||0," fees"]})]})]})})]}),"revenue"===C&&k.revenueBreakdown&&(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Revenue Breakdown by Fee Type"})}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Fee Type"}),(0,t.jsx)(o.Z.Head,{children:"Total Amount"}),(0,t.jsx)(o.Z.Head,{children:"Collected"}),(0,t.jsx)(o.Z.Head,{children:"Outstanding"}),(0,t.jsx)(o.Z.Head,{children:"Collection Rate"})]})}),(0,t.jsx)(o.Z.Body,{children:k.revenueBreakdown.map((e,s)=>(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium text-gray-900",children:e.feeType})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-semibold",children:formatCurrency(e.totalAmount)})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-green-600 font-medium",children:formatCurrency(e.collectedAmount)})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-orange-600 font-medium",children:formatCurrency(e.outstandingAmount)})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:formatPercentage(e.collectionRate)})})]},s))})]})]}),"collections"===C&&k.dailyCollections&&(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Daily Collections Trend"})}),(0,t.jsx)("div",{className:"space-y-4",children:k.dailyCollections.map((e,s)=>{var a;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.transactionCount," transactions"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:formatCurrency(e.amount)}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:null===(a=e.paymentMethods)||void 0===a?void 0:a.join(", ")})]})]},s)})})]}),"outstanding"===C&&k.outstandingDetails&&(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Outstanding Fees by Student"})}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Student"}),(0,t.jsx)(o.Z.Head,{children:"Total Outstanding"}),(0,t.jsx)(o.Z.Head,{children:"Overdue Amount"}),(0,t.jsx)(o.Z.Head,{children:"Days Overdue"}),(0,t.jsx)(o.Z.Head,{children:"Fee Types"})]})}),(0,t.jsx)(o.Z.Body,{children:k.outstandingDetails.map((e,s)=>{var a;return(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.studentName}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.studentId]})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-semibold text-orange-600",children:formatCurrency(e.totalOutstanding)})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-semibold text-red-600",children:formatCurrency(e.overdueAmount)})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("span",{className:"text-gray-900",children:[e.maxDaysOverdue||0," days"]})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("div",{className:"text-sm text-gray-600",children:null===(a=e.feeTypes)||void 0===a?void 0:a.join(", ")})})]},s)})})]})]}),"fee_analysis"===C&&k.feeAnalysis&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Fee Type Performance"})}),(0,t.jsx)("div",{className:"space-y-4",children:null===(N=k.feeAnalysis.feeTypePerformance)||void 0===N?void 0:N.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.feeType}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.studentCount," students"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:formatCurrency(e.totalAmount)}),(0,t.jsxs)("div",{className:"text-sm text-green-600",children:[formatPercentage(e.collectionRate)," collected"]})]})]},s))})]}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Payment Method Analysis"})}),(0,t.jsx)("div",{className:"space-y-4",children:null===(b=k.feeAnalysis.paymentMethodBreakdown)||void 0===b?void 0:b.map((e,s)=>{var a;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:null===(a=e.paymentMethod)||void 0===a?void 0:a.replace("_"," ")}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.transactionCount," transactions"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:formatCurrency(e.totalAmount)}),(0,t.jsxs)("div",{className:"text-sm text-blue-600",children:[formatPercentage(e.percentage)," of total"]})]})]},s)})})]})]})]}):(0,t.jsxs)(x.Z,{className:"text-center py-12",children:[(0,t.jsx)(j.DKx,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Report Data"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Select a report type and period to generate financial reports."})]})]})})]})]})}},9353:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(6208),m=a(7014),h=a(9175),u=a(4549),j=a(7219);s.default=()=>{var e;let{user:s}=(0,r.a)(),[a,g]=(0,l.useState)("current_semester"),[v,p]=(0,l.useState)("overview"),{data:f,loading:y,error:N,execute:b}=(0,n.h)(()=>i.pW.getDepartmentAnalytics({period:a}),[]);if(l.useEffect(()=>{b()},[a,b]),!s||"hod"!==s.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(h.Z,{variant:"error",children:"Access denied. HOD access required."})});let w=[{id:"overview",label:"Overview",icon:j.DKx},{id:"teachers",label:"Teacher Performance",icon:j.WY8},{id:"courses",label:"Course Analytics",icon:j.yK7},{id:"students",label:"Student Outcomes",icon:j.HR2}],getTrendIcon=e=>e>0?j.QqI:e<0?j.ZBs:j.DKx,getTrendColor=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600";return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Department Analytics"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Comprehensive insights into departmental performance"})]}),(0,t.jsx)("select",{value:a,onChange:e=>g(e.target.value),className:"form-select w-auto",children:[{value:"current_semester",label:"Current Semester"},{value:"last_semester",label:"Last Semester"},{value:"academic_year",label:"Academic Year"},{value:"last_year",label:"Last Year"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),y?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(u.Z,{size:"lg"})}):N?(0,t.jsxs)(h.Z,{variant:"error",children:["Failed to load analytics: ",N]}):f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.WY8,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.totalStudents||0})]})]}),f.studentTrend&&(0,t.jsxs)("div",{className:"flex items-center ".concat(getTrendColor(f.studentTrend)),children:[l.createElement(getTrendIcon(f.studentTrend),{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-sm ml-1",children:[Math.abs(f.studentTrend),"%"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.QqI,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg GPA"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.averageGPA?f.averageGPA.toFixed(2):"N/A"})]})]}),f.gpaTrend&&(0,t.jsxs)("div",{className:"flex items-center ".concat(getTrendColor(f.gpaTrend)),children:[l.createElement(getTrendIcon(f.gpaTrend),{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-sm ml-1",children:[Math.abs(f.gpaTrend).toFixed(1),"%"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.vlc,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Attendance Rate"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.attendanceRate?"".concat(f.attendanceRate.toFixed(1),"%"):"N/A"})]})]}),f.attendanceTrend&&(0,t.jsxs)("div",{className:"flex items-center ".concat(getTrendColor(f.attendanceTrend)),children:[l.createElement(getTrendIcon(f.attendanceTrend),{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-sm ml-1",children:[Math.abs(f.attendanceTrend).toFixed(1),"%"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.yK7,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Course Completion"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.completionRate?"".concat(f.completionRate.toFixed(1),"%"):"N/A"})]})]}),f.completionTrend&&(0,t.jsxs)("div",{className:"flex items-center ".concat(getTrendColor(f.completionTrend)),children:[l.createElement(getTrendIcon(f.completionTrend),{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-sm ml-1",children:[Math.abs(f.completionTrend).toFixed(1),"%"]})]})]})})]}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8",children:w.map(e=>{let s=e.icon;return(0,t.jsxs)("button",{onClick:()=>p(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(v===e.id?"border-primary-blue text-primary-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)(s,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:e.label})]},e.id)})})}),(0,t.jsxs)("div",{className:"p-6",children:["overview"===v&&(0,t.jsxs)("div",{className:"space-y-6",children:[f.gradeDistribution&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Grade Distribution"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:Object.entries(f.gradeDistribution).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:a}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[s," Grade"]})]},s)})})]}),f.departmentComparison&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Department Comparison"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"University Average GPA"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:(null===(e=f.departmentComparison.universityAvgGPA)||void 0===e?void 0:e.toFixed(2))||"N/A"})]}),(0,t.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm text-green-600 font-medium",children:"Department Rank"}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-900",children:["#",f.departmentComparison.rank||"N/A"]})]}),(0,t.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm text-purple-600 font-medium",children:"Performance Score"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-900",children:f.departmentComparison.performanceScore||"N/A"})]})]})]})]}),"teachers"===v&&f.teacherPerformance&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Teacher Performance Analysis"}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Teacher"}),(0,t.jsx)(o.Z.Head,{children:"Classes"}),(0,t.jsx)(o.Z.Head,{children:"Students"}),(0,t.jsx)(o.Z.Head,{children:"Avg Class GPA"}),(0,t.jsx)(o.Z.Head,{children:"Attendance Rate"}),(0,t.jsx)(o.Z.Head,{children:"Performance"})]})}),(0,t.jsx)(o.Z.Body,{children:f.teacherPerformance.map((e,s)=>(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.employeeId})]}),(0,t.jsx)(o.Z.Cell,{children:e.classCount}),(0,t.jsx)(o.Z.Cell,{children:e.studentCount}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.avgGPA?e.avgGPA.toFixed(2):"N/A"})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.attendanceRate?"".concat(e.attendanceRate.toFixed(1),"%"):"N/A"})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:"excellent"===e.performance?"success":"good"===e.performance?"primary":"average"===e.performance?"warning":"danger",children:e.performance})})]},s))})]})]}),"courses"===v&&f.courseAnalytics&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Course Performance Analysis"}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Course"}),(0,t.jsx)(o.Z.Head,{children:"Enrolled"}),(0,t.jsx)(o.Z.Head,{children:"Completion Rate"}),(0,t.jsx)(o.Z.Head,{children:"Avg Grade"}),(0,t.jsx)(o.Z.Head,{children:"Satisfaction"}),(0,t.jsx)(o.Z.Head,{children:"Status"})]})}),(0,t.jsx)(o.Z.Body,{children:f.courseAnalytics.map((e,s)=>{var a;return(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.code})]}),(0,t.jsx)(o.Z.Cell,{children:e.enrolledCount}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.completionRate?"".concat(e.completionRate.toFixed(1),"%"):"N/A"})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.avgGrade||"N/A"})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.satisfaction?"".concat(e.satisfaction.toFixed(1),"%"):"N/A"})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:"excellent"===e.status?"success":"good"===e.status?"primary":"needs_improvement"===e.status?"warning":"danger",children:null===(a=e.status)||void 0===a?void 0:a.replace("_"," ")})})]},s)})})]})]}),"students"===v&&f.studentOutcomes&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Student Outcome Analysis"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Academic Performance"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Students with GPA ≥ 3.5"}),(0,t.jsx)("span",{className:"font-medium",children:f.studentOutcomes.highPerformers||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Students at Risk (GPA < 2.0)"}),(0,t.jsx)("span",{className:"font-medium text-red-600",children:f.studentOutcomes.atRisk||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Graduation Rate"}),(0,t.jsx)("span",{className:"font-medium",children:f.studentOutcomes.graduationRate?"".concat(f.studentOutcomes.graduationRate.toFixed(1),"%"):"N/A"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Engagement Metrics"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Average Attendance"}),(0,t.jsx)("span",{className:"font-medium",children:f.studentOutcomes.avgAttendance?"".concat(f.studentOutcomes.avgAttendance.toFixed(1),"%"):"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Course Satisfaction"}),(0,t.jsx)("span",{className:"font-medium",children:f.studentOutcomes.satisfaction?"".concat(f.studentOutcomes.satisfaction.toFixed(1),"%"):"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Retention Rate"}),(0,t.jsx)("span",{className:"font-medium",children:f.studentOutcomes.retentionRate?"".concat(f.studentOutcomes.retentionRate.toFixed(1),"%"):"N/A"})]})]})]})]})]})]})]})]}):(0,t.jsxs)(x.Z,{className:"text-center py-12",children:[(0,t.jsx)(j.DKx,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Analytics Data"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Analytics data will appear here once sufficient departmental data is available."})]})]})})]})]})}},2307:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(9008),n=a.n(r),i=a(6761),d=a(3242),c=a(3240),x=a(4082),o=a(5936),m=a(4105),h=a(6208);a(7014);var u=a(9175);s.default=()=>{let{user:e}=(0,i.a)(),[s,a]=(0,l.useState)(!1),[r,j]=(0,l.useState)(null),{loading:g,execute:v}=(0,d.c)(),handleApproval=async(e,s)=>{try{await v(()=>c.pW.approveActivity({activityType:"grade",activityId:e,approve:s})),j({type:"success",text:"Request ".concat(s?"approved":"rejected"," successfully!")}),setTimeout(()=>j(null),5e3)}catch(e){j({type:"error",text:"Error processing approval. Please try again."}),setTimeout(()=>j(null),5e3)}};return e&&"hod"===e.role?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n(),{children:(0,t.jsx)("title",{children:"Approvals - HOD Dashboard"})}),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(x.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(o.Z,{}),(0,t.jsx)("main",{className:"flex-1 overflow-auto",children:(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Approvals"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Review and approve department activities and requests"})]}),(0,t.jsx)("button",{onClick:()=>{a(!0),setTimeout(()=>a(!1),1e3)},disabled:s,className:"px-3 py-1.5 text-sm border border-gray-300 bg-white text-gray-700 rounded hover:bg-gray-50 disabled:opacity-50",children:"Refresh"})]}),r&&(0,t.jsx)(u.Z,{variant:"success"===r.type?"success":"error",dismissible:!0,onDismiss:()=>j(null),children:r.text}),(0,t.jsxs)(m.Z,{className:"overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Pending Approvals"})}),(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(h.Z.Header,{children:(0,t.jsxs)(h.Z.Row,{children:[(0,t.jsx)(h.Z.Head,{children:"Request"}),(0,t.jsx)(h.Z.Head,{children:"Teacher"}),(0,t.jsx)(h.Z.Head,{children:"Details"}),(0,t.jsx)(h.Z.Head,{children:"Status"}),(0,t.jsx)(h.Z.Head,{children:"Actions"})]})}),(0,t.jsx)(h.Z.Body,{children:[{id:1,type:"grade",title:"Grade Entry - CS101",description:"Grade submission for Computer Science 101 - Final Exam",teacher:"Dr. John Smith",student:"Alice Johnson",grade:"A",submitted_at:"2024-01-15T10:30:00Z",status:"pending"},{id:2,type:"grade",title:"Grade Entry - MATH201",description:"Grade submission for Mathematics 201 - Midterm Exam",teacher:"Prof. Jane Doe",student:"Bob Wilson",grade:"B+",submitted_at:"2024-01-14T14:20:00Z",status:"pending"}].map(e=>(0,t.jsxs)(h.Z.Row,{children:[(0,t.jsx)(h.Z.Cell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})}),(0,t.jsx)(h.Z.Cell,{children:(0,t.jsx)("span",{className:"text-sm text-gray-900",children:e.teacher})}),(0,t.jsx)(h.Z.Cell,{children:(0,t.jsxs)("div",{className:"text-sm text-gray-900",children:["Student: ",e.student,(0,t.jsx)("br",{}),"Grade: ",(0,t.jsx)("strong",{children:e.grade})]})}),(0,t.jsx)(h.Z.Cell,{children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending"})}),(0,t.jsx)(h.Z.Cell,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>handleApproval(e.id,!0),disabled:g,className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"Approve"}),(0,t.jsx)("button",{onClick:()=>handleApproval(e.id,!1),disabled:g,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",children:"Reject"})]})})]},e.id))})]})]})]})})]})]})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(u.Z,{variant:"error",children:"Access denied. HOD access required."})})}},8116:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(6208),m=a(7014),h=a(9180),u=a(9175),j=a(4549),g=a(7219);s.default=()=>{var e;let{user:s}=(0,r.a)(),[a,v]=(0,l.useState)("overview"),{data:p,loading:f,error:y}=(0,n.h)(i.pW.getDepartmentOverview);if(!s||"hod"!==s.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(u.Z,{variant:"error",children:"Access denied. HOD access required."})});let N=null==p?void 0:p.department,b=null==p?void 0:p.stats,w=(null==p?void 0:p.teachers)||[],C=(null==p?void 0:p.courses)||[],Z=(null==p?void 0:p.students)||[],S=[{id:"overview",label:"Overview",icon:g.QqI},{id:"teachers",label:"Teachers",icon:g.WY8},{id:"courses",label:"Courses",icon:g.yK7},{id:"students",label:"Students",icon:g.WY8}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Department Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:N?"".concat(N.name," Department"):"Manage your department"})]}),(0,t.jsx)(h.Z,{variant:"primary",icon:g.OvN,children:"Add New Course"})]}),f?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(j.Z,{size:"lg"})}):y?(0,t.jsxs)(u.Z,{variant:"error",children:["Failed to load department data: ",y]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.WY8,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Teachers"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==b?void 0:b.totalTeachers)||0})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.yK7,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Courses"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==b?void 0:b.totalCourses)||0})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.WY8,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Enrolled Students"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==b?void 0:b.totalStudents)||0})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.QqI,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Performance"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==b?void 0:b.averageGPA)?b.averageGPA.toFixed(2):"N/A"})]})]})})]}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8",children:S.map(e=>{let s=e.icon;return(0,t.jsxs)("button",{onClick:()=>v(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(a===e.id?"border-primary-blue text-primary-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)(s,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:e.label})]},e.id)})})}),(0,t.jsxs)("div",{className:"p-6",children:["overview"===a&&(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activities"}),(0,t.jsx)("div",{className:"space-y-3",children:(null==b?void 0:null===(e=b.recentActivities)||void 0===e?void 0:e.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-primary-blue rounded-full flex items-center justify-center",children:(0,t.jsx)(g.vlc,{className:"w-4 h-4 text-white"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.time})]})]},s)))||(0,t.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No recent activities"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Metrics"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Student Satisfaction"}),(0,t.jsx)("span",{className:"font-medium",children:"85%"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"85%"}})}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Course Completion Rate"}),(0,t.jsx)("span",{className:"font-medium",children:"92%"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"92%"}})}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Average Attendance"}),(0,t.jsx)("span",{className:"font-medium",children:"88%"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-yellow-600 h-2 rounded-full",style:{width:"88%"}})})]})]})]})}),"teachers"===a&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Department Teachers"}),(0,t.jsx)(h.Z,{variant:"primary",size:"sm",icon:g.OvN,children:"Add Teacher"})]}),w.length>0?(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Name"}),(0,t.jsx)(o.Z.Head,{children:"Employee ID"}),(0,t.jsx)(o.Z.Head,{children:"Specialization"}),(0,t.jsx)(o.Z.Head,{children:"Classes"}),(0,t.jsx)(o.Z.Head,{children:"Status"}),(0,t.jsx)(o.Z.Head,{children:"Actions"})]})}),(0,t.jsx)(o.Z.Body,{children:w.map((e,s)=>(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-mono text-sm",children:e.employee_id})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-900",children:e.specialization})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.class_count||0})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:"active"===e.status?"success":"danger",children:e.status})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:g.rDJ,children:"View"}),(0,t.jsx)(h.Z,{variant:"primary",size:"sm",icon:g.vPQ,children:"Edit"})]})})]},s))})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.WY8,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No teachers found in this department."})]})]}),"courses"===a&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Department Courses"}),(0,t.jsx)(h.Z,{variant:"primary",size:"sm",icon:g.OvN,children:"Add Course"})]}),C.length>0?(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Course Name"}),(0,t.jsx)(o.Z.Head,{children:"Code"}),(0,t.jsx)(o.Z.Head,{children:"Credits"}),(0,t.jsx)(o.Z.Head,{children:"Instructor"}),(0,t.jsx)(o.Z.Head,{children:"Enrolled"}),(0,t.jsx)(o.Z.Head,{children:"Status"}),(0,t.jsx)(o.Z.Head,{children:"Actions"})]})}),(0,t.jsx)(o.Z.Body,{children:C.map((e,s)=>(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-mono text-sm",children:e.course_code})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-900",children:e.credits})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-900",children:e.instructor_name})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.enrolled_count||0})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:"active"===e.status?"success":"warning",children:e.status})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:g.rDJ,children:"View"}),(0,t.jsx)(h.Z,{variant:"primary",size:"sm",icon:g.vPQ,children:"Edit"})]})})]},s))})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.yK7,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No courses found in this department."})]})]}),"students"===a&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Department Students"}),Z.length>0?(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Student ID"}),(0,t.jsx)(o.Z.Head,{children:"Name"}),(0,t.jsx)(o.Z.Head,{children:"Year"}),(0,t.jsx)(o.Z.Head,{children:"GPA"}),(0,t.jsx)(o.Z.Head,{children:"Courses"}),(0,t.jsx)(o.Z.Head,{children:"Status"}),(0,t.jsx)(o.Z.Head,{children:"Actions"})]})}),(0,t.jsx)(o.Z.Body,{children:Z.map((e,s)=>(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-mono text-sm",children:e.id})}),(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-900",children:e.enrollment_year})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.gpa?e.gpa.toFixed(2):"N/A"})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-900",children:e.course_count||0})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:"active"===e.status?"success":"warning",children:e.status})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:g.rDJ,children:"View Profile"})})]},s))})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.WY8,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No students found in this department."})]})]})]})]})]})]})})]})]})}},2749:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(9008),n=a.n(r),i=a(1664),d=a.n(i),c=a(1163),x=a(6761),o=a(7219);a(9180),a(5822);var m=a(9175);s.default=()=>{let[e,s]=(0,l.useState)({email:"",password:"",userType:"staff"}),[a,r]=(0,l.useState)(!1),[i,h]=(0,l.useState)(!1),{login:u,isAuthenticated:j,error:g,clearError:v}=(0,x.a)(),p=(0,c.useRouter)();(0,l.useEffect)(()=>{j&&p.push("/dashboard")},[j,p]),(0,l.useEffect)(()=>{if(g){let e=setTimeout(()=>{v()},5e3);return()=>clearTimeout(e)}},[g,v]);let handleChange=e=>{let{name:a,value:t}=e.target;s(e=>({...e,[a]:t}))},handleSubmit=async s=>{s.preventDefault(),h(!0);try{let s=await u({email:e.email,password:e.password},"student"===e.userType);s.success&&p.push("/dashboard")}catch(e){}finally{h(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Sign In - SMIS"}),(0,t.jsx)("meta",{name:"description",content:"Sign in to your SMIS account to access the school management system"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,t.jsxs)("div",{className:"min-h-screen flex",children:[(0,t.jsxs)("div",{className:"hidden lg:flex lg:w-1/2 bg-primary-blue relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,t.jsx)("div",{className:"absolute top-20 left-10 w-32 h-32 border-2 border-white rounded-full"}),(0,t.jsx)("div",{className:"absolute top-40 right-20 w-24 h-24 border-2 border-white rounded-full"}),(0,t.jsx)("div",{className:"absolute bottom-32 left-20 w-40 h-40 border-2 border-white rounded-full"}),(0,t.jsx)("div",{className:"absolute bottom-20 right-10 w-28 h-28 border-2 border-white rounded-full"})]}),(0,t.jsxs)("div",{className:"relative z-10 flex flex-col justify-center px-12 text-white",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Hello! \uD83D\uDC4B"}),(0,t.jsx)("p",{className:"text-xl text-blue-100 mb-8 leading-relaxed",children:"Streamline your school operations with our comprehensive management system. Get highly productive through automation and save tons of time!"}),(0,t.jsxs)("div",{className:"space-y-3 mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mr-3"}),(0,t.jsx)("span",{className:"text-blue-100",children:"Student & Staff Management"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mr-3"}),(0,t.jsx)("span",{className:"text-blue-100",children:"Academic Calendar & Timetables"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mr-3"}),(0,t.jsx)("span",{className:"text-blue-100",children:"Real-time Analytics & Reports"})]})]}),(0,t.jsx)("div",{className:"text-blue-200 text-sm",children:"\xa9 2025 School Management Information System. All rights reserved."})]})]}),(0,t.jsx)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsxs)("div",{className:"lg:hidden text-center mb-8",children:[(0,t.jsxs)(d(),{href:"/",className:"inline-flex items-center text-primary-blue hover:text-primary-light mb-4",children:[(0,t.jsx)(o.Ao2,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"SMIS"})]}),(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back!"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-8",children:["Don't have an account?"," ",(0,t.jsx)(d(),{href:"/register",className:"text-primary-light hover:text-primary-blue underline",children:"Create a new account now"}),", it's FREE! Takes less than a minute."]}),(0,t.jsxs)("div",{className:"space-y-6",children:[g&&(0,t.jsxs)(m.Z,{variant:"error",className:"mb-6",children:[(0,t.jsx)(o.bcx,{className:"w-5 h-5 mr-2"}),g]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Login as"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"relative flex items-center justify-center p-3 border rounded-lg cursor-pointer transition-colors ".concat("staff"===e.userType?"border-primary-blue bg-blue-50 text-primary-blue":"border-gray-300 hover:border-gray-400"),children:[(0,t.jsx)("input",{type:"radio",name:"userType",value:"staff",checked:"staff"===e.userType,onChange:handleChange,className:"sr-only"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-medium",children:"Staff"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Teachers & Admin"})]})]}),(0,t.jsxs)("label",{className:"relative flex items-center justify-center p-3 border rounded-lg cursor-pointer transition-colors ".concat("student"===e.userType?"border-primary-blue bg-blue-50 text-primary-blue":"border-gray-300 hover:border-gray-400"),children:[(0,t.jsx)("input",{type:"radio",name:"userType",value:"student",checked:"student"===e.userType,onChange:handleChange,className:"sr-only"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-medium",children:"Student"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Student Portal"})]})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{name:"email",type:"email",required:!0,value:e.email,onChange:handleChange,className:"w-full py-3 border-0 border-b-2 border-gray-300 focus:border-primary-blue focus:outline-none focus:ring-0 bg-transparent text-gray-900 placeholder-gray-500",placeholder:"Enter your email address"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{id:"password",name:"password",type:a?"text":"password",required:!0,value:e.password,onChange:handleChange,className:"w-full py-3 border-0 border-b-2 border-gray-300 focus:border-primary-blue focus:outline-none focus:ring-0 bg-transparent text-gray-900 placeholder-gray-500 pr-10",placeholder:"Enter your password"}),(0,t.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center",onClick:()=>r(!a),children:a?(0,t.jsx)(o.rzC,{className:"h-5 w-5 text-gray-400"}):(0,t.jsx)(o.rDJ,{className:"h-5 w-5 text-gray-400"})})]})]}),(0,t.jsx)("button",{type:"submit",disabled:i,className:"w-full bg-gray-900 text-white py-3 px-4 rounded-md font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Signing In...":"Login Now"})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("a",{href:"/forgot-password",className:"text-sm text-gray-600 hover:text-primary-blue underline",children:"Forget password? Click here"})})]})]})})]})]})}},7291:function(e,s,a){a.r(s),a.d(s,{default:function(){return attendance}});var t={};a.r(t);var l=a(5893),r=a(7294),n=a(6761),i=a(3242),d=a(3240),c=a(4082),x=a(5936),o=a(4105),m=a(6208),h=a(7014),u=a(9175),j=a(4549),g=a(7219),attendance=()=>{let{user:e}=(0,n.a)(),[s,a]=(0,r.useState)({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),{data:v,loading:p,error:f,refetch:y}=(0,i.h)(()=>d.t7.getAttendance(s),[s]);if(!e||"student"!==e.role)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsx)(u.Z,{variant:"error",children:"Access denied. Student access required."})});let handleDateChange=(e,s)=>{a(a=>({...a,[e]:s}))},N=r.useMemo(()=>{if(!v||0===v.length)return{total:0,present:0,absent:0,late:0,percentage:0};let e=v.length,s=v.filter(e=>"present"===e.status).length,a=v.filter(e=>"absent"===e.status).length,t=v.filter(e=>"late"===e.status).length,l=e>0?((s+t)/e*100).toFixed(1):0;return{total:e,present:s,absent:a,late:t,percentage:l}},[v]);return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(c.Z,{}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(x.Z,{}),(0,l.jsx)("main",{className:"flex-1 p-6",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Record"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Track your class attendance and participation"})]}),(0,l.jsx)(o.Z,{children:(0,l.jsxs)("div",{className:"flex flex-wrap items-end gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,l.jsx)("input",{type:"date",value:s.startDate,onChange:e=>handleDateChange("startDate",e.target.value),className:"form-input"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,l.jsx)("input",{type:"date",value:s.endDate,onChange:e=>handleDateChange("endDate",e.target.value),className:"form-input"})]}),(0,l.jsx)("button",{onClick:y,className:"btn btn-primary",children:"Update"})]})}),p?(0,l.jsx)(o.Z,{className:"flex justify-center py-12",children:(0,l.jsx)(j.Z,{size:"lg"})}):f?(0,l.jsxs)(u.Z,{variant:"error",children:["Failed to load attendance: ",f]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,l.jsx)(o.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,l.jsx)(t.FiBarChart3,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Attendance Rate"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[N.percentage,"%"]})]})]})}),(0,l.jsx)(o.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-gray-500 rounded-lg flex items-center justify-center mr-4",children:(0,l.jsx)(g.vlc,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Classes"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.total})]})]})}),(0,l.jsx)(o.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,l.jsx)(g.UgA,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Present"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.present})]})]})}),(0,l.jsx)(o.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,l.jsx)(g.TCC,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Late"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.late})]})]})}),(0,l.jsx)(o.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:(0,l.jsx)(g.q5L,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Absent"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.absent})]})]})})]}),(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(o.Z.Header,{children:(0,l.jsx)(o.Z.Title,{children:"Attendance Records"})}),v&&v.length>0?(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(m.Z.Header,{children:(0,l.jsxs)(m.Z.Row,{children:[(0,l.jsx)(m.Z.Head,{children:"Date"}),(0,l.jsx)(m.Z.Head,{children:"Course"}),(0,l.jsx)(m.Z.Head,{children:"Teacher"}),(0,l.jsx)(m.Z.Head,{children:"Status"}),(0,l.jsx)(m.Z.Head,{children:"Time"}),(0,l.jsx)(m.Z.Head,{children:"Notes"})]})}),(0,l.jsx)(m.Z.Body,{children:v.map((e,s)=>{let a=function(e){switch(e){case"present":return g.UgA;case"late":return g.TCC;case"absent":return g.q5L;default:return g.vlc}}(e.status);return(0,l.jsxs)(m.Z.Row,{children:[(0,l.jsxs)(m.Z.Cell,{children:[(0,l.jsx)("div",{className:"font-medium text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short"})})]}),(0,l.jsxs)(m.Z.Cell,{children:[(0,l.jsx)("div",{className:"font-medium text-gray-900",children:e.course_name}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:e.course_code})]}),(0,l.jsx)(m.Z.Cell,{children:(0,l.jsx)("span",{className:"text-gray-900",children:e.teacher_name})}),(0,l.jsx)(m.Z.Cell,{children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(a,{className:"w-4 h-4"}),(0,l.jsx)(h.Z,{variant:function(e){switch(e){case"present":return"success";case"late":return"warning";case"absent":return"danger";default:return"default"}}(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})}),(0,l.jsx)(m.Z.Cell,{children:(0,l.jsx)("span",{className:"text-sm text-gray-600",children:e.marked_at?new Date(e.marked_at).toLocaleTimeString():"-"})}),(0,l.jsx)(m.Z.Cell,{children:(0,l.jsx)("span",{className:"text-sm text-gray-600",children:e.notes||"-"})})]},s)})})]}):(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(g.vlc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-500",children:"No attendance records found for the selected date range."})]})]})]})]})})]})]})}},8063:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(6208),m=a(7014),h=a(9180),u=a(9175),j=a(4549),g=a(7219);s.default=()=>{let{user:e}=(0,r.a)(),[s,a]=(0,l.useState)("all"),{data:v,loading:p,error:f}=(0,n.h)(i.t7.getFees);if(!e||"student"!==e.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(u.Z,{variant:"error",children:"Access denied. Student access required."})});let y=(null==v?void 0:v.fees)||[],N=(null==v?void 0:v.totalOutstanding)||0,b="all"===s?y:y.filter(e=>e.fee_type===s),w=[...new Set(y.map(e=>e.fee_type))],C=l.useMemo(()=>{let e=y.filter(e=>"paid"===e.status),s=y.filter(e=>"unpaid"===e.status),a=s.filter(e=>new Date(e.due_date)<new Date),t=e.reduce((e,s)=>e+parseFloat(s.amount),0),l=s.reduce((e,s)=>e+parseFloat(s.amount),0),r=a.reduce((e,s)=>e+parseFloat(s.amount),0);return{totalFees:y.length,paidCount:e.length,unpaidCount:s.length,overdueCount:a.length,totalPaid:t,totalUnpaid:l,totalOverdue:r}},[y]),handlePayment=e=>{alert("Payment functionality for fee ".concat(e," would be implemented here"))};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Fee Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:"View and manage your academic fees"})]}),p?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(j.Z,{size:"lg"})}):f?(0,t.jsxs)(u.Z,{variant:"error",children:["Failed to load fees: ",f]}):(0,t.jsxs)(t.Fragment,{children:[N>0&&(0,t.jsx)(u.Z,{variant:"warning",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(g.bcx,{className:"w-5 h-5 mr-2"}),(0,t.jsxs)("span",{children:["You have an outstanding balance of ",(0,t.jsxs)("strong",{children:["$",N.toFixed(2)]})]})]}),(0,t.jsx)(h.Z,{variant:"warning",size:"sm",children:"Pay Now"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.NOg,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Fees"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C.totalFees})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g._rq,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Paid"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",C.totalPaid.toFixed(0)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[C.paidCount," fees"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.oQC,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Outstanding"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",C.totalUnpaid.toFixed(0)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[C.unpaidCount," fees"]})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.bcx,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",C.totalOverdue.toFixed(0)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[C.overdueCount," fees"]})]})]})})]}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(x.Z.Title,{children:"Fee Records"}),(0,t.jsxs)("select",{value:s,onChange:e=>a(e.target.value),className:"form-select w-auto",children:[(0,t.jsx)("option",{value:"all",children:"All Fee Types"}),w.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})}),b.length>0?(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Fee Type"}),(0,t.jsx)(o.Z.Head,{children:"Amount"}),(0,t.jsx)(o.Z.Head,{children:"Due Date"}),(0,t.jsx)(o.Z.Head,{children:"Status"}),(0,t.jsx)(o.Z.Head,{children:"Paid Date"}),(0,t.jsx)(o.Z.Head,{children:"Payment Method"}),(0,t.jsx)(o.Z.Head,{children:"Actions"})]})}),(0,t.jsx)(o.Z.Body,{children:b.map((e,s)=>{var a,l,r,n;return(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.fee_type}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:["$",parseFloat(e.amount).toFixed(2)]})}),(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"text-gray-900",children:new Date(e.due_date).toLocaleDateString()}),new Date(e.due_date)<new Date&&"unpaid"===e.status&&(0,t.jsxs)("div",{className:"text-xs text-red-600",children:[Math.ceil((new Date-new Date(e.due_date))/864e5)," days overdue"]})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:(a=e.status,l=e.due_date,"paid"===a?"success":"unpaid"===a&&new Date(l)<new Date?"danger":"warning"),children:(r=e.status,n=e.due_date,"paid"===r?"Paid":"unpaid"===r&&new Date(n)<new Date?"Overdue":"Pending")})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-600",children:e.paid_date?new Date(e.paid_date).toLocaleDateString():"-"})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-600",children:e.payment_method||"-"})}),(0,t.jsx)(o.Z.Cell,{children:"unpaid"===e.status?(0,t.jsx)(h.Z,{variant:"primary",size:"sm",icon:g.XiQ,onClick:()=>handlePayment(e.id),children:"Pay Now"}):(0,t.jsx)(h.Z,{variant:"outline",size:"sm",icon:g.NOg,children:"Receipt"})})]},s)})})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.oQC,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No fees found for the selected type."})]})]}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Payment Information"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Accepted Payment Methods"}),(0,t.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsx)("li",{children:"• Credit/Debit Cards (Visa, MasterCard, American Express)"}),(0,t.jsx)("li",{children:"• Bank Transfer"}),(0,t.jsx)("li",{children:"• Online Banking"}),(0,t.jsx)("li",{children:"• Cash (at Finance Office)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Important Notes"}),(0,t.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsx)("li",{children:"• Late payment fees may apply for overdue payments"}),(0,t.jsx)("li",{children:"• Keep payment receipts for your records"}),(0,t.jsx)("li",{children:"• Contact the Finance Office for payment plan options"}),(0,t.jsx)("li",{children:"• Payments may take 1-2 business days to reflect in your account"})]})]})]})]})]})]})})]})]})}},5825:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(6208),m=a(7014),h=a(9175),u=a(4549),j=a(7219);s.default=()=>{let{user:e}=(0,r.a)(),[s,a]=(0,l.useState)("all"),{data:g,loading:v,error:p}=(0,n.h)(i.t7.getGrades);if(!e||"student"!==e.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(h.Z,{variant:"error",children:"Access denied. Student access required."})});let f=(null==g?void 0:g.grades)||[],y=(null==g?void 0:g.gpa)||0,N="all"===s?f:f.filter(e=>e.semester===s),b=[...new Set(f.map(e=>e.semester))].sort(),w=b.map(e=>{let s=f.filter(s=>s.semester===e),a=s.reduce((e,s)=>e+(s.credits||3),0),t=s.reduce((e,s)=>{let a={"A+":4,A:4,"A-":3.7,"B+":3.3,B:3,"B-":2.7,"C+":2.3,C:2,"C-":1.7,"D+":1.3,D:1,F:0}[s.grade]||0;return e+a*(s.credits||3)},0),l=a>0?(t/a).toFixed(2):0;return{semester:e,courses:s.length,gpa:l,credits:a}});return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Academic Grades"}),(0,t.jsx)("p",{className:"text-gray-600",children:"View your academic performance and GPA"})]}),v?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(u.Z,{size:"lg"})}):p?(0,t.jsxs)(h.Z,{variant:"error",children:["Failed to load grades: ",p]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.QqI,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Overall GPA"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y.toFixed(2)})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.yK7,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Courses"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.length})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.vlc,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Semesters"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:b.length})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.HR2,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"A Grades"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(e=>["A+","A","A-"].includes(e.grade)).length})]})]})})]}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Semester Performance"})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map((e,s)=>(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:e.semester}),(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"GPA:"}),(0,t.jsx)("span",{className:"font-medium",children:e.gpa})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Courses:"}),(0,t.jsx)("span",{className:"font-medium",children:e.courses})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Credits:"}),(0,t.jsx)("span",{className:"font-medium",children:e.credits})]})]})]},s))})]}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(x.Z.Title,{children:"Course Grades"}),(0,t.jsxs)("select",{value:s,onChange:e=>a(e.target.value),className:"form-select w-auto",children:[(0,t.jsx)("option",{value:"all",children:"All Semesters"}),b.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})}),N.length>0?(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Course"}),(0,t.jsx)(o.Z.Head,{children:"Code"}),(0,t.jsx)(o.Z.Head,{children:"Semester"}),(0,t.jsx)(o.Z.Head,{children:"Year"}),(0,t.jsx)(o.Z.Head,{children:"Grade"}),(0,t.jsx)(o.Z.Head,{children:"Credits"}),(0,t.jsx)(o.Z.Head,{children:"Comments"})]})}),(0,t.jsx)(o.Z.Body,{children:N.map((e,s)=>{var a;return(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.course_name})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-600",children:e.course_code})}),(0,t.jsx)(o.Z.Cell,{children:e.semester}),(0,t.jsx)(o.Z.Cell,{children:e.year}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:["A+","A","A-"].includes(a=e.grade)?"success":["B+","B","B-"].includes(a)?"primary":["C+","C","C-"].includes(a)?"warning":"danger",children:e.grade})}),(0,t.jsx)(o.Z.Cell,{children:e.credits||3}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e.comments||"-"})})]},s)})})]}):(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No grades found for the selected semester."})})]})]})]})})]})]})}},1709:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(9180),m=a(5822),h=a(9175),u=a(4549),j=a(7219);s.default=()=>{var e,s;let{user:a}=(0,r.a)(),[g,v]=(0,l.useState)(!1),[p,f]=(0,l.useState)({}),[y,N]=(0,l.useState)(null),{data:b,loading:w,error:C,refetch:Z}=(0,n.h)(i.t7.getProfile);l.useEffect(()=>{if(b){var e,s,a;f({first_name:(null===(e=b.user)||void 0===e?void 0:e.first_name)||"",last_name:(null===(s=b.user)||void 0===s?void 0:s.last_name)||"",email:(null===(a=b.user)||void 0===a?void 0:a.email)||"",phone:b.phone||"",address:b.address||"",date_of_birth:b.date_of_birth||"",gender:b.gender||""})}},[b]);let handleInputChange=e=>{let{name:s,value:a}=e.target;f(e=>({...e,[s]:a}))},handleSave=async()=>{try{await i.t7.updateProfile(p),N({type:"success",text:"Profile updated successfully!"}),v(!1),Z(),setTimeout(()=>N(null),5e3)}catch(a){var e,s;N({type:"error",text:(null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to update profile"})}};return a&&"student"===a.role?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Profile"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your personal information"})]}),g?(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(o.Z,{variant:"success",icon:j.mW3,onClick:handleSave,children:"Save Changes"}),(0,t.jsx)(o.Z,{variant:"secondary",icon:j.q5L,onClick:()=>{if(v(!1),b){var e,s,a;f({first_name:(null===(e=b.user)||void 0===e?void 0:e.first_name)||"",last_name:(null===(s=b.user)||void 0===s?void 0:s.last_name)||"",email:(null===(a=b.user)||void 0===a?void 0:a.email)||"",phone:b.phone||"",address:b.address||"",date_of_birth:b.date_of_birth||"",gender:b.gender||""})}},children:"Cancel"})]}):(0,t.jsx)(o.Z,{variant:"primary",icon:j.vPQ,onClick:()=>v(!0),children:"Edit Profile"})]}),y&&(0,t.jsx)(h.Z,{variant:y.type,dismissible:!0,onDismiss:()=>N(null),children:y.text}),w?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(u.Z,{size:"lg"})}):C?(0,t.jsxs)(h.Z,{variant:"error",children:["Failed to load profile: ",C]}):(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-primary-blue rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(j.fzv,{className:"w-12 h-12 text-white"})}),(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[null==b?void 0:null===(e=b.user)||void 0===e?void 0:e.first_name," ",null==b?void 0:null===(s=b.user)||void 0===s?void 0:s.last_name]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Student ID: ",null==b?void 0:b.id]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Enrolled: ",null==b?void 0:b.enrollment_year]})]})}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Personal Information"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(m.Z,{label:"First Name",name:"first_name",value:p.first_name,onChange:handleInputChange,disabled:!g,required:!0}),(0,t.jsx)(m.Z,{label:"Last Name",name:"last_name",value:p.last_name,onChange:handleInputChange,disabled:!g,required:!0}),(0,t.jsx)(m.Z,{label:"Email",name:"email",type:"email",value:p.email,onChange:handleInputChange,disabled:!g,required:!0}),(0,t.jsx)(m.Z,{label:"Phone",name:"phone",value:p.phone,onChange:handleInputChange,disabled:!g}),(0,t.jsx)(m.Z,{label:"Date of Birth",name:"date_of_birth",type:"date",value:p.date_of_birth,onChange:handleInputChange,disabled:!g}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,t.jsxs)("select",{name:"gender",value:p.gender,onChange:handleInputChange,disabled:!g,className:"form-select",children:[(0,t.jsx)("option",{value:"",children:"Select Gender"}),(0,t.jsx)("option",{value:"male",children:"Male"}),(0,t.jsx)("option",{value:"female",children:"Female"}),(0,t.jsx)("option",{value:"other",children:"Other"})]})]}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsx)(m.Z,{label:"Address",name:"address",value:p.address,onChange:handleInputChange,disabled:!g})})]})]})})]})]})})]})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(h.Z,{variant:"error",children:"Access denied. Student access required."})})}},8691:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(9008),n=a.n(r),i=a(6761),d=a(3242),c=a(3240),x=a(4082),o=a(5936),m=a(4105),h=a(9180),u=a(7014),j=a(9175),g=a(4549),v=a(9060);s.default=()=>{var e;let{user:s}=(0,i.a)(),[a,r]=(0,l.useState)({semester:"current"}),[p,f]=(0,l.useState)(!1),{data:y,loading:N,error:b,refetch:w}=(0,d.h)(()=>c.t7.getTimetable({semester:"current"===a.semester?void 0:a.semester}));if(!s||"student"!==s.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(j.Z,{variant:"error",children:"Access denied. Student access required."})});let handleRefresh=async()=>{f(!0);try{await w()}finally{f(!1)}},handleExport=()=>{if(!y||0===y.length){alert("No timetable data to export");return}let e=y.map(e=>{var s,a;return{Day:getDayName(e.day_of_week),Time:"".concat(null===(s=e.start_time)||void 0===s?void 0:s.substring(0,5)," - ").concat(null===(a=e.end_time)||void 0===a?void 0:a.substring(0,5)),Course:"".concat(e.course_code," - ").concat(e.course_name),Teacher:e.teacher_name,Room:e.room||"TBA",Semester:e.semester||"N/A"}}),s=[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n"),a=new Blob([s],{type:"text/csv"}),t=window.URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download="my-timetable-".concat(new Date().toISOString().split("T")[0],".csv"),l.click(),window.URL.revokeObjectURL(t)};function getDayName(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]||"Unknown"}let C={totalClasses:(null==y?void 0:y.length)||0,uniqueCourses:new Set(null==y?void 0:y.map(e=>e.course_id)).size||0,hoursPerWeek:(null==y?void 0:y.reduce((e,s)=>{let a=new Date("1970-01-01T".concat(s.start_time)),t=new Date("1970-01-01T".concat(s.end_time));return e+(t-a)/36e5},0))||0,busyDays:new Set(null==y?void 0:y.map(e=>e.day_of_week)).size||0},Z=(null==y?void 0:y.filter(e=>{if(a.day&&e.day_of_week.toString()!==a.day)return!1;if(a.search){var s,t,l,r;let n=a.search.toLowerCase();return(null===(s=e.course_name)||void 0===s?void 0:s.toLowerCase().includes(n))||(null===(t=e.course_code)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(l=e.teacher_name)||void 0===l?void 0:l.toLowerCase().includes(n))||(null===(r=e.room)||void 0===r?void 0:r.toLowerCase().includes(n))}return!0}))||[];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n(),{children:(0,t.jsx)("title",{children:"My Timetable - Student Dashboard"})}),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(x.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(o.Z,{}),(0,t.jsx)("main",{className:"flex-1 overflow-auto",children:(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Timetable"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"View your class schedule and course information"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(h.Z,{variant:"outline",size:"sm",onClick:handleRefresh,loading:p,children:"\uD83D\uDD04 Refresh"}),(0,t.jsx)(h.Z,{variant:"outline",size:"sm",onClick:handleExport,disabled:!y||0===y.length,children:"\uD83D\uDCE5 Export"})]})]}),b&&(0,t.jsxs)(j.Z,{variant:"error",children:["Error loading timetable: ",b]}),(0,t.jsx)(v.QD,{filters:a,onFilterChange:e=>{r(e)},onReset:()=>{r({semester:"current"})},onExport:handleExport,showTeacherFilter:!1,showRoomFilter:!1}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsxs)(m.Z,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:C.totalClasses}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total Classes"})]}),(0,t.jsxs)(m.Z,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:C.uniqueCourses}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Enrolled Courses"})]}),(0,t.jsxs)(m.Z,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:C.hoursPerWeek.toFixed(1)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Hours per Week"})]}),(0,t.jsxs)(m.Z,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:C.busyDays}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Class Days"})]})]}),y&&y.length>0&&(0,t.jsxs)(m.Z,{className:"p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quick Overview"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-blue-800",children:"Today's Classes"}),(0,t.jsxs)("div",{className:"text-blue-600",children:[y.filter(e=>e.day_of_week===new Date().getDay()).length," classes"]})]}),(0,t.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-green-800",children:"Next Class"}),(0,t.jsx)("div",{className:"text-green-600",children:"Check your schedule below"})]}),(0,t.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-purple-800",children:"Most Classes With"}),(0,t.jsx)("div",{className:"text-purple-600",children:(null===(e=Object.entries(y.reduce((e,s)=>(e[s.teacher_name]=(e[s.teacher_name]||0)+1,e),{})).sort((e,s)=>{let[,a]=e,[,t]=s;return t-a})[0])||void 0===e?void 0:e[0])||"N/A"})]})]})]}),N?(0,t.jsx)(m.Z,{className:"p-12",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(g.Z,{size:"lg"})})}):y&&y.length>0?(0,t.jsx)(v.mG,{timetable:Z,editable:!1,showActions:!1,colorScheme:"course",title:"My Class Schedule"}):(0,t.jsx)(m.Z,{className:"p-12 text-center",children:(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC5"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Scheduled"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You don't have any classes scheduled for the selected semester. Contact your academic advisor if this seems incorrect."})]})}),y&&y.length>0&&(0,t.jsxs)(m.Z,{children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Enrolled Courses"})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from(new Set(y.map(e=>e.course_id))).map(e=>{let s=y.find(s=>s.course_id===e),a=y.filter(s=>s.course_id===e);return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:s.course_name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:s.course_code}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Prof. ",s.teacher_name]})]}),(0,t.jsxs)(u.Z,{variant:"primary",size:"sm",children:[a.length," ",1===a.length?"class":"classes"]})]}),(0,t.jsx)("div",{className:"space-y-1 text-sm text-gray-600",children:a.map((e,s)=>{var a,l;return(0,t.jsxs)("div",{children:[getDayName(e.day_of_week)," ",null===(a=e.start_time)||void 0===a?void 0:a.substring(0,5)," - ",null===(l=e.end_time)||void 0===l?void 0:l.substring(0,5),e.room&&" • ".concat(e.room)]},s)})})]},e)})})})]})]})})]})]})]})}},2810:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(6208),m=a(7014),h=a(9175),u=a(4549),j=a(7219);s.default=()=>{var e;let{user:s}=(0,r.a)(),[a,g]=(0,l.useState)("all"),[v,p]=(0,l.useState)("current"),{data:f,loading:y}=(0,n.h)(i.$o.getClasses),{data:N,loading:b,execute:w}=(0,n.h)(()=>i.$o.getAnalytics({classId:a,period:v}),[]);if(l.useEffect(()=>{w()},[a,v,w]),!s||"teacher"!==s.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(h.Z,{variant:"error",children:"Access denied. Teacher access required."})});let getGradeBadgeVariant=e=>["A+","A","A-"].includes(e)?"success":["B+","B","B-"].includes(e)?"primary":["C+","C","C-"].includes(e)?"warning":"danger",getAttendanceColor=e=>e>=90?"text-green-600":e>=80?"text-yellow-600":"text-red-600";return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Teaching Analytics"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Analyze student performance and class statistics"})]}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),(0,t.jsxs)("select",{value:a,onChange:e=>g(e.target.value),className:"form-select",disabled:y,children:[(0,t.jsx)("option",{value:"all",children:"All Classes"}),null==f?void 0:f.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.course_code,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),(0,t.jsxs)("select",{value:v,onChange:e=>p(e.target.value),className:"form-select",children:[(0,t.jsx)("option",{value:"current",children:"Current Semester"}),(0,t.jsx)("option",{value:"last30",children:"Last 30 Days"}),(0,t.jsx)("option",{value:"last90",children:"Last 90 Days"}),(0,t.jsx)("option",{value:"academic_year",children:"Academic Year"})]})]})]})}),b?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(u.Z,{size:"lg"})}):N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.WY8,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.totalStudents||0})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.QqI,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Average GPA"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.averageGPA?N.averageGPA.toFixed(2):"N/A"})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.vlc,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Attendance"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.averageAttendance?"".concat(N.averageAttendance.toFixed(1),"%"):"N/A"})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.HR2,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"A Grades"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(e=N.gradeDistribution)||void 0===e?void 0:e.A)||0})]})]})})]}),N.gradeDistribution&&(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Grade Distribution"})}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:Object.entries(N.gradeDistribution).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:a}),(0,t.jsx)(m.Z,{variant:getGradeBadgeVariant(s),className:"mt-1",children:s})]},s)})})]}),N.classPerformance&&N.classPerformance.length>0&&(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Class Performance Summary"})}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Class"}),(0,t.jsx)(o.Z.Head,{children:"Students"}),(0,t.jsx)(o.Z.Head,{children:"Avg GPA"}),(0,t.jsx)(o.Z.Head,{children:"Avg Attendance"}),(0,t.jsx)(o.Z.Head,{children:"Top Grade"}),(0,t.jsx)(o.Z.Head,{children:"Lowest Grade"})]})}),(0,t.jsx)(o.Z.Body,{children:N.classPerformance.map((e,s)=>(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.className}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.courseCode})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.studentCount})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.averageGPA?e.averageGPA.toFixed(2):"N/A"})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium ".concat(getAttendanceColor(e.averageAttendance)),children:e.averageAttendance?"".concat(e.averageAttendance.toFixed(1),"%"):"N/A"})}),(0,t.jsx)(o.Z.Cell,{children:e.topGrade&&(0,t.jsx)(m.Z,{variant:getGradeBadgeVariant(e.topGrade),children:e.topGrade})}),(0,t.jsx)(o.Z.Cell,{children:e.lowestGrade&&(0,t.jsx)(m.Z,{variant:getGradeBadgeVariant(e.lowestGrade),children:e.lowestGrade})})]},s))})]})]}),N.studentInsights&&N.studentInsights.length>0&&(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Student Performance Insights"})}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Student"}),(0,t.jsx)(o.Z.Head,{children:"Class"}),(0,t.jsx)(o.Z.Head,{children:"Current Grade"}),(0,t.jsx)(o.Z.Head,{children:"Attendance"}),(0,t.jsx)(o.Z.Head,{children:"Trend"}),(0,t.jsx)(o.Z.Head,{children:"Status"})]})}),(0,t.jsx)(o.Z.Body,{children:N.studentInsights.map((e,s)=>{var a;return(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.studentName}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.studentId]})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-900",children:e.className})}),(0,t.jsx)(o.Z.Cell,{children:e.currentGrade&&(0,t.jsx)(m.Z,{variant:getGradeBadgeVariant(e.currentGrade),children:e.currentGrade})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium ".concat(getAttendanceColor(e.attendanceRate)),children:e.attendanceRate?"".concat(e.attendanceRate.toFixed(1),"%"):"N/A"})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("div",{className:"flex items-center",children:["improving"===e.trend?(0,t.jsx)(j.QqI,{className:"w-4 h-4 text-green-600 mr-1"}):"declining"===e.trend?(0,t.jsx)(j.QqI,{className:"w-4 h-4 text-red-600 mr-1 transform rotate-180"}):(0,t.jsx)(j.DKx,{className:"w-4 h-4 text-gray-400 mr-1"}),(0,t.jsx)("span",{className:"text-sm capitalize",children:e.trend||"stable"})]})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:"excellent"===e.status?"success":"good"===e.status?"primary":"needs_attention"===e.status?"warning":"danger",children:(null===(a=e.status)||void 0===a?void 0:a.replace("_"," "))||"unknown"})})]},s)})})]})]}),N.attendanceTrends&&N.attendanceTrends.length>0&&(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Recent Attendance Trends"})}),(0,t.jsx)("div",{className:"space-y-4",children:N.attendanceTrends.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:e.date}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.className})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:[e.presentCount,"/",e.totalStudents]}),(0,t.jsxs)("div",{className:"text-sm ".concat(getAttendanceColor(e.attendanceRate)),children:[e.attendanceRate.toFixed(1),"%"]})]})]},s))})]})]}):(0,t.jsxs)(x.Z,{className:"text-center py-12",children:[(0,t.jsx)(j.DKx,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Analytics Data"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Analytics data will appear here once you have classes with student data."})]})]})})]})]})}},2405:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(1163),n=a(6761),i=a(3242),d=a(3240),c=a(4082),x=a(5936),o=a(4105),m=a(6208),h=a(9180),u=a(9175),j=a(4549),g=a(7219);s.default=()=>{let{user:e}=(0,n.a)(),s=(0,r.useRouter)(),{class:a}=s.query,[v,p]=(0,l.useState)(new Date().toISOString().split("T")[0]),[f,y]=(0,l.useState)({}),[N,b]=(0,l.useState)({}),[w,C]=(0,l.useState)(null),{data:Z,loading:S}=(0,i.h)(d.$o.getClasses),{data:D,loading:_,execute:A}=(0,i.h)(()=>d.$o.getClassStudents(a),[]),{loading:k,execute:T}=(0,i.c)(),F=null==Z?void 0:Z.find(e=>e.id===parseInt(a));if(l.useEffect(()=>{a&&A()},[a,A]),l.useEffect(()=>{if(D){let e={},s={};D.forEach(a=>{e[a.id]="present",s[a.id]=""}),y(e),b(s)}},[D]),!e||"teacher"!==e.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(u.Z,{variant:"error",children:"Access denied. Teacher access required."})});let handleAttendanceChange=(e,s)=>{y(a=>({...a,[e]:s}))},handleNotesChange=(e,s)=>{b(a=>({...a,[e]:s}))},handleSaveAttendance=async()=>{if(a&&D)try{let e=D.map(e=>({studentId:e.id,status:f[e.id]||"present",notes:N[e.id]||""}));await T(()=>d.$o.markAttendance({courseId:parseInt(a),attendance:e,date:v})),C({type:"success",text:"Attendance saved successfully!"}),setTimeout(()=>C(null),5e3)}catch(a){var e,s;C({type:"error",text:(null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to save attendance"})}},getStatusIcon=e=>{switch(e){case"present":default:return g.UgA;case"late":return g.TCC;case"absent":return g.q5L}},R=l.useMemo(()=>{if(!D||!f)return{present:0,late:0,absent:0};let e={present:0,late:0,absent:0};return D.forEach(s=>{let a=f[s.id]||"present";e[a]++}),e},[D,f]);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(c.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(x.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Mark Attendance"}),(0,t.jsx)("p",{className:"text-gray-600",children:F?"".concat(F.name," (").concat(F.course_code,")"):"Select a class"})]}),(0,t.jsx)(h.Z,{variant:"secondary",onClick:()=>s.push("/teacher/classes"),children:"Back to Classes"})]}),w&&(0,t.jsx)(u.Z,{variant:w.type,dismissible:!0,onDismiss:()=>C(null),children:w.text}),(0,t.jsx)(o.Z,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),(0,t.jsxs)("select",{value:a||"",onChange:e=>s.push("/teacher/attendance?class=".concat(e.target.value)),className:"form-select",disabled:S,children:[(0,t.jsx)("option",{value:"",children:"Select a class"}),null==Z?void 0:Z.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.course_code,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,t.jsx)("input",{type:"date",value:v,onChange:e=>p(e.target.value),className:"form-input"})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)(h.Z,{variant:"primary",icon:g.mW3,onClick:handleSaveAttendance,loading:k,disabled:!a||!D||0===D.length,className:"w-full",children:"Save Attendance"})})]})}),_?(0,t.jsx)(o.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(j.Z,{size:"lg"})}):a?D&&D.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(o.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gray-500 rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.WY8,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.length})]})]})}),(0,t.jsx)(o.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.UgA,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Present"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:R.present})]})]})}),(0,t.jsx)(o.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.TCC,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Late"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:R.late})]})]})}),(0,t.jsx)(o.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.q5L,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Absent"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:R.absent})]})]})})]}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Title,{children:["Student Attendance - ",new Date(v).toLocaleDateString()]})}),(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(m.Z.Header,{children:(0,t.jsxs)(m.Z.Row,{children:[(0,t.jsx)(m.Z.Head,{children:"Student ID"}),(0,t.jsx)(m.Z.Head,{children:"Name"}),(0,t.jsx)(m.Z.Head,{children:"Status"}),(0,t.jsx)(m.Z.Head,{children:"Notes"})]})}),(0,t.jsx)(m.Z.Body,{children:D.map((e,s)=>{let a=f[e.id]||"present";return getStatusIcon(a),(0,t.jsxs)(m.Z.Row,{children:[(0,t.jsx)(m.Z.Cell,{children:(0,t.jsx)("span",{className:"font-mono text-sm",children:e.id})}),(0,t.jsxs)(m.Z.Cell,{children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,t.jsx)(m.Z.Cell,{children:(0,t.jsx)("div",{className:"flex space-x-2",children:["present","late","absent"].map(s=>{let l=getStatusIcon(s),r=a===s;return(0,t.jsx)("button",{onClick:()=>handleAttendanceChange(e.id,s),className:"p-2 rounded-lg border-2 transition-colors ".concat(r?"present"===s?"border-green-500 bg-green-50 text-green-600":"late"===s?"border-yellow-500 bg-yellow-50 text-yellow-600":"border-red-500 bg-red-50 text-red-600":"border-gray-200 bg-white text-gray-400 hover:border-gray-300"),title:s.charAt(0).toUpperCase()+s.slice(1),children:(0,t.jsx)(l,{className:"w-4 h-4"})},s)})})}),(0,t.jsx)(m.Z.Cell,{children:(0,t.jsx)("input",{type:"text",value:N[e.id]||"",onChange:s=>handleNotesChange(e.id,s.target.value),placeholder:"Add notes...",className:"form-input text-sm"})})]},s)})})]})]})]}):(0,t.jsxs)(o.Z,{className:"text-center py-12",children:[(0,t.jsx)(g.WY8,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Students Found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"This class doesn't have any students enrolled."})]}):(0,t.jsxs)(o.Z,{className:"text-center py-12",children:[(0,t.jsx)(g.vlc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Class"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Choose a class from the dropdown above to mark attendance."})]})]})})]})]})}},4423:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(6761),n=a(3242),i=a(3240),d=a(4082),c=a(5936),x=a(4105),o=a(6208),m=a(9180),h=a(9175),u=a(4549),j=a(7219);s.default=()=>{let{user:e}=(0,r.a)(),[s,a]=(0,l.useState)(null),[g,v]=(0,l.useState)(!1),{data:p,loading:f,error:y}=(0,n.h)(i.$o.getClasses),{data:N,loading:b,execute:w}=(0,n.h)(()=>i.$o.getClassStudents(null==s?void 0:s.id),[]);if(l.useEffect(()=>{s&&g&&w()},[s,g,w]),!e||"teacher"!==e.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(h.Z,{variant:"error",children:"Access denied. Teacher access required."})});let handleViewStudents=e=>{a(e),v(!0)},handleMarkAttendance=e=>{window.location.href="/teacher/attendance?class=".concat(e.id)},handleEnterGrades=e=>{window.location.href="/teacher/grades?class=".concat(e.id)};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:g?"Students in ".concat(null==s?void 0:s.name):"My Classes"}),(0,t.jsx)("p",{className:"text-gray-600",children:g?"Manage students in this class":"Manage your assigned classes and students"})]}),g&&(0,t.jsx)(m.Z,{variant:"secondary",onClick:()=>{v(!1),a(null)},children:"Back to Classes"})]}),g?(0,t.jsx)(t.Fragment,{children:b?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(u.Z,{size:"lg"})}):N&&N.length>0?(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(x.Z.Title,{children:"Class Roster"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(m.Z,{variant:"primary",icon:j.j4u,onClick:()=>handleMarkAttendance(s),children:"Mark Attendance"}),(0,t.jsx)(m.Z,{variant:"success",icon:j.vPQ,onClick:()=>handleEnterGrades(s),children:"Enter Grades"})]})]})}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Student ID"}),(0,t.jsx)(o.Z.Head,{children:"Name"}),(0,t.jsx)(o.Z.Head,{children:"Email"}),(0,t.jsx)(o.Z.Head,{children:"Enrollment Year"}),(0,t.jsx)(o.Z.Head,{children:"Status"}),(0,t.jsx)(o.Z.Head,{children:"Actions"})]})}),(0,t.jsx)(o.Z.Body,{children:N.map((e,s)=>(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-mono text-sm",children:e.id})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-600",children:e.email})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-900",children:e.enrollment_year})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)(m.Z,{variant:"outline",size:"sm",icon:j.rDJ,children:"View Profile"})})]},s))})]})]}):(0,t.jsxs)(x.Z,{className:"text-center py-12",children:[(0,t.jsx)(j.WY8,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Students Enrolled"}),(0,t.jsx)("p",{className:"text-gray-500",children:"This class doesn't have any students enrolled yet."})]})}):(0,t.jsx)(t.Fragment,{children:f?(0,t.jsx)(x.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(u.Z,{size:"lg"})}):y?(0,t.jsxs)(h.Z,{variant:"error",children:["Failed to load classes: ",y]}):p&&p.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.yK7,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Classes"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p.length})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.WY8,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p.reduce((e,s)=>e+(s.student_count||0),0)})]})]})}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(j.vlc,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Departments"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:new Set(p.map(e=>e.department_name)).size})]})]})})]}),(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(x.Z.Header,{children:(0,t.jsx)(x.Z.Title,{children:"Assigned Classes"})}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsx)(o.Z.Head,{children:"Course"}),(0,t.jsx)(o.Z.Head,{children:"Code"}),(0,t.jsx)(o.Z.Head,{children:"Department"}),(0,t.jsx)(o.Z.Head,{children:"Students"}),(0,t.jsx)(o.Z.Head,{children:"Credits"}),(0,t.jsx)(o.Z.Head,{children:"Actions"})]})}),(0,t.jsx)(o.Z.Body,{children:p.map((e,s)=>(0,t.jsxs)(o.Z.Row,{children:[(0,t.jsxs)(o.Z.Cell,{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-mono text-sm",children:e.course_code})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-900",children:e.department_name})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium",children:e.student_count||0})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsx)("span",{className:"text-gray-900",children:e.credits||3})}),(0,t.jsx)(o.Z.Cell,{children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(m.Z,{variant:"outline",size:"sm",icon:j.rDJ,onClick:()=>handleViewStudents(e),children:"Students"}),(0,t.jsx)(m.Z,{variant:"primary",size:"sm",icon:j.j4u,onClick:()=>handleMarkAttendance(e),children:"Attendance"}),(0,t.jsx)(m.Z,{variant:"success",size:"sm",icon:j.vPQ,onClick:()=>handleEnterGrades(e),children:"Grades"})]})})]},s))})]})]})]}):(0,t.jsxs)(x.Z,{className:"text-center py-12",children:[(0,t.jsx)(j.yK7,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Assigned"}),(0,t.jsx)("p",{className:"text-gray-500",children:"You don't have any classes assigned yet. Contact your department head for class assignments."})]})})]})})]})]})}},5868:function(e,s,a){a.r(s);var t=a(5893),l=a(7294),r=a(1163),n=a(6761),i=a(3242),d=a(3240),c=a(4082),x=a(5936),o=a(4105),m=a(6208),h=a(9180);a(5822);var u=a(9175),j=a(4549),g=a(7219);s.default=()=>{let{user:e}=(0,n.a)(),s=(0,r.useRouter)(),{class:a}=s.query,[v,p]=(0,l.useState)("current"),[f,y]=(0,l.useState)({}),[N,b]=(0,l.useState)({}),[w,C]=(0,l.useState)(null),{data:Z,loading:S}=(0,i.h)(d.$o.getClasses),{data:D,loading:_,execute:A}=(0,i.h)(()=>d.$o.getClassStudents(a),[]),{data:k,loading:T,execute:F}=(0,i.h)(()=>d.$o.getClassGrades(a,v),[]),{loading:R,execute:P}=(0,i.c)(),I=null==Z?void 0:Z.find(e=>e.id===parseInt(a));if(l.useEffect(()=>{a&&(A(),F())},[a,v,A,F]),l.useEffect(()=>{if(D&&k){let e={},s={};D.forEach(a=>{let t=k.find(e=>e.student_id===a.id);e[a.id]=(null==t?void 0:t.grade)||"",s[a.id]=(null==t?void 0:t.comments)||""}),y(e),b(s)}},[D,k]),!e||"teacher"!==e.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(u.Z,{variant:"error",children:"Access denied. Teacher access required."})});let handleGradeChange=(e,s)=>{y(a=>({...a,[e]:s}))},handleCommentChange=(e,s)=>{b(a=>({...a,[e]:s}))},handleSaveGrades=async()=>{if(a&&D)try{let e=D.map(e=>({studentId:e.id,grade:f[e.id]||"",comments:N[e.id]||"",semester:"current"===v?"Fall 2024":v})).filter(e=>e.grade);await P(()=>d.$o.submitGrades({courseId:parseInt(a),grades:e})),C({type:"success",text:"Grades saved successfully!"}),setTimeout(()=>C(null),5e3)}catch(a){var e,s;C({type:"error",text:(null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to save grades"})}},validateGrade=e=>["A+","A","A-","B+","B","B-","C+","C","C-","D+","D","F"].includes(e.toUpperCase()),getGradePoints=e=>({"A+":4,A:4,"A-":3.7,"B+":3.3,B:3,"B-":2.7,"C+":2.3,C:2,"C-":1.7,"D+":1.3,D:1,F:0})[e.toUpperCase()]||0,H=l.useMemo(()=>{if(!D||!f)return{total:0,graded:0,avgGPA:0};let e=D.filter(e=>f[e.id]),s=e.reduce((e,s)=>e+getGradePoints(f[s.id]),0);return{total:D.length,graded:e.length,avgGPA:e.length>0?(s/e.length).toFixed(2):0}},[D,f]);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(c.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(x.Z,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Grade Entry"}),(0,t.jsx)("p",{className:"text-gray-600",children:I?"".concat(I.name," (").concat(I.course_code,")"):"Select a class"})]}),(0,t.jsx)(h.Z,{variant:"secondary",onClick:()=>s.push("/teacher/classes"),children:"Back to Classes"})]}),w&&(0,t.jsx)(u.Z,{variant:w.type,dismissible:!0,onDismiss:()=>C(null),children:w.text}),(0,t.jsx)(o.Z,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),(0,t.jsxs)("select",{value:a||"",onChange:e=>s.push("/teacher/grades?class=".concat(e.target.value)),className:"form-select",disabled:S,children:[(0,t.jsx)("option",{value:"",children:"Select a class"}),null==Z?void 0:Z.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.course_code,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Semester"}),(0,t.jsxs)("select",{value:v,onChange:e=>p(e.target.value),className:"form-select",children:[(0,t.jsx)("option",{value:"current",children:"Current Semester"}),(0,t.jsx)("option",{value:"Fall 2024",children:"Fall 2024"}),(0,t.jsx)("option",{value:"Spring 2024",children:"Spring 2024"}),(0,t.jsx)("option",{value:"Summer 2024",children:"Summer 2024"})]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)(h.Z,{variant:"primary",icon:g.mW3,onClick:handleSaveGrades,loading:R,disabled:!a||!D||0===D.length,className:"w-full",children:"Save Grades"})})]})}),_||T?(0,t.jsx)(o.Z,{className:"flex justify-center py-12",children:(0,t.jsx)(j.Z,{size:"lg"})}):a?D&&D.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(o.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.WY8,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:H.total})]})]})}),(0,t.jsx)(o.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.vPQ,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Graded"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:H.graded}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[H.total>0?Math.round(H.graded/H.total*100):0,"% complete"]})]})]})}),(0,t.jsx)(o.Z,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:(0,t.jsx)(g.DKx,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Class Average"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:H.avgGPA}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"GPA"})]})]})})]}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(o.Z.Header,{children:(0,t.jsxs)(o.Z.Title,{children:["Student Grades - ",v]})}),(0,t.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Grade Scale"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"A+/A:"})," 4.0"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"A-:"})," 3.7"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"B+:"})," 3.3"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"B:"})," 3.0"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"B-:"})," 2.7"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"C+:"})," 2.3"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"C:"})," 2.0"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"C-:"})," 1.7"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"D+:"})," 1.3"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"D:"})," 1.0"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"F:"})," 0.0"]})]})]}),(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(m.Z.Header,{children:(0,t.jsxs)(m.Z.Row,{children:[(0,t.jsx)(m.Z.Head,{children:"Student ID"}),(0,t.jsx)(m.Z.Head,{children:"Name"}),(0,t.jsx)(m.Z.Head,{children:"Grade"}),(0,t.jsx)(m.Z.Head,{children:"GPA Points"}),(0,t.jsx)(m.Z.Head,{children:"Comments"})]})}),(0,t.jsx)(m.Z.Body,{children:D.map((e,s)=>{let a=f[e.id]||"",l=!a||validateGrade(a),r=a?getGradePoints(a):0;return(0,t.jsxs)(m.Z.Row,{children:[(0,t.jsx)(m.Z.Cell,{children:(0,t.jsx)("span",{className:"font-mono text-sm",children:e.id})}),(0,t.jsxs)(m.Z.Cell,{children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,t.jsx)(m.Z.Cell,{children:(0,t.jsxs)("div",{className:"w-24",children:[(0,t.jsx)("input",{type:"text",value:a,onChange:s=>handleGradeChange(e.id,s.target.value.toUpperCase()),placeholder:"A, B+, C...",className:"form-input text-center font-medium ".concat(l?"":"border-red-300 bg-red-50")}),!l&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Invalid grade"})]})}),(0,t.jsx)(m.Z.Cell,{children:(0,t.jsx)("span",{className:"font-medium text-gray-900",children:a?r.toFixed(1):"-"})}),(0,t.jsx)(m.Z.Cell,{children:(0,t.jsx)("input",{type:"text",value:N[e.id]||"",onChange:s=>handleCommentChange(e.id,s.target.value),placeholder:"Optional comments...",className:"form-input text-sm"})})]},s)})})]})]})]}):(0,t.jsxs)(o.Z,{className:"text-center py-12",children:[(0,t.jsx)(g.WY8,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Students Found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"This class doesn't have any students enrolled."})]}):(0,t.jsxs)(o.Z,{className:"text-center py-12",children:[(0,t.jsx)(g.DKx,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Class"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Choose a class from the dropdown above to enter grades."})]})]})})]})]})}}}]);
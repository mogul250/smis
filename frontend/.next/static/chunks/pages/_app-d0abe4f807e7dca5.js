(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{1118:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(5107)}])},9180:function(e,t,r){"use strict";var n=r(5893);r(7294);var a=r(1664),s=r.n(a),i=r(4549);t.Z=e=>{let{children:t,variant:r="primary",size:a="md",loading:o=!1,disabled:l=!1,className:c="",icon:d,iconPosition:u="left",href:g,...p}=e,h="".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-orange-500 text-white hover:bg-orange-600 focus:ring-orange-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[r]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[a]," ").concat(c),m=(0,n.jsxs)(n.Fragment,{children:[o&&(0,n.jsx)(i.Z,{size:"sm",color:"outline"===r||"ghost"===r?"gray":"white",className:"mr-2"}),d&&"left"===u&&!o&&(0,n.jsx)(d,{className:"w-4 h-4 mr-2"}),t,d&&"right"===u&&!o&&(0,n.jsx)(d,{className:"w-4 h-4 ml-2"})]});return g?(0,n.jsx)(s(),{href:g,className:h,children:m}):(0,n.jsx)("button",{className:h,disabled:l||o,...p,children:m})}},4105:function(e,t,r){"use strict";var n=r(5893);r(7294);let Card=e=>{let{children:t,className:r="",padding:a="default",shadow:s="default",hover:i=!1,...o}=e;return(0,n.jsx)("div",{className:"".concat("bg-white rounded-lg border border-gray-200"," ").concat({none:"",sm:"p-4",default:"p-6",lg:"p-8"}[a]," ").concat({none:"",sm:"shadow-sm",default:"shadow-sm",md:"shadow-md",lg:"shadow-lg"}[s]," ").concat(i?"hover:shadow-md transition-shadow duration-200":""," ").concat(r),...o,children:t})};Card.Header=e=>{let{children:t,className:r="",...a}=e;return(0,n.jsx)("div",{className:"border-b border-gray-200 pb-4 mb-4 ".concat(r),...a,children:t})},Card.Title=e=>{let{children:t,className:r="",...a}=e;return(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 ".concat(r),...a,children:t})},Card.Content=e=>{let{children:t,className:r="",...a}=e;return(0,n.jsx)("div",{className:r,...a,children:t})},Card.Footer=e=>{let{children:t,className:r="",...a}=e;return(0,n.jsx)("div",{className:"border-t border-gray-200 pt-4 mt-4 ".concat(r),...a,children:t})},t.Z=Card},4549:function(e,t,r){"use strict";var n=r(5893);r(7294),t.Z=e=>{let{size:t="md",color:r="primary",className:a=""}=e;return(0,n.jsx)("div",{className:"animate-spin rounded-full border-2 border-t-transparent ".concat({sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"}[t]," ").concat({primary:"border-blue-600",white:"border-white",gray:"border-gray-400"}[r]," ").concat(a),role:"status","aria-label":"Loading",children:(0,n.jsx)("span",{className:"sr-only",children:"Loading..."})})}},8786:function(e,t,r){"use strict";r.d(t,{Ho:function(){return AuthProvider}});var n=r(5893),a=r(7294),s=r(3240);let i={user:null,isAuthenticated:!1,isLoading:!0,error:null},o={LOGIN_START:"LOGIN_START",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILURE:"LOGIN_FAILURE",LOGOUT:"LOGOUT",LOAD_USER:"LOAD_USER",CLEAR_ERROR:"CLEAR_ERROR"},authReducer=(e,t)=>{switch(t.type){case o.LOGIN_START:return{...e,isLoading:!0,error:null};case o.LOGIN_SUCCESS:return{...e,user:t.payload.user,isAuthenticated:!0,isLoading:!1,error:null};case o.LOGIN_FAILURE:return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:t.payload.error};case o.LOGOUT:return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:null};case o.LOAD_USER:return{...e,user:t.payload.user,isAuthenticated:!!t.payload.user,isLoading:!1};case o.CLEAR_ERROR:return{...e,error:null};default:return e}},l=(0,a.createContext)(),AuthProvider=e=>{let{children:t}=e,[r,c]=(0,a.useReducer)(authReducer,i);(0,a.useEffect)(()=>{loadUser()},[]);let loadUser=async()=>{try{let e=localStorage.getItem("authToken");if(e){let e=await s.kv.getProfile();c({type:o.LOAD_USER,payload:{user:e.data.user}})}else c({type:o.LOAD_USER,payload:{user:null}})}catch(e){localStorage.removeItem("authToken"),c({type:o.LOAD_USER,payload:{user:null}})}},login=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c({type:o.LOGIN_START});try{let r=t?await s.kv.studentLogin(e):await s.kv.login(e),{user:n,token:a}=r.data;return localStorage.setItem("authToken",a),c({type:o.LOGIN_SUCCESS,payload:{user:n}}),{success:!0,user:n}}catch(t){var r,n;let e=(null===(n=t.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)||"Login failed";return c({type:o.LOGIN_FAILURE,payload:{error:e}}),{success:!1,error:e}}},logout=async()=>{try{await s.kv.logout()}catch(e){}finally{localStorage.removeItem("authToken"),c({type:o.LOGOUT})}},register=async e=>{c({type:o.LOGIN_START});try{return await s.kv.register(e),{success:!0}}catch(n){var t,r;let e=(null===(r=n.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Registration failed";return c({type:o.LOGIN_FAILURE,payload:{error:e}}),{success:!1,error:e}}},d={...r,login,logout,register,clearError:()=>{c({type:o.CLEAR_ERROR})},loadUser};return(0,n.jsx)(l.Provider,{value:d,children:t})};t.ZP=l},5107:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _app}});var n=r(5893);r(2352);var a=r(8786),s=r(7294),i=r(7219),o=r(9180),l=r(4105);let ErrorBoundary=class ErrorBoundary extends s.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t,eventId:this.generateEventId()}),window.Sentry&&window.Sentry.captureException(e,{contexts:{react:{componentStack:t.componentStack}}}),this.reportError(e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback(this.state.error,this.handleRetry):(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,n.jsx)(l.Z,{className:"max-w-lg w-full",children:(0,n.jsxs)(l.Z.Content,{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)(i.BJv,{className:"w-8 h-8 text-red-600"})}),(0,n.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Our team has been notified."}),!1,this.state.eventId&&(0,n.jsxs)("p",{className:"text-xs text-gray-500 mb-6",children:["Error ID: ",this.state.eventId]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,n.jsx)(o.Z,{variant:"primary",icon:i.Bw1,onClick:this.handleRetry,children:"Try Again"}),(0,n.jsx)(o.Z,{variant:"outline",icon:i.m6D,onClick:this.handleGoHome,children:"Go to Dashboard"})]})]})})}):this.props.children}constructor(e){super(e),this.generateEventId=()=>"error_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),this.reportError=async(e,t)=>{try{await fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.message,stack:e.stack,componentStack:t.componentStack,userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date().toISOString(),eventId:this.state.eventId})})}catch(e){}},this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,eventId:null})},this.handleGoHome=()=>{window.location.href="/dashboard"},this.state={hasError:!1,error:null,errorInfo:null,eventId:null}}};let useMemoryMonitor=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;(0,s.useEffect)(()=>{if(!("memory"in performance))return;let checkMemory=()=>{let e=performance.memory,t=Math.round(e.usedJSHeapSize/1048576),r=Math.round(e.totalJSHeapSize/1048576);e.jsHeapSizeLimit;let n=e.usedJSHeapSize/e.jsHeapSizeLimit*100;window.gtag&&window.gtag("event","memory_usage",{used_mb:t,total_mb:r,usage_percentage:n,event_category:"performance"})},t=setInterval(checkMemory,e);return checkMemory(),()=>clearInterval(t)},[e])},useWebVitalsMonitor=()=>{(0,s.useEffect)(()=>{let reportWebVitals=e=>{window.gtag&&window.gtag("event",e.name,{value:Math.round("CLS"===e.name?1e3*e.value:e.value),event_category:"web_vitals",event_label:e.id,non_interaction:!0})};r.e(216).then(r.bind(r,8085)).then(e=>{let{getCLS:t,getFID:r,getFCP:n,getLCP:a,getTTFB:s}=e;t(reportWebVitals),r(reportWebVitals),n(reportWebVitals),a(reportWebVitals),s(reportWebVitals)}).catch(()=>{})},[])};let LiveAnnouncer=class LiveAnnouncer{init(){"undefined"!=typeof document&&(this.liveRegion=document.createElement("div"),this.liveRegion.setAttribute("aria-live","polite"),this.liveRegion.setAttribute("aria-atomic","true"),this.liveRegion.style.position="absolute",this.liveRegion.style.left="-10000px",this.liveRegion.style.width="1px",this.liveRegion.style.height="1px",this.liveRegion.style.overflow="hidden",document.body.appendChild(this.liveRegion))}announce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite";this.liveRegion&&(this.liveRegion.setAttribute("aria-live",t),this.liveRegion.textContent=e,setTimeout(()=>{this.liveRegion&&(this.liveRegion.textContent="")},1e3))}destroy(){this.liveRegion&&this.liveRegion.parentNode&&(this.liveRegion.parentNode.removeChild(this.liveRegion),this.liveRegion=null)}constructor(){this.liveRegion=null,this.init()}};let initializeA11y=()=>{window.liveAnnouncer||(window.liveAnnouncer=new LiveAnnouncer);let e=document.createElement("a");e.href="#main-content",e.textContent="Skip to main content",e.className="skip-link",e.style.cssText="\n    position: absolute;\n    top: -40px;\n    left: 6px;\n    background: #000;\n    color: #fff;\n    padding: 8px;\n    text-decoration: none;\n    z-index: 1000;\n    transition: top 0.3s;\n  ",e.addEventListener("focus",()=>{e.style.top="6px"}),e.addEventListener("blur",()=>{e.style.top="-40px"}),document.body.insertBefore(e,document.body.firstChild)},registerServiceWorker=()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})})},preloadCriticalResources=()=>{[{href:"/fonts/inter.woff2",as:"font",type:"font/woff2",crossOrigin:"anonymous"},{href:"/api/auth/me",as:"fetch",crossOrigin:"same-origin"}].forEach(e=>{let t=document.createElement("link");t.rel="preload",Object.assign(t,e),document.head.appendChild(t)})},optimizeCriticalRenderingPath=()=>{let e=document.createElement("style");e.textContent="\n    .loading-spinner { animation: spin 1s linear infinite; }\n    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n    .btn-primary { background-color: #1B365D; color: white; }\n  ",document.head.appendChild(e),["https://fonts.googleapis.com","https://api.example.com"].forEach(e=>{let t=document.createElement("link");t.rel="preconnect",t.href=e,document.head.appendChild(t)})};var _app=function(e){let{Component:t,pageProps:i}=e;return useWebVitalsMonitor(),useMemoryMonitor(),(0,s.useEffect)(()=>{initializeA11y(),registerServiceWorker(),preloadCriticalResources(),optimizeCriticalRenderingPath(),r.e(216).then(r.bind(r,8085)).then(e=>{let{getCLS:t,getFID:r,getFCP:n,getLCP:a,getTTFB:s}=e;function sendToAnalytics(e){"undefined"!=typeof gtag&&gtag("event",e.name,{value:Math.round("CLS"===e.name?1e3*e.value:e.value),event_category:"web_vitals",event_label:e.id,non_interaction:!0})}t(sendToAnalytics),r(sendToAnalytics),n(sendToAnalytics),a(sendToAnalytics),s(sendToAnalytics)}).catch(()=>{})},[]),(0,n.jsx)(ErrorBoundary,{children:(0,n.jsx)(a.Ho,{children:(0,n.jsx)(t,{...i})})})}},3240:function(e,t,r){"use strict";r.d(t,{$o:function(){return o},Sb:function(){return d},WP:function(){return u},kv:function(){return s},pW:function(){return l},sz:function(){return c},t7:function(){return i}});var n=r(7066);let a=n.Z.create({baseURL:"http://localhost:5000/api",withCredentials:!1,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("authToken"),window.location.href="/login"),Promise.reject(e)});let s={login:e=>a.post("/auth/login",e),studentLogin:e=>a.post("/auth/student/login",e),logout:()=>a.post("/auth/logout"),getProfile:()=>a.get("/auth/profile"),register:e=>a.post("/auth/register",e),forgotPassword:e=>a.post("/auth/forgot-password",{email:e}),resetPassword:e=>a.post("/auth/reset-password",e)},i={getProfile:()=>a.get("/students/profile"),updateProfile:e=>a.put("/students/profile",e),getGrades:()=>a.get("/students/grades"),getAttendance:e=>a.get("/students/attendance",{params:e}),getFees:()=>a.get("/students/fees"),getTimetable:e=>a.get("/students/timetable",{params:e})},o={getProfile:()=>a.get("/teachers/profile"),updateProfile:e=>a.put("/teachers/profile",e),getClasses:()=>a.get("/teachers/classes"),markAttendance:e=>a.post("/teachers/attendance",e),enterGrades:e=>a.post("/teachers/grades",e),getTimetable:e=>a.get("/teachers/timetable",{params:e}),getClassStudents:e=>a.get("/teachers/classes/".concat(e,"/students")),getAllStudents:()=>a.get("/teachers/classes/students")},l={getProfile:()=>a.get("/hod/profile"),getDepartmentTeachers:()=>a.get("/hod/teachers"),approveActivity:e=>a.post("/hod/activities/approve",e),generateReports:(e,t)=>a.post("/hod/reports/".concat(e),t),manageCourses:e=>a.post("/hod/courses/manage",e),approveTimetable:e=>a.post("/hod/timetable/approve",e),getDepartmentStats:e=>a.get("/hod/stats",{params:e}),getDepartmentTimetable:e=>a.get("/hod/timetable",{params:e}),sendToDepartmentTeachers:e=>a.post("/hod/notifications/department",e)},c={getProfile:()=>a.get("/finance/profile"),getStudentFees:e=>a.get("/finance/students/".concat(e,"/fees")),createFee:e=>a.post("/finance/fees",e),markFeePaid:(e,t)=>a.put("/finance/fees/".concat(e,"/pay"),t),generateInvoice:e=>a.get("/finance/students/".concat(e,"/invoice")),getFinancialReports:e=>a.get("/finance/reports",{params:e}),getPaymentHistory:(e,t)=>a.get("/finance/students/".concat(e,"/payments"),{params:t}),getOverdueFees:()=>a.get("/finance/overdue"),getAllFees:e=>a.get("/finance/overdue",{params:e}),getPayments:e=>Promise.resolve({data:{payments:[],stats:{}}}),getFinancialReport:e=>a.get("/finance/reports",{params:e}),sendPaymentReminder:e=>Promise.resolve({data:{message:"Reminder sent"}}),refundPayment:e=>Promise.resolve({data:{message:"Refund initiated"}}),verifyPayment:e=>Promise.resolve({data:{message:"Payment verified"}}),getAllStudents:e=>a.get("/admin/users",{params:{...e,role:"student"}}),getStudentDetails:e=>a.get("/admin/users/".concat(e))},d={createUser:e=>a.post("/admin/users",e),getAllUsers:e=>a.get("/admin/users",{params:e}),getUserById:e=>a.get("/admin/users/".concat(e)),updateUser:(e,t)=>a.put("/admin/users/".concat(e),t),deleteUser:e=>a.delete("/admin/users/".concat(e)),updateUserStatus:(e,t)=>a.put("/admin/users/".concat(e,"/status"),{status:t}),manageAcademicCalendar:e=>a.post("/admin/calendar",e),getAcademicCalendar:()=>a.get("/admin/calendar"),updateAcademicEvent:(e,t)=>a.put("/admin/calendar/".concat(e),t),deleteAcademicEvent:e=>a.delete("/admin/calendar/".concat(e)),setupTimetable:e=>a.post("/admin/timetable",e),getSystemStats:()=>a.get("/admin/stats"),getSystemConfig:()=>a.get("/admin/config"),updateSystemConfig:e=>a.put("/admin/config",e),testEmailConfig:()=>a.post("/admin/config/test-email"),backupDatabase:()=>a.post("/admin/backup")},u={getRecentActivities:e=>a.get("/activities/recent",{params:e}),getUserActivities:(e,t)=>a.get("/activities/user/".concat(e),{params:t}),getActivitiesByEntityType:(e,t)=>a.get("/activities/entity/".concat(e),{params:t}),getActivityStats:e=>a.get("/activities/stats",{params:e}),createActivity:e=>a.post("/activities",e),getSystemAlerts:e=>a.get("/activities/alerts",{params:e})}},2352:function(){}},function(e){var __webpack_exec__=function(t){return e(e.s=t)};e.O(0,[216,179],function(){return __webpack_exec__(1118),__webpack_exec__(9974)}),_N_E=e.O()}]);
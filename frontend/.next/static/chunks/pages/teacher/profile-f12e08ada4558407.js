(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6013],{6275:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teacher/profile",function(){return a(2599)}])},2599:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return profile}});var l={};a.r(l);var t=a(5893),r=a(7294),i=a(6761),n=a(3242),c=a(591),d=a(4082),o=a(2983),m=a(4105),x=a(9180),h=a(5822),u=a(9175),j=a(4549),f=a(7014),v=a(6208);a(1095);var g=a(7219),profile=()=>{let{user:e}=(0,i.a)(),[s,a]=(0,r.useState)("overview"),[N,p]=(0,r.useState)(!1),[b,y]=(0,r.useState)({}),[_,Z]=(0,r.useState)(null),[w,C]=(0,r.useState)("current"),{data:k,loading:S,error:T,refetch:A}=(0,n.h)(c.$o.getProfile),{data:E,loading:P,error:z}=(0,n.h)(c.$o.getClasses),{data:D,loading:H,execute:L}=(0,n.h)(()=>c.$o.getTimetable(w),[]),{data:F,loading:I,execute:M}=(0,n.h)(()=>c.$o.getAllStudents(),[]),{loading:$,execute:K}=(0,n.c)();(0,r.useEffect)(()=>{k&&y({first_name:k.first_name||"",last_name:k.last_name||"",email:k.email||"",department_id:k.department_id||""})},[k]),(0,r.useEffect)(()=>{L()},[w,L]),(0,r.useEffect)(()=>{"students"===s&&M()},[s,M]);let handleUpdateProfile=async()=>{try{await K(()=>c.$o.updateProfile(b)),await A(),p(!1)}catch(e){}},W=(()=>{var e;let s=(null==E?void 0:E.length)||0,a=(null==F?void 0:F.length)||0,l=(null==D?void 0:null===(e=D.filter(e=>{var s;let a=new Date().toLocaleDateString("en-US",{weekday:"long"});return(null===(s=e.day_of_week)||void 0===s?void 0:s.toLowerCase())===a.toLowerCase()}))||void 0===e?void 0:e.length)||0,t=[...new Set((null==E?void 0:E.map(e=>e.name))||[])].length;return{totalClasses:s,totalStudents:a,todaySchedule:l,subjects:t}})();if(!e||"teacher"!==e.role)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(u.Z,{variant:"error",children:"Access denied. Teacher access required."})});let O=[{id:"overview",label:"Overview",icon:g.fzv},{id:"classes",label:"My Classes",icon:g.yK7},{id:"schedule",label:"Schedule",icon:g.vlc},{id:"students",label:"Students",icon:g.WY8}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.default,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(o.default,{}),(0,t.jsxs)("main",{className:"flex-1 p-6",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Teacher Profile"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your profile and view your teaching information"})]}),(0,t.jsx)(x.Z,{variant:"primary",icon:N?g.q5L:g.vPQ,onClick:()=>p(!N),children:N?"Cancel":"Edit Profile"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsx)(m.Z,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(g.yK7,{className:"w-8 h-8 mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-blue-100",children:"Total Classes"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:W.totalClasses})]})]})}),(0,t.jsx)(m.Z,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(g.WY8,{className:"w-8 h-8 mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-green-100",children:"Total Students"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:W.totalStudents})]})]})}),(0,t.jsx)(m.Z,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(g.TCC,{className:"w-8 h-8 mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-purple-100",children:"Today's Classes"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:W.todaySchedule})]})]})}),(0,t.jsx)(m.Z,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(g.hbr,{className:"w-8 h-8 mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-orange-100",children:"Subjects"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:W.subjects})]})]})})]}),(0,t.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8",children:O.map(e=>{let l=e.icon;return(0,t.jsxs)("button",{onClick:()=>a(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center ".concat(s===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)(l,{className:"w-4 h-4 mr-2"}),e.label]},e.id)})})}),"overview"===s&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(m.Z.Header,{children:(0,t.jsx)(m.Z.Title,{children:"Profile Information"})}),(0,t.jsx)(m.Z.Content,{children:S?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{size:"lg"})}):T?(0,t.jsx)(u.Z,{variant:"error",children:T}):(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(h.Z,{label:"First Name",value:b.first_name,onChange:e=>y({...b,first_name:e.target.value}),disabled:!N,icon:g.fzv}),(0,t.jsx)(h.Z,{label:"Last Name",value:b.last_name,onChange:e=>y({...b,last_name:e.target.value}),disabled:!N,icon:g.fzv}),(0,t.jsx)(h.Z,{label:"Email",type:"email",value:b.email,onChange:e=>y({...b,email:e.target.value}),disabled:!N,icon:g.fzv}),(0,t.jsx)(h.Z,{label:"Department ID",type:"number",value:b.department_id,onChange:e=>y({...b,department_id:parseInt(e.target.value)}),disabled:!N,icon:l.FiGraduationCap})]})}),N&&(0,t.jsx)(m.Z.Footer,{children:(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)(x.Z,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,t.jsx)(x.Z,{variant:"primary",icon:g.mW3,loading:$,onClick:handleUpdateProfile,children:"Save Changes"})]})})]}),(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(m.Z.Header,{children:(0,t.jsx)(m.Z.Title,{children:"Quick Actions"})}),(0,t.jsx)(m.Z.Content,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(x.Z,{variant:"outline",icon:g.j4u,href:"/teacher/attendance",className:"h-20 flex-col",children:(0,t.jsx)("span",{className:"mt-2",children:"Mark Attendance"})}),(0,t.jsx)(x.Z,{variant:"outline",icon:g.HR2,href:"/teacher/grades",className:"h-20 flex-col",children:(0,t.jsx)("span",{className:"mt-2",children:"Enter Grades"})}),(0,t.jsx)(x.Z,{variant:"outline",icon:g.DKx,href:"/teacher/analytics",className:"h-20 flex-col",children:(0,t.jsx)("span",{className:"mt-2",children:"View Analytics"})})]})})]})]}),"classes"===s&&(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(m.Z.Header,{children:(0,t.jsx)(m.Z.Title,{children:"My Classes"})}),(0,t.jsx)(m.Z.Content,{children:P?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{size:"lg"})}):z?(0,t.jsx)(u.Z,{variant:"error",children:z}):E&&E.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(e=>(0,t.jsx)(m.Z,{hover:!0,className:"border-l-4 border-l-blue-500",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:e.department_name}),(0,t.jsxs)(f.Z,{variant:"primary",className:"mt-2",children:["Course ID: ",e.id]})]}),(0,t.jsx)(x.Z,{variant:"ghost",size:"sm",icon:g.rDJ,onClick:()=>Z(e),children:"View"})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.yK7,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No classes assigned yet"})]})})]}),"schedule"===s&&(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(m.Z.Header,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(m.Z.Title,{children:"Teaching Schedule"}),(0,t.jsxs)("select",{value:w,onChange:e=>C(e.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:[(0,t.jsx)("option",{value:"current",children:"Current Semester"}),(0,t.jsx)("option",{value:"fall",children:"Fall Semester"}),(0,t.jsx)("option",{value:"spring",children:"Spring Semester"}),(0,t.jsx)("option",{value:"summer",children:"Summer Semester"})]})]})}),(0,t.jsx)(m.Z.Content,{children:H?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{size:"lg"})}):D&&D.length>0?(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsx)(v.Z,{columns:[{key:"day_of_week",label:"Day"},{key:"start_time",label:"Start Time"},{key:"end_time",label:"End Time"},{key:"course_name",label:"Course"},{key:"class_name",label:"Class"},{key:"room",label:"Room"}],data:D.map(e=>({...e,day_of_week:e.day_of_week||"N/A",start_time:e.start_time||"N/A",end_time:e.end_time||"N/A",course_name:e.course_name||"N/A",class_name:e.class_name||"N/A",room:e.room||"N/A"}))})}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.vlc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No schedule available for selected semester"})]})})]}),"students"===s&&(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(m.Z.Header,{children:(0,t.jsx)(m.Z.Title,{children:"My Students"})}),(0,t.jsx)(m.Z.Content,{children:I?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.Z,{size:"lg"})}):F&&F.length>0?(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsx)(v.Z,{columns:[{key:"first_name",label:"First Name"},{key:"last_name",label:"Last Name"},{key:"email",label:"Email"},{key:"course_name",label:"Course"},{key:"student_id",label:"Student ID"}],data:F.map(e=>({first_name:e.first_name||"N/A",last_name:e.last_name||"N/A",email:e.email||"N/A",course_name:e.course_name||"N/A",student_id:e.student_id||e.id||"N/A"}))})}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(g.WY8,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No students found"})]})})]})]})]})]})}}},function(e){e.O(0,[1216,8592,2888,179],function(){return e(e.s=6275)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5595],{7198:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hod/courses",function(){return a(9095)}])},9095:function(e,s,a){"use strict";a.r(s);var r=a(5893),t=a(7294),l=a(9008),n=a.n(l),i=a(6761),c=a(3242),d=a(591),o=a(4082),m=a(2983),x=a(4105),h=a(6208),u=a(7014),j=a(9180),g=a(9175),p=a(4549),v=a(5822),y=a(7219);s.default=()=>{let{user:e}=(0,i.a)(),[s,a]=(0,t.useState)(""),[l,N]=(0,t.useState)(!1),[f,C]=(0,t.useState)(null),[b,w]=(0,t.useState)(!1),[Z,_]=(0,t.useState)({name:"",course_code:"",credits:"",description:"",semester:"",year:""}),{data:E,loading:k,error:D,refetch:S}=(0,c.h)(()=>Promise.resolve([])),{execute:A,loading:H}=(0,c.c)(d.pW.manageCourses);if(!e||"hod"!==e.role)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(g.Z,{variant:"error",children:"Access denied. HOD access required."})});let handleRefresh=async()=>{w(!0);try{await S()}catch(e){}finally{w(!1)}},handleInputChange=e=>{let{name:s,value:a}=e.target;_(e=>({...e,[s]:a}))},handleAddCourse=async e=>{e.preventDefault();try{await A({action:"add",courseData:Z}),N(!1),_({name:"",course_code:"",credits:"",description:"",semester:"",year:""}),await S()}catch(e){}},handleEditCourse=async e=>{e.preventDefault();try{await A({action:"edit",courseData:{...Z,id:f.id}}),C(null),_({name:"",course_code:"",credits:"",description:"",semester:"",year:""}),await S()}catch(e){}},handleDeleteCourse=async e=>{if(window.confirm("Are you sure you want to delete this course?"))try{await A({action:"delete",courseData:{id:e}}),await S()}catch(e){}},startEditing=e=>{var s;C(e),_({name:e.name,course_code:e.course_code,credits:e.credits.toString(),description:e.description||"",semester:e.semester||"",year:(null===(s=e.year)||void 0===s?void 0:s.toString())||""})},cancelEditing=()=>{C(null),_({name:"",course_code:"",credits:"",description:"",semester:"",year:""})},z=(null==E?void 0:E.filter(e=>{let a=!s||e.name.toLowerCase().includes(s.toLowerCase())||e.course_code.toLowerCase().includes(s.toLowerCase());return a}))||[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[(0,r.jsx)("title",{children:"Course Management - HOD Dashboard"}),(0,r.jsx)("meta",{name:"description",content:"Manage department courses and curriculum"})]}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(o.default,{}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(m.default,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Course Management"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your department's courses and curriculum"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(j.Z,{variant:"outline",size:"sm",onClick:handleRefresh,loading:b,icon:y.Bw1,children:"Refresh"}),(0,r.jsx)(j.Z,{variant:"primary",size:"sm",onClick:()=>N(!0),icon:y.OvN,children:"Add Course"})]})]}),D&&(0,r.jsxs)(g.Z,{variant:"error",className:"mb-6",children:["Error loading courses: ",D.message]}),(0,r.jsx)(x.Z,{className:"p-6",children:(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(v.Z,{placeholder:"Search courses by name or code...",value:s,onChange:e=>a(e.target.value),icon:y.jRj})})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)(x.Z,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-lg bg-blue-50",children:(0,r.jsx)(y.yK7,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Courses"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:k?"...":(null==E?void 0:E.length)||0})]})]})}),(0,r.jsx)(x.Z,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-lg bg-green-50",children:(0,r.jsx)(y.WY8,{className:"w-6 h-6 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Courses"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:k?"...":(null==E?void 0:E.filter(e=>"active"===e.status).length)||0})]})]})}),(0,r.jsx)(x.Z,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-lg bg-purple-50",children:(0,r.jsx)(y.TCC,{className:"w-6 h-6 text-purple-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Credits"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:k?"...":(null==E?void 0:E.reduce((e,s)=>e+(s.credits||0),0))||0})]})]})})]}),(0,r.jsxs)(x.Z,{className:"overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Department Courses"}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[z.length," of ",(null==E?void 0:E.length)||0," courses"]})]})}),k?(0,r.jsx)("div",{className:"flex justify-center py-12",children:(0,r.jsx)(p.Z,{size:"lg"})}):z.length>0?(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(h.Z.Header,{children:(0,r.jsxs)(h.Z.Row,{children:[(0,r.jsx)(h.Z.Head,{children:"Course"}),(0,r.jsx)(h.Z.Head,{children:"Code"}),(0,r.jsx)(h.Z.Head,{children:"Credits"}),(0,r.jsx)(h.Z.Head,{children:"Semester"}),(0,r.jsx)(h.Z.Head,{children:"Status"}),(0,r.jsx)(h.Z.Head,{children:"Actions"})]})}),(0,r.jsx)(h.Z.Body,{children:z.map(e=>(0,r.jsxs)(h.Z.Row,{children:[(0,r.jsx)(h.Z.Cell,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(y.yK7,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]})}),(0,r.jsx)(h.Z.Cell,{children:(0,r.jsx)("span",{className:"text-sm font-mono text-gray-900",children:e.course_code})}),(0,r.jsx)(h.Z.Cell,{children:(0,r.jsx)("span",{className:"text-sm text-gray-900",children:e.credits})}),(0,r.jsx)(h.Z.Cell,{children:(0,r.jsx)("span",{className:"text-sm text-gray-900",children:e.semester||"N/A"})}),(0,r.jsx)(h.Z.Cell,{children:(0,r.jsx)(u.Z,{variant:"active"===e.status?"success":"default",size:"sm",children:e.status||"Active"})}),(0,r.jsx)(h.Z.Cell,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(j.Z,{variant:"outline",size:"sm",icon:y.vPQ,onClick:()=>startEditing(e),children:"Edit"}),(0,r.jsx)(j.Z,{variant:"outline",size:"sm",icon:y.Ybf,onClick:()=>handleDeleteCourse(e.id),className:"text-red-600 hover:text-red-700",children:"Delete"})]})})]},e.id))})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(y.yK7,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No courses found"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:s?"Try adjusting your search criteria.":"No courses are available in your department yet."}),(0,r.jsx)(j.Z,{variant:"primary",onClick:()=>N(!0),icon:y.OvN,children:"Add First Course"})]})]}),(l||f)&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:f?"Edit Course":"Add New Course"}),(0,r.jsx)(j.Z,{variant:"ghost",size:"sm",onClick:()=>{N(!1),cancelEditing()},icon:y.q5L})]})}),(0,r.jsxs)("form",{onSubmit:f?handleEditCourse:handleAddCourse,className:"p-6 space-y-4",children:[(0,r.jsx)(v.Z,{label:"Course Name",name:"name",value:Z.name,onChange:handleInputChange,required:!0,placeholder:"Enter course name"}),(0,r.jsx)(v.Z,{label:"Course Code",name:"course_code",value:Z.course_code,onChange:handleInputChange,required:!0,placeholder:"e.g., CS101"}),(0,r.jsx)(v.Z,{label:"Credits",name:"credits",type:"number",value:Z.credits,onChange:handleInputChange,required:!0,placeholder:"Enter credit hours",min:"1",max:"10"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{name:"description",value:Z.description,onChange:handleInputChange,rows:3,className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-primary-light focus:border-primary-light sm:text-sm px-3 py-2",placeholder:"Enter course description"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(v.Z,{label:"Semester",name:"semester",value:Z.semester,onChange:handleInputChange,placeholder:"e.g., Fall"}),(0,r.jsx)(v.Z,{label:"Year",name:"year",type:"number",value:Z.year,onChange:handleInputChange,placeholder:"e.g., 2024",min:"2020",max:"2030"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(j.Z,{type:"button",variant:"outline",onClick:()=>{N(!1),cancelEditing()},children:"Cancel"}),(0,r.jsx)(j.Z,{type:"submit",variant:"primary",loading:H,icon:y.mW3,children:f?"Update Course":"Add Course"})]})]})]})})]})})]})]})]})}}},function(e){e.O(0,[1216,8592,2888,179],function(){return e(e.s=7198)}),_N_E=e.O()}]);
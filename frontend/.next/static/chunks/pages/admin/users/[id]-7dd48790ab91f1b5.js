(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{5271:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users/[id]",function(){return a(4980)}])},4980:function(e,s,a){"use strict";a.r(s);var t=a(5893),l=a(7294),i=a(1163),r=a(6761),n=a(3240),c=a(4082),d=a(5936),m=a(9180),x=a(4105);a(7014);var o=a(7219);s.default=()=>{var e,s,a;let{user:h,isAuthenticated:u}=(0,r.a)(),j=(0,i.useRouter)(),{id:f}=j.query,[g,N]=(0,l.useState)(null),[v,y]=(0,l.useState)(!0),[p,b]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(!u||(null==h?void 0:h.role)!=="admin"){j.push("/dashboard");return}},[u,h,j]),(0,l.useEffect)(()=>{let fetchUserDetails=async()=>{if(f)try{y(!0);let e=await n.Sb.getUserById(f);N(e.data),b(null)}catch(e){b("Failed to load user details")}finally{y(!1)}};u&&(null==h?void 0:h.role)==="admin"&&fetchUserDetails()},[f,u,h]);let formatDate=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not provided";if(!u||(null==h?void 0:h.role)!=="admin")return null;if(v)return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(c.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(d.Z,{}),(0,t.jsx)("main",{className:"flex-1 overflow-auto",children:(0,t.jsx)("div",{className:"p-6 max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-64 mb-6"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg"}),(0,t.jsx)("div",{className:"h-48 bg-gray-200 rounded-lg"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg"}),(0,t.jsx)("div",{className:"h-48 bg-gray-200 rounded-lg"})]})]})]})})})]})]});if(p||!g)return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(c.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(d.Z,{}),(0,t.jsx)("main",{className:"flex-1 overflow-auto",children:(0,t.jsx)("div",{className:"p-6 max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(o.fzv,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"User Not Found"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:p||"The requested user could not be found."}),(0,t.jsx)(m.Z,{variant:"primary",onClick:()=>j.push("/admin/users"),icon:o.Ao2,children:"Back to Users"})]})})})]})]});let w=(e=>{let s={admin:o.bfl,hod:o.bfl,teacher:o.fzv,finance:o.bAx,student:o.fzv};return s[e]||o.fzv})(g.role),_=(e=>{let s={active:o._rq,inactive:o.$Rx,suspended:o.bcx,pending:o.TCC};return s[e]||o.TCC})(g.status||"active");return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(c.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(d.Z,{}),(0,t.jsx)("main",{className:"flex-1 overflow-auto",children:(0,t.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m.Z,{variant:"outline",size:"sm",icon:o.Ao2,onClick:()=>j.push("/admin/users"),className:"mr-4",children:"Back"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:[g.first_name," ",g.last_name]}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"User Details"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(m.Z,{variant:"primary",icon:o.vPQ,onClick:()=>j.push("/admin/users/".concat(g.id,"/edit")),children:"Edit User"}),(0,t.jsx)(m.Z,{variant:"danger",icon:o.Ybf,onClick:()=>{confirm("Are you sure you want to delete this user?")},children:"Delete"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(x.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,t.jsxs)("span",{className:"text-2xl font-bold text-white",children:[null===(e=g.first_name)||void 0===e?void 0:e[0],null===(s=g.last_name)||void 0===s?void 0:s[0]]})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[g.first_name," ",g.last_name]}),(0,t.jsxs)("div",{className:"flex items-center px-3 py-1 rounded-full ".concat({admin:"text-red-600 bg-red-100",hod:"text-orange-600 bg-orange-100",teacher:"text-blue-600 bg-blue-100",finance:"text-green-600 bg-green-100",student:"text-purple-600 bg-purple-100"}[g.role]||"text-gray-600 bg-gray-100"),children:[(0,t.jsx)(w,{className:"w-4 h-4 mr-1"}),(0,t.jsx)("span",{className:"text-sm font-medium capitalize",children:g.role})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(o.Imn,{className:"w-4 h-4 mr-1"}),g.email]}),g.phone&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(o.tUt,{className:"w-4 h-4 mr-1"}),g.phone]})]}),g.address&&(0,t.jsxs)("div",{className:"flex items-center mt-2 text-sm text-gray-600",children:[(0,t.jsx)(o.i63,{className:"w-4 h-4 mr-1"}),g.address]})]})]})}),(0,t.jsxs)(x.Z,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Date of Birth"}),(0,t.jsx)("p",{className:"text-gray-900",children:formatDate(g.date_of_birth)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Gender"}),(0,t.jsx)("p",{className:"text-gray-900 capitalize",children:g.gender||"Not specified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Department"}),(0,t.jsx)("p",{className:"text-gray-900",children:g.department_name||"Not assigned"})]}),"student"===g.role&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Student ID"}),(0,t.jsx)("p",{className:"text-gray-900 font-mono",children:g.student_id||"Not assigned"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Enrollment Year"}),(0,t.jsx)("p",{className:"text-gray-900",children:g.enrollment_year||"Not specified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Current Year"}),(0,t.jsx)("p",{className:"text-gray-900",children:g.current_year||"Not specified"})]})]}),["teacher","hod","finance","admin"].includes(g.role)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Staff ID"}),(0,t.jsx)("p",{className:"text-gray-900 font-mono",children:g.staff_id||"Not assigned"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Hire Date"}),(0,t.jsx)("p",{className:"text-gray-900",children:formatDate(g.hire_date)})]}),g.qualifications&&(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Qualifications"}),(0,t.jsx)("p",{className:"text-gray-900",children:g.qualifications})]})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(x.Z,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Status"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,t.jsxs)("div",{className:"flex items-center ".concat({active:"text-green-600",inactive:"text-gray-600",suspended:"text-red-600",pending:"text-yellow-600"}[g.status||"active"]||"text-gray-600"),children:[(0,t.jsx)(_,{className:"w-4 h-4 mr-1"}),(0,t.jsx)("span",{className:"text-sm font-medium capitalize",children:g.status||"active"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Last Login"}),(0,t.jsx)("span",{className:"text-sm text-gray-900",children:(a=g.last_login)?new Date(a).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Created"}),(0,t.jsx)("span",{className:"text-sm text-gray-900",children:formatDate(g.created_at)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Updated"}),(0,t.jsx)("span",{className:"text-sm text-gray-900",children:formatDate(g.updated_at)})]})]})]}),(0,t.jsxs)(x.Z,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(m.Z,{variant:"outline",className:"w-full justify-start",icon:o.Imn,children:"Send Email"}),(0,t.jsx)(m.Z,{variant:"outline",className:"w-full justify-start",icon:o.bAx,children:"View Activity Log"}),(0,t.jsx)(m.Z,{variant:"outline",className:"w-full justify-start",icon:o.bfl,children:"Reset Password"})]})]})]})]})]})})]})]})}}},function(e){e.O(0,[216,592,888,179],function(){return e(e.s=5271)}),_N_E=e.O()}]);
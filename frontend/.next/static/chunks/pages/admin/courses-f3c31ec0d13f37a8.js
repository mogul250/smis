(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9625],{795:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/courses",function(){return a(239)}])},239:function(e,s,a){"use strict";a.r(s);var l=a(5893),r=a(7294),t=a(1163),c=a(6761),i=a(3242),n=a(591),d=a(4082),o=a(2983),u=a(4105),m=a(9180),x=a(5822),h=a(897),p=a(4065),v=a(1095),g=a(9175),j=a(4549),C=a(7219);s.default=()=>{let{user:e,isAuthenticated:s}=(0,c.a)(),a=(0,t.useRouter)(),[N,f]=(0,r.useState)(""),[y,b]=(0,r.useState)("all"),[S,w]=(0,r.useState)("all"),[_,Z]=(0,r.useState)(!1),[A,E]=(0,r.useState)(null),[k,D]=(0,r.useState)(null),[F,L]=(0,r.useState)({name:"",course_code:"",credits:"",description:"",semester:""});(0,r.useEffect)(()=>{if(!s||(null==e?void 0:e.role)!=="admin"){a.push("/dashboard");return}},[s,e,a]),(0,r.useEffect)(()=>{R()},[N,S]);let{data:M,loading:O,error:P,refetch:R}=(0,i.h)(()=>n.Sb.getAllCourses(1,50,{search:N,semester:"all"!==S?S:void 0})),T=(null==M?void 0:M.courses)||[],{data:q}=(0,i.h)(()=>n.Sb.getAllDepartments?n.Sb.getAllDepartments():Promise.resolve([])),{loading:z,execute:X}=(0,i.c)(),Y=(null==T?void 0:T.filter(e=>{var s,a;let l=(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(N.toLowerCase()))||(null===(a=e.course_code)||void 0===a?void 0:a.toLowerCase().includes(N.toLowerCase())),r="all"===S||e.semester===S;return l&&r}))||[],handleManageCourse=async e=>{e.preventDefault();try{let e=A?"update":"create",s={action:e,...F,id:null==A?void 0:A.id};await X(()=>n.Sb.manageCourses(s)),D({type:"success",message:"Course ".concat("create"===e?"created":"updated"," successfully!")}),Z(!1),E(null),L({name:"",course_code:"",credits:"",description:"",semester:""}),R()}catch(e){var s,a;D({type:"error",message:(null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||e.message||"Failed to ".concat(A?"update":"create"," course")})}},handleEditCourse=e=>{E(e),L({name:e.name||"",course_code:e.course_code||"",credits:e.credits||"",description:e.description||"",semester:e.semester||""}),Z(!0)},handleDeleteCourse=async e=>{if(confirm("Are you sure you want to delete this course?"))try{await X(()=>n.Sb.manageCourses({action:"delete",id:e})),D({type:"success",message:"Course deleted successfully!"}),R()}catch(e){var s,a;D({type:"error",message:(null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||e.message||"Failed to delete course"})}},B=[{header:"Course Code",accessor:"course_code",cell:e=>(0,l.jsx)("span",{className:"font-mono text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e||"N/A"})},{header:"Course Name",accessor:"name",cell:e=>(0,l.jsx)("div",{className:"font-medium text-gray-900",children:e||"N/A"})},{header:"Department",accessor:"department_name",cell:e=>(0,l.jsx)("div",{className:"text-sm text-gray-600",children:e||"N/A"})},{header:"Credits",accessor:"credits",cell:e=>(0,l.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,l.jsx)(C.HR2,{className:"w-4 h-4 mr-1"}),e||0]})},{header:"Semester",accessor:"semester",cell:e=>(0,l.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,l.jsx)(C.TCC,{className:"w-4 h-4 mr-1"}),e||"N/A"]})},{header:"Year",accessor:"year",cell:e=>(0,l.jsx)("div",{className:"text-sm text-gray-600",children:e||"N/A"})},{header:"Actions",accessor:"id",cell:(e,s)=>(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(m.Z,{variant:"outline",size:"sm",icon:C.vPQ,onClick:()=>handleEditCourse(s),children:"Edit"}),(0,l.jsx)(m.Z,{variant:"outline",size:"sm",icon:C.Ybf,onClick:()=>handleDeleteCourse(e),className:"text-red-600 hover:text-red-700",children:"Delete"})]})}];return s&&(null==e?void 0:e.role)==="admin"?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(d.default,{}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(o.default,{}),(0,l.jsxs)("main",{className:"flex-1 p-6",children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,l.jsx)(C.hbr,{className:"w-8 h-8 mr-3 text-blue-600"}),"Course Management"]}),(0,l.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage academic courses and curriculum"})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)(m.Z,{variant:"outline",icon:C.Bw1,onClick:R,disabled:O,children:"Refresh"}),(0,l.jsx)(m.Z,{icon:C.OvN,onClick:()=>Z(!0),children:"Add Course"})]})]})}),k&&(0,l.jsx)(g.Z,{type:k.type,message:k.message,onClose:()=>D(null),className:"mb-6"}),(0,l.jsx)(u.Z,{className:"p-6 mb-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(C.jRj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,l.jsx)(x.Z,{type:"text",placeholder:"Search courses...",value:N,onChange:e=>f(e.target.value),className:"pl-10"})]}),(0,l.jsxs)(h.Z,{value:S,onChange:e=>w(e.target.value),children:[(0,l.jsx)("option",{value:"all",children:"All Semesters"}),(0,l.jsx)("option",{value:"Fall 2024",children:"Fall 2024"}),(0,l.jsx)("option",{value:"Spring 2024",children:"Spring 2024"}),(0,l.jsx)("option",{value:"Summer 2024",children:"Summer 2024"}),(0,l.jsx)("option",{value:"Fall 2023",children:"Fall 2023"}),(0,l.jsx)("option",{value:"Spring 2023",children:"Spring 2023"})]})]})}),(0,l.jsx)(u.Z,{className:"overflow-hidden",children:O?(0,l.jsxs)("div",{className:"p-8 text-center",children:[(0,l.jsx)(j.Z,{}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading courses..."})]}):P?(0,l.jsxs)("div",{className:"p-8 text-center",children:[(0,l.jsxs)("p",{className:"text-red-600",children:["Error loading courses: ",P]}),(0,l.jsx)(m.Z,{variant:"outline",onClick:R,className:"mt-4",children:"Try Again"})]}):(0,l.jsx)(p.Z,{columns:B,data:Y,emptyMessage:"No courses found. Click 'Add Course' to create your first course."})}),(0,l.jsx)(v.Z,{isOpen:_,onClose:()=>{Z(!1),E(null),L({name:"",course_code:"",credits:"",description:"",semester:""})},title:A?"Edit Course":"Create New Course",children:(0,l.jsxs)("form",{onSubmit:handleManageCourse,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(x.Z,{label:"Course Name",type:"text",value:F.name,onChange:e=>L({...F,name:e.target.value}),required:!0,placeholder:"e.g., Data Structures"}),(0,l.jsx)(x.Z,{label:"Course Code",type:"text",value:F.course_code,onChange:e=>L({...F,course_code:e.target.value}),required:!0,placeholder:"e.g., CS201"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(x.Z,{label:"Credits",type:"number",value:F.credits,onChange:e=>L({...F,credits:e.target.value}),required:!0,min:"1",max:"6"}),(0,l.jsx)(x.Z,{label:"Semester",type:"text",value:F.semester,onChange:e=>L({...F,semester:e.target.value}),placeholder:"e.g., Fall 2024"})]}),(0,l.jsx)(x.Z,{label:"Description",type:"textarea",value:F.description,onChange:e=>L({...F,description:e.target.value}),placeholder:"Course description...",rows:3}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,l.jsx)(m.Z,{type:"button",variant:"outline",onClick:()=>{Z(!1),E(null)},children:"Cancel"}),(0,l.jsxs)(m.Z,{type:"submit",loading:z,children:[A?"Update":"Create"," Course"]})]})]})})]})]})]}):(0,l.jsx)(j.Z,{})}}},function(e){e.O(0,[1216,8592,2888,179],function(){return e(e.s=795)}),_N_E=e.O()}]);
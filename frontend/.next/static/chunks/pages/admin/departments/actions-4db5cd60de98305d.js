(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3785],{1223:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/departments/actions",function(){return t(5846)}])},5846:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return actions}});var a={};t.r(a);var l=t(5893),n=t(7294),i=t(1163),d=t(6761),r=t(591),c=t(4082),m=t(2983),x=t(9180),h=t(4105),o=t(4549),j=t(7219),actions=()=>{var e;let{user:s,isAuthenticated:t}=(0,d.a)(),u=(0,i.useRouter)(),{departmentId:N,action:f}=u.query,[p,g]=(0,n.useState)(null),[v,y]=(0,n.useState)(!0),[b,w]=(0,n.useState)(!1),[D,_]=(0,n.useState)(null),[C,S]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!t||(null==s?void 0:s.role)!=="admin"){u.push("/dashboard");return}},[t,s,u]),(0,n.useEffect)(()=>{N&&t&&(null==s?void 0:s.role)==="admin"&&fetchDepartment()},[N,t,s]);let fetchDepartment=async()=>{try{y(!0),_(null);let e=await r.Sb.getDepartmentById(parseInt(N));g(e)}catch(e){_("Failed to load department data. Please try again.")}finally{y(!1)}},handleDeleteDepartment=async()=>{if(window.confirm("Are you sure you want to delete this department? This action cannot be undone."))try{w(!0),await r.Sb.deleteDepartment(parseInt(N)),S({type:"success",text:"Department deleted successfully"}),setTimeout(()=>{u.push("/admin/departments")},2e3)}catch(e){S({type:"error",text:"Failed to delete department: ".concat(e.message)}),setTimeout(()=>S(null),3e3)}finally{w(!1)}};return t&&(null==s?void 0:s.role)==="admin"?v?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(c.default,{}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(m.default,{}),(0,l.jsx)("main",{className:"flex-1 p-6 flex justify-center items-center",children:(0,l.jsx)(o.Z,{size:"lg"})})]})]}):D?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(c.default,{}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(m.default,{}),(0,l.jsx)("main",{className:"flex-1 p-6",children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,l.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"text-red-500 mr-3",children:(0,l.jsx)(a.FiBuilding,{className:"w-6 h-6"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Error Loading Department"}),(0,l.jsx)("p",{className:"text-red-600 mt-1",children:D})]})]}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(x.Z,{variant:"outline",onClick:()=>u.push("/admin/departments"),icon:j.Ao2,children:"Back to Departments"})})]})})})]})]}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(c.default,{}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(m.default,{}),(0,l.jsx)("main",{className:"flex-1 p-6",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(x.Z,{variant:"outline",onClick:()=>u.push("/admin/departments"),icon:j.Ao2,className:"mr-4",children:"Back"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Department Actions"}),(0,l.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage department information and settings"})]})]})})}),C&&(0,l.jsx)("div",{className:"mb-6 p-4 rounded-lg border-l-4 ".concat("success"===C.type?"bg-green-50 border-green-400 text-green-800":"bg-red-50 border-red-400 text-red-800"),children:(0,l.jsxs)("div",{className:"flex items-center",children:["success"===C.type?(0,l.jsx)(a.FiBuilding,{className:"w-5 h-5 mr-2"}):(0,l.jsx)(j.H33,{className:"w-5 h-5 mr-2"}),(0,l.jsx)("span",{className:"font-medium",children:C.text})]})}),p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{className:"mb-6",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(a.FiBuilding,{className:"w-8 h-8 text-blue-600"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:p.name}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,l.jsxs)("span",{className:"text-gray-600",children:["Code: ",p.code]}),(0,l.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("active"===p.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:(null===(e=p.status)||void 0===e?void 0:e.toUpperCase())||"ACTIVE"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Department Information"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Department ID"}),(0,l.jsx)("p",{className:"text-gray-900",children:p.id})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Department Name"}),(0,l.jsx)("p",{className:"text-gray-900",children:p.name})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Department Code"}),(0,l.jsx)("p",{className:"text-gray-900",children:p.code})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),(0,l.jsx)("p",{className:"text-gray-900",children:p.description||"No description available"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Statistics"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Head of Department"}),(0,l.jsx)("p",{className:"text-gray-900",children:p.hod_name||"Not assigned"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Total Staff"}),(0,l.jsx)("p",{className:"text-gray-900",children:p.staff_count||0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Total Students"}),(0,l.jsx)("p",{className:"text-gray-900",children:p.student_count||0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Created"}),(0,l.jsx)("p",{className:"text-gray-900",children:p.created_at?new Date(p.created_at).toLocaleDateString():"N/A"})]})]})]})]})]})}),(0,l.jsx)(h.Z,{children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Available Actions"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,l.jsx)(x.Z,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>u.push("/admin/departments/edit?departmentId=".concat(N)),disabled:b,children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(j.IYd,{className:"w-5 h-5 mr-3 text-blue-600"}),(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("div",{className:"font-medium",children:"Edit Department"}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Update department information"})]})]})}),(0,l.jsx)(x.Z,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>u.push("/admin/departments/".concat(N,"/staff")),disabled:b,children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(j.WY8,{className:"w-5 h-5 mr-3 text-green-600"}),(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("div",{className:"font-medium",children:"View Staff"}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Manage department staff"})]})]})}),(0,l.jsx)(x.Z,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>u.push("/admin/departments/".concat(N,"/students")),disabled:b,children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(j.fzv,{className:"w-5 h-5 mr-3 text-purple-600"}),(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("div",{className:"font-medium",children:"View Students"}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Manage department students"})]})]})}),(0,l.jsx)(x.Z,{variant:"outline",className:"justify-start h-auto p-4 border-red-300 text-red-600 hover:bg-red-50",onClick:handleDeleteDepartment,disabled:b,children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(j.Ybf,{className:"w-5 h-5 mr-3 text-red-600"}),(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("div",{className:"font-medium",children:"Delete Department"}),(0,l.jsx)("div",{className:"text-sm text-red-500",children:"Permanently remove department"})]})]})})]})]})})]})]})})]})]}):null}}},function(e){e.O(0,[1216,8592,2888,179],function(){return e(e.s=1223)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2889],{8903:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/timetable/create",function(){return l(8671)}])},8671:function(e,a,l){"use strict";l.r(a);var s=l(5893),t=l(7294),d=l(1163),r=l(6761),i=l(3242),n=l(9993),c=l(2983),o=l(4082),u=l(9180),m=l(5822);a.default=()=>{let e=(0,d.useRouter)(),{user:a}=(0,r.a)(),{day:l,time:h}=e.query,[x,b]=(0,t.useState)({course_id:"",teacher_id:"",class_id:"",day:l||"",start_time:h||"",end_time:"",room:"",semester:"Fall 2024"}),[g,v]=(0,t.useState)({}),{data:p,loading:j}=(0,i.h)(()=>n.Ho().catch(e=>[])),{data:y,loading:f}=(0,i.h)(()=>n.Os(1,100).catch(e=>({users:[]}))),{data:_,loading:N}=(0,i.h)(()=>n.k().catch(e=>[])),C=(null==y?void 0:y.users)||[],{execute:S,loading:w}=(0,i.c)();if((0,t.useEffect)(()=>{l&&b(e=>({...e,day:l})),h&&b(e=>({...e,start_time:h}))},[l,h]),!a||"admin"!==a.role)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access this page."}),(0,s.jsx)(u.Z,{onClick:()=>e.push("/login"),children:"Go to Login"})]})});let handleInputChange=(e,a)=>{b(l=>({...l,[e]:a})),g[e]&&v(a=>({...a,[e]:""}))},validateForm=()=>{let e={};return x.course_id||(e.course_id="Course is required"),x.teacher_id||(e.teacher_id="Teacher is required"),x.class_id||(e.class_id="Class is required"),x.day||(e.day="Day is required"),x.start_time||(e.start_time="Start time is required"),x.end_time||(e.end_time="End time is required"),x.room||(e.room="Room is required"),x.start_time&&x.end_time&&x.start_time>=x.end_time&&(e.end_time="End time must be after start time"),v(e),0===Object.keys(e).length},handleSubmit=async a=>{if(a.preventDefault(),validateForm())try{await S(async()=>{let e=await n.TK(x);return e}),e.push("/admin/timetable?success=created")}catch(e){}},handleCancel=()=>{e.push("/admin/timetable")},k=[{value:"",label:"Select time"},{value:"08:00",label:"08:00"},{value:"09:00",label:"09:00"},{value:"10:00",label:"10:00"},{value:"11:00",label:"11:00"},{value:"12:00",label:"12:00"},{value:"13:00",label:"13:00"},{value:"14:00",label:"14:00"},{value:"15:00",label:"15:00"},{value:"16:00",label:"16:00"},{value:"17:00",label:"17:00"},{value:"18:00",label:"18:00"}];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(o.default,{}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(c.default,{}),(0,s.jsx)("main",{className:"flex-1 p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Timetable Slot"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Add a new class to the timetable schedule"})]}),(0,s.jsx)(u.Z,{variant:"outline",onClick:handleCancel,children:"← Back to Timetable"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course *"}),(0,s.jsxs)("select",{value:x.course_id,onChange:e=>handleInputChange("course_id",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.course_id?"border-red-500":"border-gray-300"),disabled:j,children:[(0,s.jsx)("option",{value:"",children:"Select a course"}),p&&p.length>0?p.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.course_code," - ",e.name]},e.id)):(0,s.jsx)("option",{value:"",disabled:!0,children:j?"Loading courses...":"No courses available"})]}),g.course_id&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.course_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher *"}),(0,s.jsxs)("select",{value:x.teacher_id,onChange:e=>handleInputChange("teacher_id",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.teacher_id?"border-red-500":"border-gray-300"),disabled:f,children:[(0,s.jsx)("option",{value:"",children:"Select a teacher"}),C&&C.length>0?C.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id)):(0,s.jsx)("option",{value:"",disabled:!0,children:f?"Loading teachers...":"No teachers available"})]}),g.teacher_id&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.teacher_id})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class *"}),(0,s.jsxs)("select",{value:x.class_id,onChange:e=>handleInputChange("class_id",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.class_id?"border-red-500":"border-gray-300"),disabled:N,children:[(0,s.jsx)("option",{value:"",children:"Select a class"}),_&&_.length>0?_.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.academic_year,")"]},e.id)):(0,s.jsx)("option",{value:"",disabled:!0,children:N?"Loading classes...":"No classes available"})]}),g.class_id&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.class_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Day *"}),(0,s.jsx)("select",{value:x.day,onChange:e=>handleInputChange("day",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.day?"border-red-500":"border-gray-300"),children:[{value:"",label:"Select a day"},{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),g.day&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.day})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),(0,s.jsx)("select",{value:x.start_time,onChange:e=>handleInputChange("start_time",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.start_time?"border-red-500":"border-gray-300"),children:k.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),g.start_time&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.start_time})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time *"}),(0,s.jsx)("select",{value:x.end_time,onChange:e=>handleInputChange("end_time",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.end_time?"border-red-500":"border-gray-300"),children:k.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),g.end_time&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.end_time})]}),(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{label:"Room *",value:x.room,onChange:e=>handleInputChange("room",e.target.value),placeholder:"e.g., Room 101, Lab A",error:g.room})})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester"}),(0,s.jsx)("select",{value:x.semester,onChange:e=>handleInputChange("semester",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"Fall 2024",label:"Fall 2024"},{value:"Spring 2025",label:"Spring 2025"},{value:"Summer 2025",label:"Summer 2025"},{value:"Fall 2025",label:"Fall 2025"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,s.jsx)(u.Z,{type:"button",variant:"outline",onClick:handleCancel,disabled:w,children:"Cancel"}),(0,s.jsx)(u.Z,{type:"submit",loading:w,disabled:w,children:"Create Timetable Slot"})]})]})})})]})})]})]})}}},function(e){e.O(0,[1216,8592,2888,179],function(){return e(e.s=8903)}),_N_E=e.O()}]);
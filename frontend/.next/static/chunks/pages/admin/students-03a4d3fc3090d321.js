(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2541],{8314:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/students",function(){return t(2085)}])},2085:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return AdminStudentsNew}});var a={};t.r(a);var l=t(5893),r=t(7294),n=t(1163),i=t(6761),d=t(591),c=t(7219),o=t(4082),m=t(2983),x=t(4065),h=t(9180),u=t(5822),g=t(897);t(7014);var j=t(1095),b=t(4549);t(9175);var v=t(4105);let StatusBadge=e=>{let{status:s}=e,t={active:{label:"Active",className:"bg-gradient-to-r from-green-400 to-green-600 text-white shadow-lg",icon:(0,l.jsx)(c.tMu,{className:"w-3 h-3 mr-1"})},inactive:{label:"Inactive",className:"bg-gradient-to-r from-gray-400 to-gray-600 text-white shadow-lg",icon:(0,l.jsx)(c.pBC,{className:"w-3 h-3 mr-1"})},suspended:{label:"Suspended",className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white shadow-lg",icon:(0,l.jsx)(c.pBC,{className:"w-3 h-3 mr-1"})},graduated:{label:"Graduated",className:"bg-gradient-to-r from-purple-400 to-purple-600 text-white shadow-lg",icon:(0,l.jsx)(a.FiGraduationCap,{className:"w-3 h-3 mr-1"})}},r=t[s]||{label:s,className:"bg-gradient-to-r from-gray-400 to-gray-600 text-white shadow-lg",icon:(0,l.jsx)(c.fzv,{className:"w-3 h-3 mr-1"})};return(0,l.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold transform transition-all duration-200 hover:scale-105 ".concat(r.className),children:[r.icon,r.label]})},StudentAvatar=e=>{let{firstName:s,lastName:t,email:a}=e,r="".concat((null==s?void 0:s.charAt(0))||"").concat((null==t?void 0:t.charAt(0))||""),n=["from-blue-500 to-indigo-600","from-purple-500 to-pink-600","from-green-500 to-teal-600","from-yellow-500 to-orange-600","from-red-500 to-pink-600","from-indigo-500 to-purple-600"],i=((null==s?void 0:s.charCodeAt(0))||0)%n.length;return(0,l.jsx)("div",{className:"flex-shrink-0 h-12 w-12 rounded-full bg-gradient-to-r ".concat(n[i]," flex items-center justify-center text-white font-bold text-sm shadow-lg transform transition-all duration-200 hover:scale-110"),children:r})};function AdminStudentsNew(){let e=(0,n.useRouter)(),{user:s,isAuthenticated:t}=(0,i.a)(),[a,N]=(0,r.useState)([]),[p,f]=(0,r.useState)(!0),[y,w]=(0,r.useState)(null),[S,C]=(0,r.useState)(0),[_,k]=(0,r.useState)(1),[A,Z]=(0,r.useState)(10),[D,E]=(0,r.useState)(""),[F,Y]=(0,r.useState)("all"),[L,B]=(0,r.useState)("all"),[I,z]=(0,r.useState)("all"),[T,M]=(0,r.useState)(!1),[P,U]=(0,r.useState)(!1),[q,O]=(0,r.useState)(!1),[G,R]=(0,r.useState)(null),[W,X]=(0,r.useState)([]),[H,J]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(null),[V,$]=(0,r.useState)(!1),[ee,es]=(0,r.useState)({key:"created_at",direction:"desc"}),[et,ea]=(0,r.useState)([]),[el,er]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!t||(null==s?void 0:s.role)!=="admin"){e.push("/login");return}},[t,s,e]);let en=(0,r.useCallback)(async()=>{try{f(!0),w(null);let e=await d.Sb.getAllStudents(_,A),s=Array.isArray(e)?e:[];N(s),C(s.length)}catch(e){w(e.message||"Failed to fetch students")}finally{f(!1)}},[_,A]),ei=(0,r.useCallback)(async()=>{try{var e;let s=await d.Sb.getAllDepartments(),t=Array.isArray(s.data)?s.data:(null===(e=s.data)||void 0===e?void 0:e.departments)||[];X(t)}catch(e){}},[]);(0,r.useEffect)(()=>{t&&(null==s?void 0:s.role)==="admin"&&(en(),ei())},[t,s,en,ei]);let handleStatusUpdate=async(e,s)=>{try{J(!0),await d.Sb.updateStudentStatus(e,s),await en(),Q({type:"success",message:"Student status updated to ".concat(s)}),setTimeout(()=>Q(null),3e3)}catch(e){Q({type:"error",message:"Failed to update status: ".concat(e.message)}),setTimeout(()=>Q(null),3e3)}finally{J(!1)}},handleDelete=async e=>{if(window.confirm("Are you sure you want to delete this student? This action cannot be undone."))try{J(!0),await d.Sb.deleteStudent(e),await en(),Q({type:"success",message:"Student deleted successfully"}),setTimeout(()=>Q(null),3e3)}catch(e){Q({type:"error",message:"Failed to delete student: ".concat(e.message)}),setTimeout(()=>Q(null),3e3)}finally{J(!1)}},handleSubmit=async e=>{try{J(!0),G?(await d.Sb.updateUser(G.id,e),Q({type:"success",message:"Student updated successfully"})):(await d.Sb.createUser({...e,role:"student"}),Q({type:"success",message:"Student created successfully"})),M(!1),O(!1),R(null),await en(),setTimeout(()=>Q(null),3e3)}catch(e){Q({type:"error",message:"Error: ".concat(e.message)}),setTimeout(()=>Q(null),3e3)}finally{J(!1)}},ed=(0,r.useMemo)(()=>a.filter(e=>{var s,t,a,l;let r=!D||(null===(s=e.first_name)||void 0===s?void 0:s.toLowerCase().includes(D.toLowerCase()))||(null===(t=e.last_name)||void 0===t?void 0:t.toLowerCase().includes(D.toLowerCase()))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(D.toLowerCase()))||(null===(l=e.student_id)||void 0===l?void 0:l.toLowerCase().includes(D.toLowerCase())),n="all"===F||Number(e.department_id)===Number(F),i="all"===L||e.status===L,d="all"===I||Number(e.enrollment_year)===Number(I);return r&&n&&i&&d}),[a,D,F,L,I]),ec=(0,r.useMemo)(()=>{let e=a.filter(e=>"active"===e.status).length,s=a.filter(e=>{let s=e.enrollment_year||new Date(e.created_at).getFullYear();return Number(s)===new Date().getFullYear()}).length,t=a.filter(e=>"graduated"===e.status).length;return{total:S||a.length,active:e,newThisYear:s,graduated:t}},[a,S]),handlePageChange=e=>{k(e)},handlePageSizeChange=e=>{Z(e),k(1)},eo=Math.ceil((S||ed.length)/A);return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100",children:[(0,l.jsx)(o.default,{}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(m.default,{}),(0,l.jsxs)("main",{className:"flex-1 p-8",children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,l.jsxs)("div",{className:"mb-6 lg:mb-0",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Student Management"}),(0,l.jsx)("p",{className:"text-lg text-gray-600 font-medium",children:"Manage all student records, enrollment, and academic information with powerful tools"})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,l.jsxs)(h.Z,{variant:"outline",onClick:()=>$(!V),className:"border-2 border-blue-500 text-blue-600 hover:bg-blue-50 font-semibold shadow-lg transform transition-all duration-200 hover:scale-105",children:[(0,l.jsx)(c.Ihx,{className:"w-5 h-5 mr-2"}),V?"Hide Filters":"Show Filters"]}),(0,l.jsxs)(h.Z,{onClick:()=>{R(null),M(!0)},className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold shadow-xl transform transition-all duration-200 hover:scale-105",children:[(0,l.jsx)(c.zy7,{className:"w-5 h-5 mr-2"}),"Add New Student"]})]})]})}),K&&(0,l.jsx)("div",{className:"mb-6 p-4 rounded-lg border-l-4 ".concat("success"===K.type?"bg-green-50 border-green-400 text-green-800":"bg-red-50 border-red-400 text-red-800"),children:(0,l.jsxs)("div",{className:"flex items-center",children:["success"===K.type?(0,l.jsx)(c.UgA,{className:"w-5 h-5 mr-2"}):(0,l.jsx)(c.q5L,{className:"w-5 h-5 mr-2"}),(0,l.jsx)("span",{className:"font-medium",children:K.message})]})}),p&&(0,l.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,l.jsx)(b.Z,{}),(0,l.jsx)("span",{className:"ml-3 text-lg font-medium text-gray-600",children:"Loading students..."})]}),y&&(0,l.jsx)("div",{className:"mb-6 p-6 bg-red-50 border border-red-200 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(c.q5L,{className:"w-6 h-6 text-red-500 mr-3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Error Loading Students"}),(0,l.jsx)("p",{className:"text-red-600 mt-1",children:y})]})]})}),!p&&!y&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,l.jsx)(v.Z,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 shadow-xl transform transition-all duration-200 hover:scale-105",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-blue-100 text-sm font-medium mb-1",children:"Total Students"}),(0,l.jsx)("p",{className:"text-3xl font-bold",children:ec.total.toLocaleString()}),(0,l.jsx)("p",{className:"text-blue-100 text-xs mt-1",children:"All registered students"})]}),(0,l.jsx)("div",{className:"p-3 bg-white bg-opacity-20 rounded-full",children:(0,l.jsx)(c.WY8,{className:"w-8 h-8"})})]})}),(0,l.jsx)(v.Z,{className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white p-6 shadow-xl transform transition-all duration-200 hover:scale-105",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-green-100 text-sm font-medium mb-1",children:"Active Students"}),(0,l.jsx)("p",{className:"text-3xl font-bold",children:ec.active.toLocaleString()}),(0,l.jsx)("p",{className:"text-green-100 text-xs mt-1",children:"Currently enrolled"})]}),(0,l.jsx)("div",{className:"p-3 bg-white bg-opacity-20 rounded-full",children:(0,l.jsx)(c.tMu,{className:"w-8 h-8"})})]})}),(0,l.jsx)(v.Z,{className:"bg-gradient-to-br from-amber-500 to-orange-500 text-white p-6 shadow-xl transform transition-all duration-200 hover:scale-105",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-amber-100 text-sm font-medium mb-1",children:"New This Year"}),(0,l.jsx)("p",{className:"text-3xl font-bold",children:ec.newThisYear.toLocaleString()}),(0,l.jsx)("p",{className:"text-amber-100 text-xs mt-1",children:"Fresh enrollments"})]}),(0,l.jsx)("div",{className:"p-3 bg-white bg-opacity-20 rounded-full",children:(0,l.jsx)(c.zy7,{className:"w-8 h-8"})})]})}),(0,l.jsx)(v.Z,{className:"bg-gradient-to-br from-purple-500 to-indigo-600 text-white p-6 shadow-xl transform transition-all duration-200 hover:scale-105",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-purple-100 text-sm font-medium mb-1",children:"Departments"}),(0,l.jsx)("p",{className:"text-3xl font-bold",children:W.length.toLocaleString()}),(0,l.jsx)("p",{className:"text-purple-100 text-xs mt-1",children:"Academic divisions"})]}),(0,l.jsx)("div",{className:"p-3 bg-white bg-opacity-20 rounded-full",children:(0,l.jsx)(c.yK7,{className:"w-8 h-8"})})]})})]}),V&&(0,l.jsxs)(v.Z,{className:"mb-8 p-6 shadow-lg border-l-4 border-blue-500",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,l.jsx)(c.NNy,{className:"w-5 h-5 mr-2 text-blue-600"}),"Advanced Filters"]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Students"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(c.jRj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,l.jsx)(u.Z,{type:"text",placeholder:"Name, email, or ID...",value:D,onChange:e=>E(e.target.value),className:"pl-10 border-2 border-gray-200 focus:border-blue-500 rounded-lg"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),(0,l.jsxs)(g.Z,{value:F,onChange:e=>Y(e.target.value),className:"border-2 border-gray-200 focus:border-blue-500 rounded-lg",children:[(0,l.jsx)("option",{value:"all",children:"All Departments"}),W.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,l.jsxs)(g.Z,{value:L,onChange:e=>B(e.target.value),className:"border-2 border-gray-200 focus:border-blue-500 rounded-lg",children:[(0,l.jsx)("option",{value:"all",children:"All Statuses"}),(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"inactive",children:"Inactive"}),(0,l.jsx)("option",{value:"suspended",children:"Suspended"}),(0,l.jsx)("option",{value:"graduated",children:"Graduated"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment Year"}),(0,l.jsxs)(g.Z,{value:I,onChange:e=>z(e.target.value),className:"border-2 border-gray-200 focus:border-blue-500 rounded-lg",children:[(0,l.jsx)("option",{value:"all",children:"All Years"}),[2020,2021,2022,2023,2024,2025].map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]})]}),(0,l.jsxs)("div",{className:"mt-4 flex justify-end space-x-3",children:[(0,l.jsxs)(h.Z,{variant:"outline",onClick:()=>{E(""),Y("all"),B("all"),z("all")},className:"border-gray-300 text-gray-600 hover:bg-gray-50",children:[(0,l.jsx)(c.q5L,{className:"w-4 h-4 mr-2"}),"Clear Filters"]}),(0,l.jsxs)(h.Z,{onClick:()=>en(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,l.jsx)(c.Bw1,{className:"w-4 h-4 mr-2"}),"Apply Filters"]})]})]}),!p&&!y&&(0,l.jsxs)(v.Z,{className:"shadow-xl overflow-hidden",children:[(0,l.jsx)("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-4 sm:mb-0 flex items-center",children:[(0,l.jsx)(c.WY8,{className:"w-6 h-6 mr-2 text-blue-600"}),"Students (",ed.length,")"]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsxs)(h.Z,{variant:"outline",onClick:()=>en(),disabled:p,className:"border-gray-300 text-gray-600 hover:bg-gray-50 transform transition-all duration-200 hover:scale-105",children:[(0,l.jsx)(c.Bw1,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,l.jsxs)(h.Z,{variant:"outline",className:"border-green-500 text-green-600 hover:bg-green-50 transform transition-all duration-200 hover:scale-105",children:[(0,l.jsx)(c._hL,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})}),0===ed.length?(0,l.jsxs)("div",{className:"p-12 text-center",children:[(0,l.jsx)(c.WY8,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-500 mb-2",children:"No Students Found"}),(0,l.jsx)("p",{className:"text-gray-400 mb-6",children:"Try adjusting your search criteria or add new students."}),(0,l.jsxs)(h.Z,{onClick:()=>{R(null),M(!0)},className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",children:[(0,l.jsx)(c.zy7,{className:"w-4 h-4 mr-2"}),"Add First Student"]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.Z,{columns:[{header:"Student",accessor:"student_info",cell:(e,s)=>(0,l.jsxs)("div",{className:"flex items-center py-2",children:[(0,l.jsx)(StudentAvatar,{firstName:s.first_name,lastName:s.last_name,email:s.email}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[s.first_name," ",s.last_name]}),(0,l.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,l.jsx)(c.Imn,{className:"w-3 h-3 mr-1"}),s.email]}),s.student_id&&(0,l.jsxs)("div",{className:"text-xs text-blue-600 font-mono bg-blue-50 px-2 py-1 rounded mt-1 inline-block",children:["ID: ",s.student_id]})]})]})},{header:"Department",accessor:"department_name",cell:(e,s)=>(0,l.jsxs)("div",{className:"text-sm",children:[(0,l.jsx)("div",{className:"font-medium text-gray-900",children:e||"N/A"}),s.enrollment_year&&(0,l.jsxs)("div",{className:"text-xs text-gray-500 flex items-center mt-1",children:[(0,l.jsx)(c.vlc,{className:"w-3 h-3 mr-1"}),"Enrolled: ",s.enrollment_year]})]})},{header:"Status",accessor:"status",cell:e=>(0,l.jsx)(StatusBadge,{status:e})},{header:"Contact",accessor:"contact_info",cell:(e,s)=>(0,l.jsxs)("div",{className:"text-sm",children:[s.phone&&(0,l.jsxs)("div",{className:"flex items-center text-gray-600 mb-1",children:[(0,l.jsx)(c.tUt,{className:"w-3 h-3 mr-1"}),s.phone]}),s.address&&(0,l.jsx)("div",{className:"text-xs text-gray-500 truncate max-w-32",title:s.address,children:s.address})]})},{header:"Actions",accessor:"id",cell:(e,s)=>(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(h.Z,{variant:"ghost",size:"sm",onClick:()=>{R(s),U(!0)},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-full transform transition-all duration-200 hover:scale-110",title:"View Details",children:(0,l.jsx)(c.rDJ,{className:"w-4 h-4"})}),(0,l.jsx)(h.Z,{variant:"ghost",size:"sm",onClick:()=>{R(s),O(!0)},className:"text-indigo-600 hover:bg-indigo-50 p-2 rounded-full transform transition-all duration-200 hover:scale-110",title:"Edit Student",children:(0,l.jsx)(c.IYd,{className:"w-4 h-4"})}),(0,l.jsxs)("div",{className:"relative group",children:[(0,l.jsx)(h.Z,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-50 p-2 rounded-full transform transition-all duration-200 hover:scale-110",title:"More Actions",children:(0,l.jsx)(c.$Pu,{className:"w-4 h-4"})}),(0,l.jsx)("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-20",children:(0,l.jsxs)("div",{className:"py-2",children:["active"!==s.status&&(0,l.jsxs)("button",{onClick:()=>handleStatusUpdate(e,"active"),className:"flex items-center w-full px-4 py-2 text-sm text-green-700 hover:bg-green-50 transition-colors duration-150",disabled:H,children:[(0,l.jsx)(c.tMu,{className:"w-4 h-4 mr-2"}),"Activate"]}),"suspended"!==s.status&&(0,l.jsxs)("button",{onClick:()=>handleStatusUpdate(e,"suspended"),className:"flex items-center w-full px-4 py-2 text-sm text-yellow-700 hover:bg-yellow-50 transition-colors duration-150",disabled:H,children:[(0,l.jsx)(c.pBC,{className:"w-4 h-4 mr-2"}),"Suspend"]}),"inactive"!==s.status&&(0,l.jsxs)("button",{onClick:()=>handleStatusUpdate(e,"inactive"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-150",disabled:H,children:[(0,l.jsx)(c.pBC,{className:"w-4 h-4 mr-2"}),"Deactivate"]}),(0,l.jsx)("div",{className:"border-t border-gray-100 my-1"}),(0,l.jsxs)("button",{onClick:()=>handleDelete(e),className:"flex items-center w-full px-4 py-2 text-sm text-red-700 hover:bg-red-50 transition-colors duration-150",disabled:H,children:[(0,l.jsx)(c.Ybf,{className:"w-4 h-4 mr-2"}),"Delete"]})]})})]})]})}],data:ed,emptyMessage:"No students found matching your criteria"}),eo>1&&(0,l.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsxs)("div",{className:"text-sm text-gray-700 mb-4 sm:mb-0",children:["Showing ",(_-1)*A+1," to ",Math.min(_*A,S)," of ",S," students"]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"Rows per page:"}),(0,l.jsxs)(g.Z,{value:A,onChange:e=>handlePageSizeChange(Number(e.target.value)),className:"w-20 text-sm",children:[(0,l.jsx)("option",{value:5,children:"5"}),(0,l.jsx)("option",{value:10,children:"10"}),(0,l.jsx)("option",{value:25,children:"25"}),(0,l.jsx)("option",{value:50,children:"50"})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(h.Z,{variant:"outline",size:"sm",onClick:()=>handlePageChange(_-1),disabled:1===_,className:"p-2",children:(0,l.jsx)(c.YFh,{className:"w-4 h-4"})}),(0,l.jsxs)("span",{className:"text-sm text-gray-700 px-3",children:["Page ",_," of ",eo]}),(0,l.jsx)(h.Z,{variant:"outline",size:"sm",onClick:()=>handlePageChange(_+1),disabled:_===eo,className:"p-2",children:(0,l.jsx)(c.Tfp,{className:"w-4 h-4"})})]})]})]})})]})]})]})]}),(T||q)&&(0,l.jsx)(j.Z,{isOpen:T||q,onClose:()=>{M(!1),O(!1),R(null)},title:G?"Edit Student":"Create New Student",size:"lg",children:(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)(StudentForm,{student:G,departments:W,onSubmit:handleSubmit,onCancel:()=>{M(!1),O(!1),R(null)},isSubmitting:H})})}),P&&G&&(0,l.jsx)(j.Z,{isOpen:P,onClose:()=>{U(!1),R(null)},title:"Student Details",size:"xl",children:(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)(StudentDetails,{student:G,onEdit:()=>{U(!1),O(!0)},onStatusUpdate:handleStatusUpdate,onDelete:handleDelete,isSubmitting:H})})})]})}let StudentForm=e=>{let{student:s,departments:t,onSubmit:a,onCancel:n,isSubmitting:i}=e,[d,o]=(0,r.useState)({firstName:(null==s?void 0:s.first_name)||"",lastName:(null==s?void 0:s.last_name)||"",email:(null==s?void 0:s.email)||"",password:"",departmentId:(null==s?void 0:s.department_id)||"",phone:(null==s?void 0:s.phone)||"",address:(null==s?void 0:s.address)||"",dateOfBirth:(null==s?void 0:s.date_of_birth)||"",gender:(null==s?void 0:s.gender)||"",enrollmentYear:(null==s?void 0:s.enrollment_year)||new Date().getFullYear(),enrollmentDate:(null==s?void 0:s.enrollment_date)||"",status:(null==s?void 0:s.status)||"active"}),handleChange=(e,s)=>{o(t=>({...t,[e]:s}))};return(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(d)},className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,l.jsx)(u.Z,{type:"text",value:d.firstName,onChange:e=>handleChange("firstName",e.target.value),required:!0,className:"w-full",placeholder:"Enter first name"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,l.jsx)(u.Z,{type:"text",value:d.lastName,onChange:e=>handleChange("lastName",e.target.value),required:!0,className:"w-full",placeholder:"Enter last name"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,l.jsx)(u.Z,{type:"email",value:d.email,onChange:e=>handleChange("email",e.target.value),required:!0,className:"w-full",placeholder:"Enter email address"})]}),!s&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,l.jsx)(u.Z,{type:"password",value:d.password,onChange:e=>handleChange("password",e.target.value),required:!s,className:"w-full",placeholder:"Enter password"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),(0,l.jsxs)(g.Z,{value:d.departmentId,onChange:e=>handleChange("departmentId",e.target.value),required:!0,className:"w-full",children:[(0,l.jsx)("option",{value:"",children:"Select Department"}),t.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,l.jsxs)(g.Z,{value:d.status,onChange:e=>handleChange("status",e.target.value),className:"w-full",children:[(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"inactive",children:"Inactive"}),(0,l.jsx)("option",{value:"suspended",children:"Suspended"}),(0,l.jsx)("option",{value:"graduated",children:"Graduated"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),(0,l.jsx)(u.Z,{type:"tel",value:d.phone,onChange:e=>handleChange("phone",e.target.value),className:"w-full",placeholder:"Enter phone number"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),(0,l.jsxs)(g.Z,{value:d.gender,onChange:e=>handleChange("gender",e.target.value),className:"w-full",children:[(0,l.jsx)("option",{value:"",children:"Select Gender"}),(0,l.jsx)("option",{value:"male",children:"Male"}),(0,l.jsx)("option",{value:"female",children:"Female"}),(0,l.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,l.jsx)(u.Z,{type:"text",value:d.address,onChange:e=>handleChange("address",e.target.value),className:"w-full",placeholder:"Enter address"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),(0,l.jsx)(u.Z,{type:"date",value:d.dateOfBirth,onChange:e=>handleChange("dateOfBirth",e.target.value),className:"w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment Year"}),(0,l.jsx)(u.Z,{type:"number",value:d.enrollmentYear,onChange:e=>handleChange("enrollmentYear",e.target.value),className:"w-full",min:"2000",max:"2030"})]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,l.jsx)(h.Z,{type:"button",variant:"outline",onClick:n,disabled:i,className:"px-6",children:"Cancel"}),(0,l.jsx)(h.Z,{type:"submit",disabled:i,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6",children:i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),s?"Updating...":"Creating..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.mW3,{className:"w-4 h-4 mr-2"}),s?"Update Student":"Create Student"]})})]})]})},StudentDetails=e=>{let{student:s,onEdit:t,onStatusUpdate:a,onDelete:r,isSubmitting:n}=e;return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4 pb-6 border-b border-gray-200",children:[(0,l.jsx)(StudentAvatar,{firstName:s.first_name,lastName:s.last_name,email:s.email}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("h3",{className:"text-2xl font-bold text-gray-900",children:[s.first_name," ",s.last_name]}),(0,l.jsxs)("p",{className:"text-gray-600 flex items-center mt-1",children:[(0,l.jsx)(c.Imn,{className:"w-4 h-4 mr-2"}),s.email]}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(StatusBadge,{status:s.status})})]}),(0,l.jsx)("div",{className:"flex space-x-2",children:(0,l.jsxs)(h.Z,{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,l.jsx)(c.IYd,{className:"w-4 h-4 mr-2"}),"Edit"]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Student ID"}),(0,l.jsx)("p",{className:"text-gray-900 font-mono",children:s.student_id||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,l.jsx)("p",{className:"text-gray-900",children:s.phone||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Gender"}),(0,l.jsx)("p",{className:"text-gray-900 capitalize",children:s.gender||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date of Birth"}),(0,l.jsx)("p",{className:"text-gray-900",children:s.date_of_birth||"N/A"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Academic Information"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Department"}),(0,l.jsx)("p",{className:"text-gray-900",children:s.department_name||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Enrollment Year"}),(0,l.jsx)("p",{className:"text-gray-900",children:s.enrollment_year||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Current Year"}),(0,l.jsx)("p",{className:"text-gray-900",children:s.current_year||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Enrollment Date"}),(0,l.jsx)("p",{className:"text-gray-900",children:s.enrollment_date||"N/A"})]})]})]})]}),s.address&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Address"}),(0,l.jsx)("p",{className:"text-gray-900 mt-1",children:s.address})]}),(0,l.jsxs)("div",{className:"pt-6 border-t border-gray-200",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3",children:["active"!==s.status&&(0,l.jsxs)(h.Z,{onClick:()=>a(s.id,"active"),disabled:n,className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,l.jsx)(c.tMu,{className:"w-4 h-4 mr-2"}),"Activate"]}),"suspended"!==s.status&&(0,l.jsxs)(h.Z,{onClick:()=>a(s.id,"suspended"),disabled:n,className:"bg-yellow-600 hover:bg-yellow-700 text-white",children:[(0,l.jsx)(c.pBC,{className:"w-4 h-4 mr-2"}),"Suspend"]}),"inactive"!==s.status&&(0,l.jsxs)(h.Z,{onClick:()=>a(s.id,"inactive"),disabled:n,variant:"outline",className:"border-gray-300 text-gray-600 hover:bg-gray-50",children:[(0,l.jsx)(c.pBC,{className:"w-4 h-4 mr-2"}),"Deactivate"]}),(0,l.jsxs)(h.Z,{onClick:()=>r(s.id),disabled:n,variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",children:[(0,l.jsx)(c.Ybf,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}}},function(e){e.O(0,[1216,8592,2888,179],function(){return e(e.s=8314)}),_N_E=e.O()}]);
"use strict";(()=>{var e={};e.id=2837,e.ids=[2837,2888,660],e.modules={695:(e,s,t)=>{t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{config:()=>p,default:()=>x,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>u,reportWebVitals:()=>j,routeModule:()=>_,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>b});var a=t(7093),l=t(5244),i=t(1323),c=t(9209),d=t.n(c),n=t(8397),o=t(3189),m=e([n,o]);[n,o]=m.then?(await m)():m;let x=(0,i.l)(o,"default"),u=(0,i.l)(o,"getStaticProps"),h=(0,i.l)(o,"getStaticPaths"),g=(0,i.l)(o,"getServerSideProps"),p=(0,i.l)(o,"config"),j=(0,i.l)(o,"reportWebVitals"),b=(0,i.l)(o,"unstable_getStaticProps"),y=(0,i.l)(o,"unstable_getStaticPaths"),v=(0,i.l)(o,"unstable_getStaticParams"),f=(0,i.l)(o,"unstable_getServerProps"),N=(0,i.l)(o,"unstable_getServerSideProps"),_=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/teacher/timetable",pathname:"/teacher/timetable",bundlePath:"",filename:""},components:{App:n.default,Document:d()},userland:o});r()}catch(e){r(e)}})},3189:(e,s,t)=>{t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=t(997),l=t(6689),i=t(968),c=t.n(i),d=t(6761),n=t(3242),o=t(8303),m=t(4082),x=t(6422),u=t(4105),h=t(9180),g=t(9175),p=t(4549),j=t(7014),b=t(1618),y=e([d,o,m,x]);[d,o,m,x]=y.then?(await y)():y;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,d.a)(),[s,t]=(0,l.useState)({semester:"current"}),[r,i]=(0,l.useState)(!1),{data:y,loading:v,error:f,refetch:N}=(0,n.h)(()=>o.$o.getTimetable({semester:"current"===s.semester?void 0:s.semester}));if(!e||"teacher"!==e.role)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(g.Z,{variant:"error",children:"Access denied. Teacher access required."})});let handleRefresh=async()=>{i(!0);try{await N()}finally{i(!1)}},handleExport=()=>{if(!y||0===y.length){alert("No timetable data to export");return}let e=y.map(e=>({Day:getDayName(e.day_of_week),Time:`${e.start_time?.substring(0,5)} - ${e.end_time?.substring(0,5)}`,Course:`${e.course_code} - ${e.course_name}`,Room:e.room||"TBA",Semester:e.semester||"N/A"})),s=[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n"),t=new Blob([s],{type:"text/csv"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=`my-timetable-${new Date().toISOString().split("T")[0]}.csv`,a.click(),window.URL.revokeObjectURL(r)};function getDayName(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]||"Unknown"}let _={totalClasses:y?.length||0,uniqueCourses:new Set(y?.map(e=>e.course_id)).size||0,hoursPerWeek:y?.reduce((e,s)=>{let t=new Date(`1970-01-01T${s.start_time}`),r=new Date(`1970-01-01T${s.end_time}`);return e+(r-t)/(1e3*60*60)},0)||0,busyDays:new Set(y?.map(e=>e.day_of_week)).size||0},w=y?.filter(e=>{if(s.day&&e.day_of_week.toString()!==s.day)return!1;if(s.search){let t=s.search.toLowerCase();return e.course_name?.toLowerCase().includes(t)||e.course_code?.toLowerCase().includes(t)||e.room?.toLowerCase().includes(t)}return!0})||[];return(0,a.jsxs)(a.Fragment,{children:[a.jsx(c(),{children:a.jsx("title",{children:"My Timetable - Teacher Dashboard"})}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(m.default,{}),(0,a.jsxs)("div",{className:"flex",children:[a.jsx(x.default,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Timetable"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"View your teaching schedule and class assignments"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(h.Z,{variant:"outline",size:"sm",onClick:handleRefresh,loading:r,children:"\uD83D\uDD04 Refresh"}),a.jsx(h.Z,{variant:"outline",size:"sm",onClick:handleExport,disabled:!y||0===y.length,children:"\uD83D\uDCE5 Export"})]})]}),f&&(0,a.jsxs)(g.Z,{variant:"error",children:["Error loading timetable: ",f]}),a.jsx(b.QD,{filters:s,onFilterChange:e=>{t(e)},onReset:()=>{t({semester:"current"})},onExport:handleExport}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)(u.Z,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_.totalClasses}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Classes"})]}),(0,a.jsxs)(u.Z,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.uniqueCourses}),a.jsx("div",{className:"text-sm text-gray-600",children:"Courses Teaching"})]}),(0,a.jsxs)(u.Z,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:_.hoursPerWeek.toFixed(1)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Hours per Week"})]}),(0,a.jsxs)(u.Z,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:_.busyDays}),a.jsx("div",{className:"text-sm text-gray-600",children:"Teaching Days"})]})]}),y&&y.length>0&&(0,a.jsxs)(u.Z,{className:"p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quick Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Next Class"}),a.jsx("div",{className:"text-blue-600",children:"Check your schedule below"})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-green-800",children:"Most Used Room"}),(0,a.jsxs)("div",{className:"text-green-600",children:[y.reduce((e,s)=>(e[s.room]=(e[s.room]||0)+1,e),{}),Object.entries(y.reduce((e,s)=>(e[s.room]=(e[s.room]||0)+1,e),{})).sort(([,e],[,s])=>s-e)[0]?.[0]||"N/A"]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-purple-800",children:"Busiest Day"}),a.jsx("div",{className:"text-purple-600",children:Object.entries(y.reduce((e,s)=>{let t=getDayName(s.day_of_week);return e[t]=(e[t]||0)+1,e},{})).sort(([,e],[,s])=>s-e)[0]?.[0]||"N/A"})]})]})]}),v?a.jsx(u.Z,{className:"p-12",children:a.jsx("div",{className:"flex justify-center",children:a.jsx(p.Z,{size:"lg"})})}):y&&y.length>0?a.jsx(b.mG,{timetable:w,editable:!1,showActions:!1,colorScheme:"course",title:"My Teaching Schedule"}):a.jsx(u.Z,{className:"p-12 text-center",children:(0,a.jsxs)("div",{className:"text-gray-500",children:[a.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC5"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Scheduled"}),a.jsx("p",{className:"text-gray-600",children:"You don't have any classes scheduled for the selected semester. Contact your department head if this seems incorrect."})]})}),y&&y.length>0&&(0,a.jsxs)(u.Z,{children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Course Details"})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from(new Set(y.map(e=>e.course_id))).map(e=>{let s=y.find(s=>s.course_id===e),t=y.filter(s=>s.course_id===e);return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:s.course_name}),a.jsx("p",{className:"text-sm text-gray-600",children:s.course_code})]}),(0,a.jsxs)(j.Z,{variant:"primary",size:"sm",children:[t.length," ",1===t.length?"class":"classes"]})]}),a.jsx("div",{className:"space-y-1 text-sm text-gray-600",children:t.map((e,s)=>(0,a.jsxs)("div",{children:[getDayName(e.day_of_week)," ",e.start_time?.substring(0,5)," - ",e.end_time?.substring(0,5),e.room&&` â€¢ ${e.room}`]},s))})]},e)})})})]})]})})]})]})]})};r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397,9175,984,5822,9060],()=>__webpack_exec__(695));module.exports=t})();
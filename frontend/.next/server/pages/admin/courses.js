"use strict";(()=>{var e={};e.id=9625,e.ids=[9625,2888,660],e.modules={6974:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{config:()=>g,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>x,reportWebVitals:()=>j,routeModule:()=>y,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>C,unstable_getStaticProps:()=>v});var r=t(7093),l=t(5244),c=t(1323),i=t(9209),o=t.n(i),n=t(8397),d=t(239),u=e([n,d]);[n,d]=u.then?(await u)():u;let m=(0,c.l)(d,"default"),x=(0,c.l)(d,"getStaticProps"),p=(0,c.l)(d,"getStaticPaths"),h=(0,c.l)(d,"getServerSideProps"),g=(0,c.l)(d,"config"),j=(0,c.l)(d,"reportWebVitals"),v=(0,c.l)(d,"unstable_getStaticProps"),C=(0,c.l)(d,"unstable_getStaticPaths"),f=(0,c.l)(d,"unstable_getStaticParams"),b=(0,c.l)(d,"unstable_getServerProps"),S=(0,c.l)(d,"unstable_getServerSideProps"),y=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/courses",pathname:"/admin/courses",bundlePath:"",filename:""},components:{App:n.default,Document:o()},userland:d});a()}catch(e){a(e)}})},239:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=t(997),l=t(6689),c=t(1163),i=t(6761),o=t(3242),n=t(8303),d=t(4082),u=t(6422),m=t(4105),x=t(9180),p=t(5822),h=t(897),g=t(4065),j=t(1095),v=t(9175),C=t(4549),f=t(6893),b=e([i,n,d,u]);[i,n,d,u]=b.then?(await b)():b;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e,isAuthenticated:s}=(0,i.a)(),t=(0,c.useRouter)(),[a,b]=(0,l.useState)(""),[S,y]=(0,l.useState)("all"),[N,_]=(0,l.useState)("all"),[w,P]=(0,l.useState)(!1),[Z,A]=(0,l.useState)(null),[E,q]=(0,l.useState)(null),[D,k]=(0,l.useState)({name:"",course_code:"",credits:"",description:"",semester:""});(0,l.useEffect)(()=>{if(!s||e?.role!=="admin"){t.push("/dashboard");return}},[s,e,t]),(0,l.useEffect)(()=>{R()},[a,N]);let{data:F,loading:L,error:M,refetch:R}=(0,o.h)(()=>n.Sb.getAllCourses(1,50,{search:a,semester:"all"!==N?N:void 0})),T=F?.courses||[],{data:O}=(0,o.h)(()=>n.Sb.getAllDepartments?n.Sb.getAllDepartments():Promise.resolve([])),{loading:W,execute:z}=(0,o.c)(),B=T?.filter(e=>{let s=e.name?.toLowerCase().includes(a.toLowerCase())||e.course_code?.toLowerCase().includes(a.toLowerCase()),t="all"===N||e.semester===N;return s&&t})||[],handleManageCourse=async e=>{e.preventDefault();try{let e=Z?"update":"create",s={action:e,...D,id:Z?.id};await z(()=>n.Sb.manageCourses(s)),q({type:"success",message:`Course ${"create"===e?"created":"updated"} successfully!`}),P(!1),A(null),k({name:"",course_code:"",credits:"",description:"",semester:""}),R()}catch(e){q({type:"error",message:e.response?.data?.message||e.message||`Failed to ${Z?"update":"create"} course`})}},handleEditCourse=e=>{A(e),k({name:e.name||"",course_code:e.course_code||"",credits:e.credits||"",description:e.description||"",semester:e.semester||""}),P(!0)},handleDeleteCourse=async e=>{if(confirm("Are you sure you want to delete this course?"))try{await z(()=>n.Sb.manageCourses({action:"delete",id:e})),q({type:"success",message:"Course deleted successfully!"}),R()}catch(e){q({type:"error",message:e.response?.data?.message||e.message||"Failed to delete course"})}},U=[{header:"Course Code",accessor:"course_code",cell:e=>r.jsx("span",{className:"font-mono text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e||"N/A"})},{header:"Course Name",accessor:"name",cell:e=>r.jsx("div",{className:"font-medium text-gray-900",children:e||"N/A"})},{header:"Department",accessor:"department_name",cell:e=>r.jsx("div",{className:"text-sm text-gray-600",children:e||"N/A"})},{header:"Credits",accessor:"credits",cell:e=>(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(f.HR2,{className:"w-4 h-4 mr-1"}),e||0]})},{header:"Semester",accessor:"semester",cell:e=>(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(f.TCC,{className:"w-4 h-4 mr-1"}),e||"N/A"]})},{header:"Year",accessor:"year",cell:e=>r.jsx("div",{className:"text-sm text-gray-600",children:e||"N/A"})},{header:"Actions",accessor:"id",cell:(e,s)=>(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx(x.Z,{variant:"outline",size:"sm",icon:f.vPQ,onClick:()=>handleEditCourse(s),children:"Edit"}),r.jsx(x.Z,{variant:"outline",size:"sm",icon:f.Ybf,onClick:()=>handleDeleteCourse(e),className:"text-red-600 hover:text-red-700",children:"Delete"})]})}];return s&&e?.role==="admin"?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(d.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(u.default,{}),(0,r.jsxs)("main",{className:"flex-1 p-6",children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[r.jsx(f.hbr,{className:"w-8 h-8 mr-3 text-blue-600"}),"Course Management"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage academic courses and curriculum"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx(x.Z,{variant:"outline",icon:f.Bw1,onClick:R,disabled:L,children:"Refresh"}),r.jsx(x.Z,{icon:f.OvN,onClick:()=>P(!0),children:"Add Course"})]})]})}),E&&r.jsx(v.Z,{type:E.type,message:E.message,onClose:()=>q(null),className:"mb-6"}),r.jsx(m.Z,{className:"p-6 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(f.jRj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx(p.Z,{type:"text",placeholder:"Search courses...",value:a,onChange:e=>b(e.target.value),className:"pl-10"})]}),(0,r.jsxs)(h.Z,{value:N,onChange:e=>_(e.target.value),children:[r.jsx("option",{value:"all",children:"All Semesters"}),r.jsx("option",{value:"Fall 2024",children:"Fall 2024"}),r.jsx("option",{value:"Spring 2024",children:"Spring 2024"}),r.jsx("option",{value:"Summer 2024",children:"Summer 2024"}),r.jsx("option",{value:"Fall 2023",children:"Fall 2023"}),r.jsx("option",{value:"Spring 2023",children:"Spring 2023"})]})]})}),r.jsx(m.Z,{className:"overflow-hidden",children:L?(0,r.jsxs)("div",{className:"p-8 text-center",children:[r.jsx(C.Z,{}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Loading courses..."})]}):M?(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsxs)("p",{className:"text-red-600",children:["Error loading courses: ",M]}),r.jsx(x.Z,{variant:"outline",onClick:R,className:"mt-4",children:"Try Again"})]}):r.jsx(g.Z,{columns:U,data:B,emptyMessage:"No courses found. Click 'Add Course' to create your first course."})}),r.jsx(j.Z,{isOpen:w,onClose:()=>{P(!1),A(null),k({name:"",course_code:"",credits:"",description:"",semester:""})},title:Z?"Edit Course":"Create New Course",children:(0,r.jsxs)("form",{onSubmit:handleManageCourse,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(p.Z,{label:"Course Name",type:"text",value:D.name,onChange:e=>k({...D,name:e.target.value}),required:!0,placeholder:"e.g., Data Structures"}),r.jsx(p.Z,{label:"Course Code",type:"text",value:D.course_code,onChange:e=>k({...D,course_code:e.target.value}),required:!0,placeholder:"e.g., CS201"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(p.Z,{label:"Credits",type:"number",value:D.credits,onChange:e=>k({...D,credits:e.target.value}),required:!0,min:"1",max:"6"}),r.jsx(p.Z,{label:"Semester",type:"text",value:D.semester,onChange:e=>k({...D,semester:e.target.value}),placeholder:"e.g., Fall 2024"})]}),r.jsx(p.Z,{label:"Description",type:"textarea",value:D.description,onChange:e=>k({...D,description:e.target.value}),placeholder:"Course description...",rows:3}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(x.Z,{type:"button",variant:"outline",onClick:()=>{P(!1),A(null)},children:"Cancel"}),(0,r.jsxs)(x.Z,{type:"submit",loading:W,children:[Z?"Update":"Create"," Course"]})]})]})})]})]})]}):r.jsx(C.Z,{})};a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397,9175,984,5822,897,1095,4065],()=>__webpack_exec__(6974));module.exports=t})();
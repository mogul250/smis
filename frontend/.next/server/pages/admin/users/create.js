"use strict";(()=>{var e={};e.id=284,e.ids=[284,2888,660],e.modules={2913:(e,a,s)=>{s.a(e,async(e,t)=>{try{s.r(a),s.d(a,{config:()=>g,default:()=>u,getServerSideProps:()=>x,getStaticPaths:()=>p,getStaticProps:()=>h,reportWebVitals:()=>f,routeModule:()=>S,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>b});var r=s(7093),l=s(5244),i=s(1323),n=s(9209),d=s.n(n),o=s(8397),m=s(4741),c=e([o,m]);[o,m]=c.then?(await c)():c;let u=(0,i.l)(m,"default"),h=(0,i.l)(m,"getStaticProps"),p=(0,i.l)(m,"getStaticPaths"),x=(0,i.l)(m,"getServerSideProps"),g=(0,i.l)(m,"config"),f=(0,i.l)(m,"reportWebVitals"),b=(0,i.l)(m,"unstable_getStaticProps"),v=(0,i.l)(m,"unstable_getStaticPaths"),j=(0,i.l)(m,"unstable_getStaticParams"),N=(0,i.l)(m,"unstable_getServerProps"),w=(0,i.l)(m,"unstable_getServerSideProps"),S=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/users/create",pathname:"/admin/users/create",bundlePath:"",filename:""},components:{App:o.default,Document:d()},userland:m});t()}catch(e){t(e)}})},6761:(e,a,s)=>{s.a(e,async(e,t)=>{try{s.d(a,{a:()=>useAuth});var r=s(6689),l=s(8786),i=e([l]);l=(i.then?(await i)():i)[0];let useAuth=()=>{let e=(0,r.useContext)(l.ZP);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};t()}catch(e){t(e)}})},4741:(e,a,s)=>{s.a(e,async(e,t)=>{try{s.r(a),s.d(a,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=s(997),l=s(6689),i=s(1163),n=s(6761),d=s(8303),o=s(4082),m=s(6422),c=s(9180),u=s(4105),h=s(5822),p=s(897),x=s(4549),g=s(6893),f=e([n,d,o,m]);[n,d,o,m]=f.then?(await f)():f;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e,isAuthenticated:a}=(0,n.a)(),s=(0,i.useRouter)(),[t,f]=(0,l.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"student",departmentId:"",status:"active"}),[b,v]=(0,l.useState)([]),[j,N]=(0,l.useState)(!0),[w,S]=(0,l.useState)(!1),[P,y]=(0,l.useState)(null),[_,C]=(0,l.useState)(null),[q,I]=(0,l.useState)({});(0,l.useEffect)(()=>{if(!a||e?.role!=="admin"){s.push("/dashboard");return}},[a,e,s]),(0,l.useEffect)(()=>{a&&e?.role==="admin"&&fetchDepartments()},[a,e]);let fetchDepartments=async()=>{try{N(!0);let e=await d.Sb.getAllDepartments();v(e)}catch(e){y("Failed to load departments. Please try again.")}finally{N(!1)}},handleInputChange=e=>{let{name:a,value:s}=e.target;f(e=>({...e,[a]:s})),q[a]&&I(e=>({...e,[a]:null}))},validateForm=()=>{let e={};return t.firstName.trim()||(e.firstName="First name is required"),t.lastName.trim()||(e.lastName="Last name is required"),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(e.email="Email is invalid"):e.email="Email is required",t.password?t.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",t.password!==t.confirmPassword&&(e.confirmPassword="Passwords do not match"),t.role||(e.role="Role is required"),I(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm())try{S(!0),y(null);let e={firstName:t.firstName.trim(),lastName:t.lastName.trim(),email:t.email.trim().toLowerCase(),password:t.password,role:t.role,departmentId:t.departmentId||null,status:t.status};await d.Sb.createUser(e),C({type:"success",text:"User created successfully!"}),setTimeout(()=>{s.push("/admin/users")},2e3)}catch(e){y(e.message||"Failed to create user. Please try again.")}finally{S(!1)}};return a&&e?.role==="admin"?j?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(o.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(m.default,{}),r.jsx("main",{className:"flex-1 p-6 flex justify-center items-center",children:r.jsx(x.Z,{size:"lg"})})]})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(o.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(m.default,{}),r.jsx("main",{className:"flex-1 p-6",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(c.Z,{variant:"outline",onClick:()=>s.push("/admin/users"),icon:g.Ao2,className:"mr-4",children:"Back"}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New User"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Add a new user to the system"})]})]})})}),_&&r.jsx("div",{className:`mb-6 p-4 rounded-lg border-l-4 ${"success"===_.type?"bg-green-50 border-green-400 text-green-800":"bg-red-50 border-red-400 text-red-800"}`,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(g.tMu,{className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"font-medium",children:_.text})]})}),P&&r.jsx("div",{className:"mb-6 p-4 rounded-lg border-l-4 bg-red-50 border-red-400 text-red-800",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(g.fzv,{className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"font-medium",children:P})]})}),r.jsx(u.Z,{children:r.jsx("div",{className:"p-6",children:(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(h.Z,{label:"First Name",name:"firstName",value:t.firstName,onChange:handleInputChange,error:q.firstName,required:!0,icon:g.fzv}),r.jsx(h.Z,{label:"Last Name",name:"lastName",value:t.lastName,onChange:handleInputChange,error:q.lastName,required:!0,icon:g.fzv})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(h.Z,{label:"Email Address",name:"email",type:"email",value:t.email,onChange:handleInputChange,error:q.email,required:!0,icon:g.Imn}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(h.Z,{label:"Password",name:"password",type:"password",value:t.password,onChange:handleInputChange,error:q.password,required:!0,icon:g.UIZ}),r.jsx(h.Z,{label:"Confirm Password",name:"confirmPassword",type:"password",value:t.confirmPassword,onChange:handleInputChange,error:q.confirmPassword,required:!0,icon:g.UIZ})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Role and Department"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(p.Z,{label:"Role",name:"role",value:t.role,onChange:handleInputChange,options:[{value:"student",label:"Student"},{value:"teacher",label:"Teacher"},{value:"hod",label:"Head of Department"},{value:"finance",label:"Finance Officer"},{value:"admin",label:"Administrator"}],error:q.role,required:!0}),r.jsx(p.Z,{label:"Department",name:"departmentId",value:t.departmentId,onChange:handleInputChange,options:[{value:"",label:"Select Department (Optional)"},...b.map(e=>({value:e.id.toString(),label:e.name}))]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Status"}),r.jsx(p.Z,{label:"Status",name:"status",value:t.status,onChange:handleInputChange,options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"pending",label:"Pending"}],required:!0})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r.jsx(c.Z,{type:"button",variant:"outline",onClick:()=>s.push("/admin/users"),disabled:w,children:"Cancel"}),r.jsx(c.Z,{type:"submit",variant:"primary",icon:g.mW3,disabled:w,loading:w,children:w?"Creating User...":"Create User"})]})]})})})]})})]})]}):null};t()}catch(e){t(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),s=a.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397,5822,897],()=>__webpack_exec__(2913));module.exports=s})();
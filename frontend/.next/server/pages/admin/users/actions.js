"use strict";(()=>{var e={};e.id=3593,e.ids=[3593,2888,660],e.modules={6410:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{config:()=>p,default:()=>u,getServerSideProps:()=>j,getStaticPaths:()=>h,getStaticProps:()=>o,reportWebVitals:()=>g,routeModule:()=>w,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>N,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>f});var r=t(7093),l=t(5244),i=t(1323),d=t(9209),c=t.n(d),n=t(8397),x=t(5443),m=e([n,x]);[n,x]=m.then?(await m)():m;let u=(0,i.l)(x,"default"),o=(0,i.l)(x,"getStaticProps"),h=(0,i.l)(x,"getStaticPaths"),j=(0,i.l)(x,"getServerSideProps"),p=(0,i.l)(x,"config"),g=(0,i.l)(x,"reportWebVitals"),f=(0,i.l)(x,"unstable_getStaticProps"),v=(0,i.l)(x,"unstable_getStaticPaths"),N=(0,i.l)(x,"unstable_getStaticParams"),b=(0,i.l)(x,"unstable_getServerProps"),y=(0,i.l)(x,"unstable_getServerSideProps"),w=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/users/actions",pathname:"/admin/users/actions",bundlePath:"",filename:""},components:{App:n.default,Document:c()},userland:x});a()}catch(e){a(e)}})},6761:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.d(s,{a:()=>useAuth});var r=t(6689),l=t(8786),i=e([l]);l=(i.then?(await i)():i)[0];let useAuth=()=>{let e=(0,r.useContext)(l.ZP);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};a()}catch(e){a(e)}})},5443:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=t(997),l=t(6689),i=t(1163),d=t(6761),c=t(8303),n=t(4082),x=t(6422),m=t(9180),u=t(4105),o=t(4549),h=t(6893),j=e([d,c,n,x]);[d,c,n,x]=j.then?(await j)():j;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e,isAuthenticated:s}=(0,d.a)(),t=(0,i.useRouter)(),{userId:a,action:j}=t.query,[p,g]=(0,l.useState)(null),[f,v]=(0,l.useState)(!0),[N,b]=(0,l.useState)(!1),[y,w]=(0,l.useState)(null),[S,_]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(!s||e?.role!=="admin"){t.push("/dashboard");return}},[s,e,t]),(0,l.useEffect)(()=>{a&&s&&e?.role==="admin"&&fetchUser()},[a,s,e]);let fetchUser=async()=>{try{v(!0),w(null);let e=await c.Sb.getUserById(parseInt(a));g(e)}catch(e){w("Failed to load user data. Please try again.")}finally{v(!1)}},handleStatusUpdate=async e=>{try{b(!0),await c.Sb.updateUserStatus(parseInt(a),e),_({type:"success",text:`User status updated to ${e}`}),await fetchUser(),setTimeout(()=>_(null),3e3)}catch(e){_({type:"error",text:`Failed to update status: ${e.message}`}),setTimeout(()=>_(null),3e3)}finally{b(!1)}},handleDeleteUser=async()=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{b(!0),await c.Sb.deleteUser(parseInt(a)),_({type:"success",text:"User deleted successfully"}),setTimeout(()=>{t.push("/admin/users")},2e3)}catch(e){_({type:"error",text:`Failed to delete user: ${e.message}`}),setTimeout(()=>_(null),3e3)}finally{b(!1)}};return s&&e?.role==="admin"?f?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(n.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(x.default,{}),r.jsx("main",{className:"flex-1 p-6 flex justify-center items-center",children:r.jsx(o.Z,{size:"lg"})})]})]}):y?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(n.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(x.default,{}),r.jsx("main",{className:"flex-1 p-6",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-red-500 mr-3",children:r.jsx(h.fzv,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Error Loading User"}),r.jsx("p",{className:"text-red-600 mt-1",children:y})]})]}),r.jsx("div",{className:"mt-4",children:r.jsx(m.Z,{variant:"outline",onClick:()=>t.push("/admin/users"),icon:h.Ao2,children:"Back to Users"})})]})})})]})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(n.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(x.default,{}),r.jsx("main",{className:"flex-1 p-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(m.Z,{variant:"outline",onClick:()=>t.push("/admin/users"),icon:h.Ao2,className:"mr-4",children:"Back"}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Actions"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user account and permissions"})]})]})})}),S&&r.jsx("div",{className:`mb-6 p-4 rounded-lg border-l-4 ${"success"===S.type?"bg-green-50 border-green-400 text-green-800":"bg-red-50 border-red-400 text-red-800"}`,children:(0,r.jsxs)("div",{className:"flex items-center",children:["success"===S.type?r.jsx(h.tMu,{className:"w-5 h-5 mr-2"}):r.jsx(h.pBC,{className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"font-medium",children:S.text})]})}),p&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(u.Z,{className:"mb-6",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(h.fzv,{className:"w-8 h-8 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:[p.first_name," ",p.last_name]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center text-gray-600",children:[r.jsx(h.Imn,{className:"w-4 h-4 mr-1"}),p.email]}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${{admin:"bg-red-100 text-red-800",teacher:"bg-blue-100 text-blue-800",student:"bg-green-100 text-green-800",hod:"bg-purple-100 text-purple-800",finance:"bg-orange-100 text-orange-800"}[p.role]||"bg-gray-100 text-gray-800"}`,children:p.role?.toUpperCase()}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-yellow-100 text-yellow-800",pending:"bg-blue-100 text-blue-800"}[p.status]||"bg-gray-100 text-gray-800"}`,children:p.status?.toUpperCase()||"ACTIVE"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Account Information"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"User ID"}),r.jsx("p",{className:"text-gray-900",children:p.id})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),r.jsx("p",{className:"text-gray-900",children:p.email})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),r.jsx("p",{className:"text-gray-900 capitalize",children:p.role})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Additional Details"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Department"}),r.jsx("p",{className:"text-gray-900",children:p.department_name||"N/A"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Created"}),r.jsx("p",{className:"text-gray-900",children:p.created_at?new Date(p.created_at).toLocaleDateString():"N/A"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),r.jsx("p",{className:"text-gray-900 capitalize",children:p.status||"Active"})]})]})]})]})]})}),r.jsx(u.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Available Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(m.Z,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>t.push(`/admin/users/edit?userId=${a}`),disabled:N,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h.IYd,{className:"w-5 h-5 mr-3 text-blue-600"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"Edit User"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Update user information"})]})]})}),"active"!==p.status&&r.jsx(m.Z,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>handleStatusUpdate("active"),disabled:N,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h.tMu,{className:"w-5 h-5 mr-3 text-green-600"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"Activate User"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Enable user account"})]})]})}),"suspended"!==p.status&&r.jsx(m.Z,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>handleStatusUpdate("suspended"),disabled:N,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h.pBC,{className:"w-5 h-5 mr-3 text-yellow-600"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"Suspend User"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Temporarily disable account"})]})]})}),"inactive"!==p.status&&r.jsx(m.Z,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>handleStatusUpdate("inactive"),disabled:N,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h.pBC,{className:"w-5 h-5 mr-3 text-gray-600"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"Deactivate User"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Disable user account"})]})]})}),r.jsx(m.Z,{variant:"outline",className:"justify-start h-auto p-4 border-red-300 text-red-600 hover:bg-red-50",onClick:handleDeleteUser,disabled:N,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h.Ybf,{className:"w-5 h-5 mr-3 text-red-600"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"Delete User"}),r.jsx("div",{className:"text-sm text-red-500",children:"Permanently remove user"})]})]})})]})]})})]})]})})]})]}):null};a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397],()=>__webpack_exec__(6410));module.exports=t})();
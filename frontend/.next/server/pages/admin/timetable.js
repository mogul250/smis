"use strict";(()=>{var e={};e.id=5994,e.ids=[5994,2888,660],e.modules={8609:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>_,default:()=>u,getServerSideProps:()=>p,getStaticPaths:()=>x,getStaticProps:()=>h,reportWebVitals:()=>g,routeModule:()=>y,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>S});var r=s(7093),l=s(5244),i=s(1323),c=s(9209),d=s.n(c),o=s(8397),n=s(5906),m=e([o,n]);[o,n]=m.then?(await m)():m;let u=(0,i.l)(n,"default"),h=(0,i.l)(n,"getStaticProps"),x=(0,i.l)(n,"getStaticPaths"),p=(0,i.l)(n,"getServerSideProps"),_=(0,i.l)(n,"config"),g=(0,i.l)(n,"reportWebVitals"),S=(0,i.l)(n,"unstable_getStaticProps"),f=(0,i.l)(n,"unstable_getStaticPaths"),b=(0,i.l)(n,"unstable_getStaticParams"),j=(0,i.l)(n,"unstable_getServerProps"),v=(0,i.l)(n,"unstable_getServerSideProps"),y=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/timetable",pathname:"/admin/timetable",bundlePath:"",filename:""},components:{App:o.default,Document:d()},userland:n});a()}catch(e){a(e)}})},5906:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=s(997),l=s(6689),i=s.n(l),c=s(968),d=s.n(c),o=s(1163),n=s(6761),m=s(3242),u=s(8303),h=s(4082),x=s(6422),p=s(4105),_=s(9180),g=s(9175),S=s(4549),f=s(1618),b=e([n,u,h,x]);[n,u,h,x]=b.then?(await b)():b;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,n.a)(),t=(0,o.useRouter)(),[s,a]=(0,l.useState)({}),[c,b]=(0,l.useState)(""),[j,v]=(0,l.useState)(!1),{data:y,loading:w,error:P,refetch:N}=(0,m.h)(()=>u.Sb.getTimetable({semester:"Fall 2024"}).catch(()=>Promise.resolve([{id:1,course_id:1,course_name:"Computer Science 101",course_code:"CS101",teacher_id:2,teacher_name:"Dr. John Smith",day_of_week:1,start_time:"09:00:00",end_time:"10:30:00",class_id:1,room:"Room 101",semester:"Fall 2024"},{id:2,course_id:2,course_name:"Mathematics 201",course_code:"MATH201",teacher_id:3,teacher_name:"Prof. Jane Doe",day_of_week:2,start_time:"11:00:00",end_time:"12:30:00",class_id:1,room:"Room 102",semester:"Fall 2024"}]))),{data:C}=(0,m.h)(()=>u.Sb.getCourses().catch(e=>Promise.resolve([]))),{data:A}=(0,m.h)(()=>u.Sb.getTeachers(1,100).catch(e=>Promise.resolve([])));if(!e||"admin"!==e.role)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(g.Z,{variant:"error",children:"Access denied. Admin access required."})});let handleRefresh=async()=>{v(!0);try{await N()}finally{v(!1)}},handleAddSlot=(e={})=>{let s=new URLSearchParams;e.day&&s.append("day",e.day),e.time&&s.append("time",e.time);let a=s.toString();t.push(`/admin/timetable/create${a?`?${a}`:""}`)},handleEditSlot=e=>{t.push(`/admin/timetable/edit/${e.id}`)};i().useEffect(()=>{let{success:e}=t.query;if(e){switch(e){case"created":b("Timetable slot created successfully!");break;case"updated":b("Timetable slot updated successfully!");break;case"deleted":b("Timetable slot deleted successfully!")}t.replace("/admin/timetable",void 0,{shallow:!0}),setTimeout(()=>b(""),3e3),N()}},[t.query.success]);let T=y?.filter(e=>{if(s.semester&&e.semester!==s.semester||s.day&&e.day_of_week.toString()!==s.day||s.teacher&&e.teacher_id.toString()!==s.teacher||s.course&&e.course_id.toString()!==s.course)return!1;if(s.search){let t=s.search.toLowerCase();return e.course_name?.toLowerCase().includes(t)||e.course_code?.toLowerCase().includes(t)||e.teacher_name?.toLowerCase().includes(t)||e.room?.toLowerCase().includes(t)}return!0})||[];return(0,r.jsxs)(r.Fragment,{children:[r.jsx(d(),{children:r.jsx("title",{children:"Timetable Management - Admin Dashboard"})}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(h.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(x.default,{}),r.jsx("main",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Timetable Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage class schedules across all departments"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(_.Z,{variant:"outline",size:"sm",onClick:handleRefresh,loading:j,children:"\uD83D\uDD04 Refresh"}),r.jsx(_.Z,{onClick:()=>handleAddSlot(),children:"âž• Add Slot"})]})]}),c&&r.jsx(g.Z,{variant:"success",dismissible:!0,onDismiss:()=>b(""),children:c}),P&&(0,r.jsxs)(g.Z,{variant:"error",children:["Error loading timetable: ",P]}),r.jsx(f.QD,{filters:s,onFilterChange:e=>{a(e)},teachers:A,courses:C,showTeacherFilter:!0,showCourseFilter:!0,onReset:()=>{a({})},onExport:()=>{}}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsxs)(p.Z,{className:"p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y?.length||0}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Slots"})]}),(0,r.jsxs)(p.Z,{className:"p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:new Set(y?.map(e=>e.course_id)).size||0}),r.jsx("div",{className:"text-sm text-gray-600",children:"Courses Scheduled"})]}),(0,r.jsxs)(p.Z,{className:"p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:new Set(y?.map(e=>e.teacher_id)).size||0}),r.jsx("div",{className:"text-sm text-gray-600",children:"Teachers Assigned"})]}),(0,r.jsxs)(p.Z,{className:"p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:new Set(y?.map(e=>e.room)).size||0}),r.jsx("div",{className:"text-sm text-gray-600",children:"Rooms Used"})]})]}),w?r.jsx(p.Z,{className:"p-12",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(S.Z,{size:"lg"})})}):r.jsx(f.mG,{timetable:T,editable:!0,showActions:!0,colorScheme:"course",title:"Master Timetable",onSlotClick:handleEditSlot,onSlotEdit:handleEditSlot,onSlotDelete:handleEditSlot,onAddSlot:handleAddSlot})]})})]})]})]})};a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397,9175,984,5822,9060],()=>__webpack_exec__(8609));module.exports=s})();
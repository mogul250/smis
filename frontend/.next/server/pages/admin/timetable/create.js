"use strict";(()=>{var e={};e.id=2889,e.ids=[2889,2888,660],e.modules={3819:(e,a,l)=>{l.a(e,async(e,s)=>{try{l.r(a),l.d(a,{config:()=>g,default:()=>m,getServerSideProps:()=>b,getStaticPaths:()=>x,getStaticProps:()=>h,reportWebVitals:()=>p,routeModule:()=>S,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>f,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>_,unstable_getStaticProps:()=>v});var t=l(7093),r=l(5244),d=l(1323),i=l(9209),n=l.n(i),c=l(8397),o=l(8671),u=e([c,o]);[c,o]=u.then?(await u)():u;let m=(0,d.l)(o,"default"),h=(0,d.l)(o,"getStaticProps"),x=(0,d.l)(o,"getStaticPaths"),b=(0,d.l)(o,"getServerSideProps"),g=(0,d.l)(o,"config"),p=(0,d.l)(o,"reportWebVitals"),v=(0,d.l)(o,"unstable_getStaticProps"),_=(0,d.l)(o,"unstable_getStaticPaths"),j=(0,d.l)(o,"unstable_getStaticParams"),y=(0,d.l)(o,"unstable_getServerProps"),f=(0,d.l)(o,"unstable_getServerSideProps"),S=new t.PagesRouteModule({definition:{kind:r.x.PAGES,page:"/admin/timetable/create",pathname:"/admin/timetable/create",bundlePath:"",filename:""},components:{App:c.default,Document:n()},userland:o});s()}catch(e){s(e)}})},8671:(e,a,l)=>{l.a(e,async(e,s)=>{try{l.r(a),l.d(a,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var t=l(997),r=l(6689),d=l(1163),i=l(6761),n=l(3242),c=l(9993),o=l(6422),u=l(4082),m=l(9180),h=l(5822),x=e([i,c,o,u]);[i,c,o,u]=x.then?(await x)():x;let __WEBPACK_DEFAULT_EXPORT__=()=>{let e=(0,d.useRouter)(),{user:a}=(0,i.a)(),{day:l,time:s}=e.query,[x,b]=(0,r.useState)({course_id:"",teacher_id:"",class_id:"",day:l||"",start_time:s||"",end_time:"",room:"",semester:"Fall 2024"}),[g,p]=(0,r.useState)({}),{data:v,loading:_}=(0,n.h)(()=>c.Ho().catch(e=>[])),{data:j,loading:y}=(0,n.h)(()=>c.Os(1,100).catch(e=>({users:[]}))),{data:f,loading:S}=(0,n.h)(()=>c.k().catch(e=>[])),N=j?.users||[],{execute:C,loading:w}=(0,n.c)();if((0,r.useEffect)(()=>{l&&b(e=>({...e,day:l})),s&&b(e=>({...e,start_time:s}))},[l,s]),!a||"admin"!==a.role)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access this page."}),t.jsx(m.Z,{onClick:()=>e.push("/login"),children:"Go to Login"})]})});let handleInputChange=(e,a)=>{b(l=>({...l,[e]:a})),g[e]&&p(a=>({...a,[e]:""}))},validateForm=()=>{let e={};return x.course_id||(e.course_id="Course is required"),x.teacher_id||(e.teacher_id="Teacher is required"),x.class_id||(e.class_id="Class is required"),x.day||(e.day="Day is required"),x.start_time||(e.start_time="Start time is required"),x.end_time||(e.end_time="End time is required"),x.room||(e.room="Room is required"),x.start_time&&x.end_time&&x.start_time>=x.end_time&&(e.end_time="End time must be after start time"),p(e),0===Object.keys(e).length},handleSubmit=async a=>{if(a.preventDefault(),validateForm())try{await C(async()=>{let e=await c.TK(x);return e}),e.push("/admin/timetable?success=created")}catch(e){}},handleCancel=()=>{e.push("/admin/timetable")},P=[{value:"",label:"Select time"},{value:"08:00",label:"08:00"},{value:"09:00",label:"09:00"},{value:"10:00",label:"10:00"},{value:"11:00",label:"11:00"},{value:"12:00",label:"12:00"},{value:"13:00",label:"13:00"},{value:"14:00",label:"14:00"},{value:"15:00",label:"15:00"},{value:"16:00",label:"16:00"},{value:"17:00",label:"17:00"},{value:"18:00",label:"18:00"}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(u.default,{}),(0,t.jsxs)("div",{className:"flex",children:[t.jsx(o.default,{}),t.jsx("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[t.jsx("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Timetable Slot"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Add a new class to the timetable schedule"})]}),t.jsx(m.Z,{variant:"outline",onClick:handleCancel,children:"← Back to Timetable"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:t.jsx("div",{className:"p-6",children:(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course *"}),(0,t.jsxs)("select",{value:x.course_id,onChange:e=>handleInputChange("course_id",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.course_id?"border-red-500":"border-gray-300"}`,disabled:_,children:[t.jsx("option",{value:"",children:"Select a course"}),v&&v.length>0?v.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.course_code," - ",e.name]},e.id)):t.jsx("option",{value:"",disabled:!0,children:_?"Loading courses...":"No courses available"})]}),g.course_id&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.course_id})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher *"}),(0,t.jsxs)("select",{value:x.teacher_id,onChange:e=>handleInputChange("teacher_id",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.teacher_id?"border-red-500":"border-gray-300"}`,disabled:y,children:[t.jsx("option",{value:"",children:"Select a teacher"}),N&&N.length>0?N.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id)):t.jsx("option",{value:"",disabled:!0,children:y?"Loading teachers...":"No teachers available"})]}),g.teacher_id&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.teacher_id})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class *"}),(0,t.jsxs)("select",{value:x.class_id,onChange:e=>handleInputChange("class_id",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.class_id?"border-red-500":"border-gray-300"}`,disabled:S,children:[t.jsx("option",{value:"",children:"Select a class"}),f&&f.length>0?f.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.academic_year,")"]},e.id)):t.jsx("option",{value:"",disabled:!0,children:S?"Loading classes...":"No classes available"})]}),g.class_id&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.class_id})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Day *"}),t.jsx("select",{value:x.day,onChange:e=>handleInputChange("day",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.day?"border-red-500":"border-gray-300"}`,children:[{value:"",label:"Select a day"},{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"}].map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),g.day&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.day})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),t.jsx("select",{value:x.start_time,onChange:e=>handleInputChange("start_time",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.start_time?"border-red-500":"border-gray-300"}`,children:P.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),g.start_time&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.start_time})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time *"}),t.jsx("select",{value:x.end_time,onChange:e=>handleInputChange("end_time",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.end_time?"border-red-500":"border-gray-300"}`,children:P.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),g.end_time&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.end_time})]}),t.jsx("div",{children:t.jsx(h.Z,{label:"Room *",value:x.room,onChange:e=>handleInputChange("room",e.target.value),placeholder:"e.g., Room 101, Lab A",error:g.room})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester"}),t.jsx("select",{value:x.semester,onChange:e=>handleInputChange("semester",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"Fall 2024",label:"Fall 2024"},{value:"Spring 2025",label:"Spring 2025"},{value:"Summer 2025",label:"Summer 2025"},{value:"Fall 2025",label:"Fall 2025"}].map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]})}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[t.jsx(m.Z,{type:"button",variant:"outline",onClick:handleCancel,disabled:w,children:"Cancel"}),t.jsx(m.Z,{type:"submit",loading:w,disabled:w,children:"Create Timetable Slot"})]})]})})})]})})]})]})};s()}catch(e){s(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),l=a.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397,984,5822],()=>__webpack_exec__(3819));module.exports=l})();
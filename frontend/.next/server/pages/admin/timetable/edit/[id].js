"use strict";(()=>{var e={};e.id=3128,e.ids=[3128,2888,660],e.modules={1829:(e,a,l)=>{l.a(e,async(e,s)=>{try{l.r(a),l.d(a,{config:()=>g,default:()=>m,getServerSideProps:()=>b,getStaticPaths:()=>x,getStaticProps:()=>h,reportWebVitals:()=>p,routeModule:()=>N,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>f,unstable_getStaticParams:()=>_,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>v});var t=l(7093),r=l(5244),d=l(1323),i=l(9209),n=l.n(i),c=l(8397),o=l(1671),u=e([c,o]);[c,o]=u.then?(await u)():u;let m=(0,d.l)(o,"default"),h=(0,d.l)(o,"getStaticProps"),x=(0,d.l)(o,"getStaticPaths"),b=(0,d.l)(o,"getServerSideProps"),g=(0,d.l)(o,"config"),p=(0,d.l)(o,"reportWebVitals"),v=(0,d.l)(o,"unstable_getStaticProps"),j=(0,d.l)(o,"unstable_getStaticPaths"),_=(0,d.l)(o,"unstable_getStaticParams"),y=(0,d.l)(o,"unstable_getServerProps"),f=(0,d.l)(o,"unstable_getServerSideProps"),N=new t.PagesRouteModule({definition:{kind:r.x.PAGES,page:"/admin/timetable/edit/[id]",pathname:"/admin/timetable/edit/[id]",bundlePath:"",filename:""},components:{App:c.default,Document:n()},userland:o});s()}catch(e){s(e)}})},1671:(e,a,l)=>{l.a(e,async(e,s)=>{try{l.r(a),l.d(a,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var t=l(997),r=l(6689),d=l(1163),i=l(6761),n=l(3242),c=l(9993),o=l(6422),u=l(4082),m=l(9180),h=l(5822),x=e([i,c,o,u]);[i,c,o,u]=x.then?(await x)():x;let __WEBPACK_DEFAULT_EXPORT__=()=>{let e=(0,d.useRouter)(),{id:a}=e.query,{user:l}=(0,i.a)(),[s,x]=(0,r.useState)({course_id:"",teacher_id:"",class_id:"",day:"",start_time:"",end_time:"",room:"",semester:"Fall 2024"}),[b,g]=(0,r.useState)({}),[p,v]=(0,r.useState)(!0),{data:j,loading:_}=(0,n.h)(()=>c.Ho().catch(e=>[])),{data:y,loading:f}=(0,n.h)(()=>c.Os(1,100).catch(e=>({users:[]}))),{data:N,loading:S}=(0,n.h)(()=>c.k().catch(e=>[])),w=y?.users||[],{execute:C,loading:P}=(0,n.c)(),{execute:k,loading:q}=(0,n.c)();(0,r.useEffect)(()=>{a&&loadTimetableSlot()},[a]);let loadTimetableSlot=async()=>{try{v(!0);let e=await c.zk(a);x({course_id:e.course_id||"",teacher_id:e.teacher_id||"",class_id:e.class_id||"",day:e.day||"",start_time:e.start_time||"",end_time:e.end_time||"",room:e.room||"",semester:e.semester||"Fall 2024"})}catch(a){e.push("/admin/timetable?error=not-found")}finally{v(!1)}};if(!l||"admin"!==l.role)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access this page."}),t.jsx(m.Z,{onClick:()=>e.push("/login"),children:"Go to Login"})]})});let handleInputChange=(e,a)=>{x(l=>({...l,[e]:a})),b[e]&&g(a=>({...a,[e]:""}))},validateForm=()=>{let e={};return s.course_id||(e.course_id="Course is required"),s.teacher_id||(e.teacher_id="Teacher is required"),s.class_id||(e.class_id="Class is required"),s.day||(e.day="Day is required"),s.start_time||(e.start_time="Start time is required"),s.end_time||(e.end_time="End time is required"),s.room||(e.room="Room is required"),s.start_time&&s.end_time&&s.start_time>=s.end_time&&(e.end_time="End time must be after start time"),g(e),0===Object.keys(e).length},handleSubmit=async l=>{if(l.preventDefault(),validateForm())try{await C(async()=>{let e=await c.e3(a,s);return e}),e.push("/admin/timetable?success=updated")}catch(e){}},handleDelete=async()=>{if(confirm("Are you sure you want to delete this timetable slot? This action cannot be undone."))try{await k(async()=>{let e=await c.nE(a);return e}),e.push("/admin/timetable?success=deleted")}catch(e){}},handleCancel=()=>{e.push("/admin/timetable")},T=[{value:"",label:"Select time"},{value:"08:00",label:"08:00"},{value:"09:00",label:"09:00"},{value:"10:00",label:"10:00"},{value:"11:00",label:"11:00"},{value:"12:00",label:"12:00"},{value:"13:00",label:"13:00"},{value:"14:00",label:"14:00"},{value:"15:00",label:"15:00"},{value:"16:00",label:"16:00"},{value:"17:00",label:"17:00"},{value:"18:00",label:"18:00"}];return p?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(u.default,{}),(0,t.jsxs)("div",{className:"flex",children:[t.jsx(o.default,{}),t.jsx("main",{className:"flex-1 p-6",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})})})})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(u.default,{}),(0,t.jsxs)("div",{className:"flex",children:[t.jsx(o.default,{}),t.jsx("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[t.jsx("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Timetable Slot"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Modify or delete this timetable slot"})]}),t.jsx(m.Z,{variant:"outline",onClick:handleCancel,children:"â† Back to Timetable"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:t.jsx("div",{className:"p-6",children:(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course *"}),(0,t.jsxs)("select",{value:s.course_id,onChange:e=>handleInputChange("course_id",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.course_id?"border-red-500":"border-gray-300"}`,disabled:_,children:[t.jsx("option",{value:"",children:"Select a course"}),j&&j.length>0?j.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.course_code," - ",e.name]},e.id)):t.jsx("option",{value:"",disabled:!0,children:_?"Loading courses...":"No courses available"})]}),b.course_id&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.course_id})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher *"}),(0,t.jsxs)("select",{value:s.teacher_id,onChange:e=>handleInputChange("teacher_id",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.teacher_id?"border-red-500":"border-gray-300"}`,disabled:f,children:[t.jsx("option",{value:"",children:"Select a teacher"}),w&&w.length>0?w.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id)):t.jsx("option",{value:"",disabled:!0,children:f?"Loading teachers...":"No teachers available"})]}),b.teacher_id&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.teacher_id})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class *"}),(0,t.jsxs)("select",{value:s.class_id,onChange:e=>handleInputChange("class_id",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.class_id?"border-red-500":"border-gray-300"}`,disabled:S,children:[t.jsx("option",{value:"",children:"Select a class"}),N&&N.length>0?N.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.academic_year,")"]},e.id)):t.jsx("option",{value:"",disabled:!0,children:S?"Loading classes...":"No classes available"})]}),b.class_id&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.class_id})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Day *"}),t.jsx("select",{value:s.day,onChange:e=>handleInputChange("day",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.day?"border-red-500":"border-gray-300"}`,children:[{value:"",label:"Select a day"},{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"}].map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),b.day&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.day})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),t.jsx("select",{value:s.start_time,onChange:e=>handleInputChange("start_time",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.start_time?"border-red-500":"border-gray-300"}`,children:T.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),b.start_time&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.start_time})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time *"}),t.jsx("select",{value:s.end_time,onChange:e=>handleInputChange("end_time",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.end_time?"border-red-500":"border-gray-300"}`,children:T.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),b.end_time&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.end_time})]}),t.jsx("div",{children:t.jsx(h.Z,{label:"Room *",value:s.room,onChange:e=>handleInputChange("room",e.target.value),placeholder:"e.g., Room 101, Lab A",error:b.room})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester"}),t.jsx("select",{value:s.semester,onChange:e=>handleInputChange("semester",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"Fall 2024",label:"Fall 2024"},{value:"Spring 2025",label:"Spring 2025"},{value:"Summer 2025",label:"Summer 2025"},{value:"Fall 2025",label:"Fall 2025"}].map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]})}),(0,t.jsxs)("div",{className:"flex justify-between pt-6 border-t border-gray-200",children:[t.jsx(m.Z,{type:"button",variant:"danger",onClick:handleDelete,loading:q,disabled:P||q,children:"Delete Slot"}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[t.jsx(m.Z,{type:"button",variant:"outline",onClick:handleCancel,disabled:P||q,children:"Cancel"}),t.jsx(m.Z,{type:"submit",loading:P,disabled:P||q,children:"Update Slot"})]})]})]})})})]})})]})]})};s()}catch(e){s(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var a=require("../../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),l=a.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397,984,5822],()=>__webpack_exec__(1829));module.exports=l})();
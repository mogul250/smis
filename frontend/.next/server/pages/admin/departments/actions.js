"use strict";(()=>{var e={};e.id=3785,e.ids=[3785,2888,660],e.modules={3974:()=>{},8253:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{config:()=>j,default:()=>o,getServerSideProps:()=>p,getStaticPaths:()=>u,getStaticProps:()=>h,reportWebVitals:()=>f,routeModule:()=>_,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>g});var r=t(7093),l=t(5244),i=t(1323),n=t(9209),d=t.n(n),c=t(8397),m=t(3680),x=e([c,m]);[c,m]=x.then?(await x)():x;let o=(0,i.l)(m,"default"),h=(0,i.l)(m,"getStaticProps"),u=(0,i.l)(m,"getStaticPaths"),p=(0,i.l)(m,"getServerSideProps"),j=(0,i.l)(m,"config"),f=(0,i.l)(m,"reportWebVitals"),g=(0,i.l)(m,"unstable_getStaticProps"),N=(0,i.l)(m,"unstable_getStaticPaths"),v=(0,i.l)(m,"unstable_getStaticParams"),b=(0,i.l)(m,"unstable_getServerProps"),y=(0,i.l)(m,"unstable_getServerSideProps"),_=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/departments/actions",pathname:"/admin/departments/actions",bundlePath:"",filename:""},components:{App:c.default,Document:d()},userland:m});a()}catch(e){a(e)}})},6761:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.d(s,{a:()=>useAuth});var r=t(6689),l=t(8786),i=e([l]);l=(i.then?(await i)():i)[0];let useAuth=()=>{let e=(0,r.useContext)(l.ZP);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};a()}catch(e){a(e)}})},3680:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=t(997),l=t(6689),i=t(1163),n=t(6761),d=t(8303),c=t(4082),m=t(6422),x=t(9180),o=t(4105),h=t(4549),u=t(3974),p=t(6893),j=e([n,d,c,m]);[n,d,c,m]=j.then?(await j)():j;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e,isAuthenticated:s}=(0,n.a)(),t=(0,i.useRouter)(),{departmentId:a,action:j}=t.query,[f,g]=(0,l.useState)(null),[N,v]=(0,l.useState)(!0),[b,y]=(0,l.useState)(!1),[_,S]=(0,l.useState)(null),[w,D]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(!s||e?.role!=="admin"){t.push("/dashboard");return}},[s,e,t]),(0,l.useEffect)(()=>{a&&s&&e?.role==="admin"&&fetchDepartment()},[a,s,e]);let fetchDepartment=async()=>{try{v(!0),S(null);let e=await d.Sb.getDepartmentById(parseInt(a));g(e)}catch(e){S("Failed to load department data. Please try again.")}finally{v(!1)}},handleDeleteDepartment=async()=>{if(window.confirm("Are you sure you want to delete this department? This action cannot be undone."))try{y(!0),await d.Sb.deleteDepartment(parseInt(a)),D({type:"success",text:"Department deleted successfully"}),setTimeout(()=>{t.push("/admin/departments")},2e3)}catch(e){D({type:"error",text:`Failed to delete department: ${e.message}`}),setTimeout(()=>D(null),3e3)}finally{y(!1)}};return s&&e?.role==="admin"?N?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(c.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(m.default,{}),r.jsx("main",{className:"flex-1 p-6 flex justify-center items-center",children:r.jsx(h.Z,{size:"lg"})})]})]}):_?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(c.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(m.default,{}),r.jsx("main",{className:"flex-1 p-6",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-red-500 mr-3",children:r.jsx(u.FiBuilding,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Error Loading Department"}),r.jsx("p",{className:"text-red-600 mt-1",children:_})]})]}),r.jsx("div",{className:"mt-4",children:r.jsx(x.Z,{variant:"outline",onClick:()=>t.push("/admin/departments"),icon:p.Ao2,children:"Back to Departments"})})]})})})]})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(c.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(m.default,{}),r.jsx("main",{className:"flex-1 p-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(x.Z,{variant:"outline",onClick:()=>t.push("/admin/departments"),icon:p.Ao2,className:"mr-4",children:"Back"}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Department Actions"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage department information and settings"})]})]})})}),w&&r.jsx("div",{className:`mb-6 p-4 rounded-lg border-l-4 ${"success"===w.type?"bg-green-50 border-green-400 text-green-800":"bg-red-50 border-red-400 text-red-800"}`,children:(0,r.jsxs)("div",{className:"flex items-center",children:["success"===w.type?r.jsx(u.FiBuilding,{className:"w-5 h-5 mr-2"}):r.jsx(p.H33,{className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"font-medium",children:w.text})]})}),f&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(o.Z,{className:"mb-6",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(u.FiBuilding,{className:"w-8 h-8 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:f.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Code: ",f.code]}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${"active"===f.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:f.status?.toUpperCase()||"ACTIVE"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Department Information"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Department ID"}),r.jsx("p",{className:"text-gray-900",children:f.id})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Department Name"}),r.jsx("p",{className:"text-gray-900",children:f.name})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Department Code"}),r.jsx("p",{className:"text-gray-900",children:f.code})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),r.jsx("p",{className:"text-gray-900",children:f.description||"No description available"})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Statistics"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Head of Department"}),r.jsx("p",{className:"text-gray-900",children:f.hod_name||"Not assigned"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Total Staff"}),r.jsx("p",{className:"text-gray-900",children:f.staff_count||0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Total Students"}),r.jsx("p",{className:"text-gray-900",children:f.student_count||0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Created"}),r.jsx("p",{className:"text-gray-900",children:f.created_at?new Date(f.created_at).toLocaleDateString():"N/A"})]})]})]})]})]})}),r.jsx(o.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Available Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(x.Z,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>t.push(`/admin/departments/edit?departmentId=${a}`),disabled:b,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.IYd,{className:"w-5 h-5 mr-3 text-blue-600"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"Edit Department"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Update department information"})]})]})}),r.jsx(x.Z,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>t.push(`/admin/departments/${a}/staff`),disabled:b,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.WY8,{className:"w-5 h-5 mr-3 text-green-600"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"View Staff"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Manage department staff"})]})]})}),r.jsx(x.Z,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>t.push(`/admin/departments/${a}/students`),disabled:b,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.fzv,{className:"w-5 h-5 mr-3 text-purple-600"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"View Students"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Manage department students"})]})]})}),r.jsx(x.Z,{variant:"outline",className:"justify-start h-auto p-4 border-red-300 text-red-600 hover:bg-red-50",onClick:handleDeleteDepartment,disabled:b,children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.Ybf,{className:"w-5 h-5 mr-3 text-red-600"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"Delete Department"}),r.jsx("div",{className:"text-sm text-red-500",children:"Permanently remove department"})]})]})})]})]})})]})]})})]})]}):null};a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397],()=>__webpack_exec__(8253));module.exports=t})();
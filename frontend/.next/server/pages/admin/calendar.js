"use strict";(()=>{var e={};e.id=3996,e.ids=[3996,2888,660],e.modules={354:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>h,default:()=>m,getServerSideProps:()=>p,getStaticPaths:()=>v,getStaticProps:()=>u,reportWebVitals:()=>g,routeModule:()=>_,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>y});var l=a(7093),n=a(5244),r=a(1323),i=a(9209),d=a.n(i),c=a(8397),o=a(444),x=e([c,o]);[c,o]=x.then?(await x)():x;let m=(0,r.l)(o,"default"),u=(0,r.l)(o,"getStaticProps"),v=(0,r.l)(o,"getStaticPaths"),p=(0,r.l)(o,"getServerSideProps"),h=(0,r.l)(o,"config"),g=(0,r.l)(o,"reportWebVitals"),y=(0,r.l)(o,"unstable_getStaticProps"),b=(0,r.l)(o,"unstable_getStaticPaths"),j=(0,r.l)(o,"unstable_getStaticParams"),f=(0,r.l)(o,"unstable_getServerProps"),N=(0,r.l)(o,"unstable_getServerSideProps"),_=new l.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/admin/calendar",pathname:"/admin/calendar",bundlePath:"",filename:""},components:{App:c.default,Document:d()},userland:o});s()}catch(e){s(e)}})},444:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var l=a(997),n=a(6689),r=a(6761),i=a(3242),d=a(3240),c=a(4082),o=a(6422),x=a(4105),m=a(9180),u=a(5822),v=a(9175),p=a(4549),h=a(6893),g=e([r,d,c,o]);[r,d,c,o]=g.then?(await g)():g;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,r.a)(),[t,a]=(0,n.useState)(!1),[s,g]=(0,n.useState)(null),[y,b]=(0,n.useState)(null),[j,f]=(0,n.useState)({eventName:"",eventType:"holiday",startDate:"",endDate:"",description:""}),{data:N,loading:_,refetch:S}=(0,i.h)(()=>d.Sb.getAcademicCalendar()),{loading:E,execute:w}=(0,i.c)();if(!e||"admin"!==e.role)return l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),l.jsx("p",{className:"text-gray-600",children:"Admin access required."})]})});let D=[{value:"holiday",label:"Holiday",color:"bg-red-100 text-red-800"},{value:"exam",label:"Examination",color:"bg-blue-100 text-blue-800"},{value:"semester_start",label:"Semester Start",color:"bg-green-100 text-green-800"},{value:"semester_end",label:"Semester End",color:"bg-yellow-100 text-yellow-800"},{value:"announcement",label:"Announcement",color:"bg-purple-100 text-purple-800"},{value:"meeting",label:"Meeting",color:"bg-gray-100 text-gray-800"}],handleOpenModal=(e=null)=>{e?(g(e),f({eventName:e.event_name||"",eventType:e.event_type||"holiday",startDate:e.start_date||"",endDate:e.end_date||"",description:e.description||""})):(g(null),f({eventName:"",eventType:"holiday",startDate:"",endDate:"",description:""})),a(!0)},handleCloseModal=()=>{a(!1),g(null),f({eventName:"",eventType:"holiday",startDate:"",endDate:"",description:""})},handleSubmit=async e=>{e.preventDefault();try{let e={eventName:j.eventName,eventType:j.eventType,eventDate:j.startDate,endDate:j.endDate,description:j.description};s?(await w(()=>d.Sb.updateAcademicEvent(s.id,e)),b({type:"success",text:"Event updated successfully!"})):(await w(()=>d.Sb.manageAcademicCalendar(e)),b({type:"success",text:"Event created successfully!"})),S(),handleCloseModal(),setTimeout(()=>b(null),5e3)}catch(e){b({type:"error",text:e.response?.data?.message||"Failed to save event"})}},handleDeleteEvent=async e=>{if(window.confirm("Are you sure you want to delete this event?"))try{await d.Sb.deleteAcademicEvent(e),b({type:"success",text:"Event deleted successfully!"}),S(),setTimeout(()=>b(null),5e3)}catch(e){b({type:"error",text:e.response?.data?.message||"Failed to delete event"})}},getEventTypeColor=e=>{let t=D.find(t=>t.value===e);return t?t.color:"bg-gray-100 text-gray-800"},getEventTypeLabel=e=>{let t=D.find(t=>t.value===e);return t?t.label:e};return _?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(c.Z,{}),(0,l.jsxs)("div",{className:"flex",children:[l.jsx(o.Z,{}),l.jsx("main",{className:"flex-1 p-6 flex justify-center items-center",children:l.jsx(p.Z,{size:"lg"})})]})]}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(c.Z,{}),(0,l.jsxs)("div",{className:"flex",children:[l.jsx(o.Z,{}),l.jsx("main",{className:"flex-1 p-6",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Academic Calendar"}),l.jsx("p",{className:"text-gray-600",children:"Manage academic events, holidays, and important dates"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[l.jsx(m.Z,{variant:"outline",size:"sm",icon:h.Bw1,onClick:S,children:"Refresh"}),l.jsx(m.Z,{variant:"primary",icon:h.OvN,onClick:()=>handleOpenModal(),children:"Add Event"})]})]}),y&&l.jsx(v.Z,{variant:y.type,dismissible:!0,onDismiss:()=>b(null),children:y.text}),l.jsx(x.Z,{children:(0,l.jsxs)("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upcoming Events"}),N&&N.length>0?l.jsx("div",{className:"space-y-4",children:N.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(h.vlc,{className:"w-6 h-6 text-blue-600"})}),(0,l.jsxs)("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:e.event_name}),l.jsx("p",{className:"text-sm text-gray-600",children:e.description}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[l.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${getEventTypeColor(e.event_type)}`,children:getEventTypeLabel(e.event_type)}),(0,l.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[l.jsx(h.TCC,{className:"w-4 h-4 mr-1"}),new Date(e.start_date).toLocaleDateString(),e.end_date&&e.end_date!==e.start_date&&(0,l.jsxs)("span",{children:[" - ",new Date(e.end_date).toLocaleDateString()]})]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[l.jsx(m.Z,{variant:"outline",size:"sm",icon:h.vPQ,onClick:()=>handleOpenModal(e),children:"Edit"}),l.jsx(m.Z,{variant:"danger",size:"sm",icon:h.Ybf,onClick:()=>handleDeleteEvent(e.id),children:"Delete"})]})]},t))}):(0,l.jsxs)("div",{className:"text-center py-8",children:[l.jsx(h.vlc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Events Found"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first academic event."}),l.jsx(m.Z,{variant:"primary",icon:h.OvN,onClick:()=>handleOpenModal(),children:"Add Event"})]})]})}),l.jsx(x.Z,{children:(0,l.jsxs)("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Event Types"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:D.map(e=>(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${e.color.split(" ")[0]}`}),l.jsx("span",{className:"text-sm text-gray-700",children:e.label})]},e.value))})]})})]})})]}),t&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s?"Edit Event":"Add New Event"}),l.jsx(m.Z,{variant:"outline",size:"sm",icon:h.q5L,onClick:handleCloseModal,children:"Close"})]}),(0,l.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-4",children:[l.jsx(u.Z,{label:"Event Name",value:j.eventName,onChange:e=>f({...j,eventName:e.target.value}),required:!0}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),l.jsx("select",{value:j.eventType,onChange:e=>f({...j,eventType:e.target.value}),className:"form-select",required:!0,children:D.map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]}),l.jsx(u.Z,{label:"Start Date",type:"date",value:j.startDate,onChange:e=>f({...j,startDate:e.target.value}),required:!0}),l.jsx(u.Z,{label:"End Date",type:"date",value:j.endDate,onChange:e=>f({...j,endDate:e.target.value})}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("textarea",{value:j.description,onChange:e=>f({...j,description:e.target.value}),rows:3,className:"form-textarea",placeholder:"Enter event description..."})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(m.Z,{variant:"outline",onClick:handleCloseModal,children:"Cancel"}),l.jsx(m.Z,{variant:"primary",type:"submit",icon:h.mW3,loading:E,children:s?"Update Event":"Create Event"})]})]})]})})]})};s()}catch(e){s(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[7689,1163,9801,4608,9209,8450,9142,9175,3242,8397,5822],()=>__webpack_exec__(354));module.exports=a})();
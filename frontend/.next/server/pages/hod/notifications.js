"use strict";(()=>{var e={};e.id=5370,e.ids=[5370,2888,660],e.modules={2205:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{config:()=>p,default:()=>x,getServerSideProps:()=>g,getStaticPaths:()=>u,getStaticProps:()=>h,reportWebVitals:()=>j,routeModule:()=>w,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>f});var i=t(7093),r=t(5244),l=t(1323),n=t(9209),c=t.n(n),d=t(8397),m=t(3963),o=e([d,m]);[d,m]=o.then?(await o)():o;let x=(0,l.l)(m,"default"),h=(0,l.l)(m,"getStaticProps"),u=(0,l.l)(m,"getStaticPaths"),g=(0,l.l)(m,"getServerSideProps"),p=(0,l.l)(m,"config"),j=(0,l.l)(m,"reportWebVitals"),f=(0,l.l)(m,"unstable_getStaticProps"),b=(0,l.l)(m,"unstable_getStaticPaths"),y=(0,l.l)(m,"unstable_getStaticParams"),N=(0,l.l)(m,"unstable_getServerProps"),v=(0,l.l)(m,"unstable_getServerSideProps"),w=new i.PagesRouteModule({definition:{kind:r.x.PAGES,page:"/hod/notifications",pathname:"/hod/notifications",bundlePath:"",filename:""},components:{App:d.default,Document:c()},userland:m});a()}catch(e){a(e)}})},7014:(e,s,t)=>{t.d(s,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var a=t(997);t(6689);let __WEBPACK_DEFAULT_EXPORT__=({children:e,variant:s="default",size:t="md",className:i="",...r})=>a.jsx("span",{className:`inline-flex items-center font-medium rounded-full ${{default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[s]} ${{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}[t]} ${i}`,...r,children:e})},3963:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var i=t(997),r=t(6689),l=t(968),n=t.n(l),c=t(6761),d=t(3242),m=t(8303),o=t(4082),x=t(6422),h=t(4105),u=t(9180),g=t(9175);t(4549);var p=t(5822),j=t(7014),f=t(6893),b=e([c,m,o,x]);[c,m,o,x]=b.then?(await b)():b;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,c.a)(),[s,t]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[b,y]=(0,r.useState)({subject:"",message:"",priority:"normal",recipients:"all"}),{data:N,loading:v,error:w,refetch:_}=(0,d.h)(m.pW.getDepartmentTeachers),{execute:P,loading:S}=(0,d.c)(e=>m.pW.sendToDepartmentTeachers?m.pW.sendToDepartmentTeachers(e):Promise.resolve()),[C]=(0,r.useState)([{id:1,subject:"Department Meeting Reminder",message:"Please attend the monthly department meeting scheduled for tomorrow at 2 PM.",priority:"high",recipients:12,sent_at:"2024-01-15T10:30:00Z",status:"sent"},{id:2,subject:"Grade Submission Deadline",message:"Reminder: Grade submissions are due by end of this week.",priority:"normal",recipients:12,sent_at:"2024-01-14T09:15:00Z",status:"sent"},{id:3,subject:"New Course Guidelines",message:"Please review the updated course guidelines attached to this notification.",priority:"normal",recipients:8,sent_at:"2024-01-13T14:45:00Z",status:"sent"}]);if(!e||"hod"!==e.role)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx(g.Z,{variant:"error",children:"Access denied. HOD access required."})});let handleRefresh=async()=>{l(!0);try{await _()}catch(e){}finally{l(!1)}},handleInputChange=e=>{let{name:s,value:t}=e.target;y(e=>({...e,[s]:t}))},handleSendNotification=async e=>{e.preventDefault();try{await P({subject:b.subject,message:b.message,priority:b.priority,recipients:b.recipients}),t(!1),y({subject:"",message:"",priority:"normal",recipients:"all"}),alert("Notification sent successfully!")}catch(e){alert("Error sending notification. Please try again.")}},getPriorityBadge=e=>{switch(e){case"high":return i.jsx(j.Z,{variant:"danger",size:"sm",children:"High Priority"});case"normal":return i.jsx(j.Z,{variant:"default",size:"sm",children:"Normal"});case"low":return i.jsx(j.Z,{variant:"success",size:"sm",children:"Low Priority"});default:return i.jsx(j.Z,{variant:"default",size:"sm",children:e})}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n(),{children:[i.jsx("title",{children:"Notifications - HOD Dashboard"}),i.jsx("meta",{name:"description",content:"Send notifications to department teachers"})]}),(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[i.jsx(o.default,{}),(0,i.jsxs)("div",{className:"flex",children:[i.jsx(x.default,{}),i.jsx("main",{className:"flex-1 overflow-auto",children:(0,i.jsxs)("div",{className:"p-6 space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Send notifications and communicate with your department teachers"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[i.jsx(u.Z,{variant:"outline",size:"sm",onClick:handleRefresh,loading:a,icon:f.Bw1,children:"Refresh"}),i.jsx(u.Z,{variant:"primary",size:"sm",onClick:()=>t(!0),icon:f.OvN,children:"Compose"})]})]}),w&&(0,i.jsxs)(g.Z,{variant:"error",className:"mb-6",children:["Error loading teachers: ",w.message]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsx(h.Z,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-lg bg-blue-50",children:i.jsx(f.Imn,{className:"w-6 h-6 text-blue-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sent"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:C.length})]})]})}),i.jsx(h.Z,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-lg bg-green-50",children:i.jsx(f.WY8,{className:"w-6 h-6 text-green-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recipients"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:v?"...":N?.length||0})]})]})}),i.jsx(h.Z,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-lg bg-purple-50",children:i.jsx(f.TCC,{className:"w-6 h-6 text-purple-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Week"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:C.filter(e=>{let s=new Date(e.sent_at),t=new Date;return t.setDate(t.getDate()-7),s>t}).length})]})]})}),i.jsx(h.Z,{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-lg bg-orange-50",children:i.jsx(f.UgA,{className:"w-6 h-6 text-orange-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"100%"})]})]})})]}),(0,i.jsxs)(h.Z,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)(u.Z,{variant:"outline",className:"p-4 h-auto flex-col items-start text-left",onClick:()=>{y(e=>({...e,subject:"Department Meeting Reminder",message:"Please attend the upcoming department meeting.",priority:"high"})),t(!0)},children:[i.jsx(f.WY8,{className:"w-6 h-6 text-blue-600 mb-2"}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Meeting Reminder"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Send meeting notifications"})]})]}),(0,i.jsxs)(u.Z,{variant:"outline",className:"p-4 h-auto flex-col items-start text-left",onClick:()=>{y(e=>({...e,subject:"Grade Submission Reminder",message:"Please submit grades by the deadline.",priority:"normal"})),t(!0)},children:[i.jsx(f.TCC,{className:"w-6 h-6 text-green-600 mb-2"}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Grade Reminder"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Remind about grade submissions"})]})]}),(0,i.jsxs)(u.Z,{variant:"outline",className:"p-4 h-auto flex-col items-start text-left",onClick:()=>{y(e=>({...e,subject:"General Announcement",message:"",priority:"normal"})),t(!0)},children:[i.jsx(f.Imn,{className:"w-6 h-6 text-purple-600 mb-2"}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"General Notice"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Send general announcements"})]})]})]})]}),(0,i.jsxs)(h.Z,{className:"overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification History"})}),C.length>0?i.jsx("div",{className:"divide-y divide-gray-200",children:C.map(e=>i.jsx("div",{className:"p-6 hover:bg-gray-50",children:i.jsx("div",{className:"flex items-start justify-between",children:(0,i.jsxs)("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(f.Imn,{className:"w-5 h-5 text-blue-600"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-900",children:e.subject}),getPriorityBadge(e.priority)]}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.message}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx(f.WY8,{className:"w-3 h-3 mr-1"}),e.recipients," recipients"]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx(f.TCC,{className:"w-3 h-3 mr-1"}),formatDate(e.sent_at)]}),i.jsx(j.Z,{variant:"success",size:"sm",children:e.status})]})]})]})})},e.id))}):(0,i.jsxs)("div",{className:"text-center py-12",children:[i.jsx(f.Imn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications sent"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't sent any notifications yet."}),i.jsx(u.Z,{variant:"primary",onClick:()=>t(!0),icon:f.OvN,children:"Send First Notification"})]})]}),s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Compose Notification"}),i.jsx(u.Z,{variant:"ghost",size:"sm",onClick:()=>t(!1),icon:f.q5L})]})}),(0,i.jsxs)("form",{onSubmit:handleSendNotification,className:"p-6 space-y-6",children:[i.jsx(p.Z,{label:"Subject",name:"subject",value:b.subject,onChange:handleInputChange,required:!0,placeholder:"Enter notification subject"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Message ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{name:"message",value:b.message,onChange:handleInputChange,required:!0,rows:6,className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-primary-light focus:border-primary-light sm:text-sm px-3 py-2",placeholder:"Enter your message here..."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,i.jsxs)("select",{name:"priority",value:b.priority,onChange:handleInputChange,className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-primary-light focus:border-primary-light sm:text-sm px-3 py-2",children:[i.jsx("option",{value:"low",children:"Low Priority"}),i.jsx("option",{value:"normal",children:"Normal Priority"}),i.jsx("option",{value:"high",children:"High Priority"})]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recipients"}),(0,i.jsxs)("select",{name:"recipients",value:b.recipients,onChange:handleInputChange,className:"block w-full border border-gray-300 rounded-md shadow-sm focus:ring-primary-light focus:border-primary-light sm:text-sm px-3 py-2",children:[i.jsx("option",{value:"all",children:"All Department Teachers"}),i.jsx("option",{value:"selected",children:"Selected Teachers"})]})]})]}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[i.jsx(f.WY8,{className:"w-4 h-4"}),(0,i.jsxs)("span",{children:["This notification will be sent to"," ",i.jsx("strong",{children:"all"===b.recipients?`all ${N?.length||0} department teachers`:"selected teachers"})]})]})}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx(u.Z,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),i.jsx(u.Z,{type:"submit",variant:"primary",loading:S,icon:f.LbG,children:"Send Notification"})]})]})]})})]})})]})]})]})};a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397,9175,984,5822],()=>__webpack_exec__(2205));module.exports=t})();
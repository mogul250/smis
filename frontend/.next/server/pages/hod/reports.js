"use strict";(()=>{var e={};e.id=4854,e.ids=[4854,2888,660],e.modules={8430:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>u,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>g,getStaticProps:()=>p,reportWebVitals:()=>j,routeModule:()=>w,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>y});var r=s(7093),n=s(5244),l=s(1323),i=s(9209),c=s.n(i),d=s(8397),x=s(4469),o=e([d,x]);[d,x]=o.then?(await o)():o;let m=(0,l.l)(x,"default"),p=(0,l.l)(x,"getStaticProps"),g=(0,l.l)(x,"getStaticPaths"),h=(0,l.l)(x,"getServerSideProps"),u=(0,l.l)(x,"config"),j=(0,l.l)(x,"reportWebVitals"),y=(0,l.l)(x,"unstable_getStaticProps"),f=(0,l.l)(x,"unstable_getStaticPaths"),v=(0,l.l)(x,"unstable_getStaticParams"),N=(0,l.l)(x,"unstable_getServerProps"),b=(0,l.l)(x,"unstable_getServerSideProps"),w=new r.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/hod/reports",pathname:"/hod/reports",bundlePath:"",filename:""},components:{App:d.default,Document:c()},userland:x});a()}catch(e){a(e)}})},7014:(e,t,s)=>{s.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var a=s(997);s(6689);let __WEBPACK_DEFAULT_EXPORT__=({children:e,variant:t="default",size:s="md",className:r="",...n})=>a.jsx("span",{className:`inline-flex items-center font-medium rounded-full ${{default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[t]} ${{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}[s]} ${r}`,...n,children:e})},4469:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=s(997),n=s(6689),l=s(968),i=s.n(l),c=s(6761),d=s(3242),x=s(8303),o=s(4082),m=s(6422),p=s(4105),g=s(9180),h=s(9175),u=s(4549),j=s(7014),y=s(6893),f=e([c,x,o,m]);[c,x,o,m]=f.then?(await f)():f;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,c.a)(),[t,s]=(0,n.useState)("attendance"),[a,l]=(0,n.useState)(null),[f,v]=(0,n.useState)(!1),{data:N,loading:b,error:w,refetch:_}=(0,d.h)(x.pW.getDepartmentStats),{execute:P,loading:S}=(0,d.c)(x.pW.generateReports);if(!e||"hod"!==e.role)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(h.Z,{variant:"error",children:"Access denied. HOD access required."})});let handleRefresh=async()=>{v(!0);try{await _()}catch(e){}finally{v(!1)}},handleGenerateReport=async e=>{try{let t=await P(e,{semester:"current",year:new Date().getFullYear()});l(t),s(e)}catch(e){}},A=[{id:"attendance",title:"Attendance Report",description:"Detailed attendance statistics by course and teacher",icon:y.WY8,color:"bg-blue-500"},{id:"grades",title:"Grade Distribution Report",description:"Grade distribution and performance analytics",icon:y.DKx,color:"bg-green-500"},{id:"performance",title:"Department Performance",description:"Overall department performance metrics",icon:y.QqI,color:"bg-purple-500"},{id:"courses",title:"Course Analytics",description:"Course enrollment and completion statistics",icon:y.yK7,color:"bg-orange-500"}],D=[{title:"Total Teachers",value:N?.teachers||0,icon:y.WY8,color:"text-blue-600",bgColor:"bg-blue-50",change:null},{title:"Total Courses",value:N?.courses||0,icon:y.yK7,color:"text-green-600",bgColor:"bg-green-50",change:null},{title:"Avg Attendance",value:`${N?.attendance?.avg_attendance_percentage||0}%`,icon:y.QqI,color:"text-purple-600",bgColor:"bg-purple-50",change:null},{title:"Total Records",value:N?.attendance?.total_records||0,icon:y.bAx,color:"text-orange-600",bgColor:"bg-orange-50",change:null}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[r.jsx("title",{children:"Reports & Analytics - HOD Dashboard"}),r.jsx("meta",{name:"description",content:"Generate and view department reports and analytics"})]}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(o.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(m.default,{}),r.jsx("main",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Analytics"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Generate comprehensive reports and view department analytics"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(g.Z,{variant:"outline",size:"sm",onClick:handleRefresh,loading:f,icon:y.Bw1,children:"Refresh"}),a&&r.jsx(g.Z,{variant:"outline",size:"sm",icon:y._hL,children:"Export Report"})]})]}),w&&(0,r.jsxs)(h.Z,{variant:"error",className:"mb-6",children:["Error loading statistics: ",w.message]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:D.map((e,t)=>{let s=e.icon;return r.jsx(p.Z,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`p-3 rounded-lg ${e.bgColor}`,children:r.jsx(s,{className:`w-6 h-6 ${e.color}`})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),r.jsx("div",{className:"flex items-center",children:b?r.jsx(u.Z,{size:"sm"}):r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.value})})]})]})},t)})}),(0,r.jsxs)(p.Z,{className:"p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Generate Reports"})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map(e=>{let s=e.icon;return r.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-sm transition-all duration-200",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-10 h-10 ${e.color} rounded-lg flex items-center justify-center`,children:r.jsx(s,{className:"w-5 h-5 text-white"})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:e.title}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]}),r.jsx(g.Z,{variant:"outline",size:"sm",onClick:()=>handleGenerateReport(e.id),loading:S&&t===e.id,icon:y.NOg,children:"Generate"})]})},e.id)})})]}),a&&(0,r.jsxs)(p.Z,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[A.find(e=>e.id===t)?.title," Results"]}),(0,r.jsxs)(j.Z,{variant:"success",size:"sm",children:["Generated ",new Date().toLocaleDateString()]})]}),"attendance"===t&&a.attendance&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Attendance by Course"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Classes"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Present Count"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendance %"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.attendance.map((e,t)=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.course_name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.course_code}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.total_classes}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.present_count}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsxs)(j.Z,{variant:e.attendance_percentage>=75?"success":e.attendance_percentage>=60?"warning":"danger",size:"sm",children:[e.attendance_percentage,"%"]})})]},t))})]})})]}),"grades"===t&&a.grades&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Grade Distribution"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(a.grades).map(([e,t])=>(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Grade ",e]})]},e))})]}),!a.attendance&&!a.grades&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(y.NOg,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{children:"Report generated successfully. Data will be displayed here."})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(p.Z,{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Department Overview"}),b?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(u.Z,{})}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Teachers"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:N?.teachers||0})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Courses"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:N?.courses||0})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Average Attendance"}),(0,r.jsxs)(j.Z,{variant:(N?.attendance?.avg_attendance_percentage||0)>=75?"success":(N?.attendance?.avg_attendance_percentage||0)>=60?"warning":"danger",size:"sm",children:[N?.attendance?.avg_attendance_percentage||0,"%"]})]})]})]}),(0,r.jsxs)(p.Z,{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(y.NOg,{className:"w-4 h-4 text-blue-600"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Last report generated"}),r.jsx("p",{className:"text-xs text-gray-500",children:a?"Just now":"No reports generated yet"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(y.QqI,{className:"w-4 h-4 text-green-600"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Data last updated"}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString()})]})]})]})]})]})]})})]})]})]})};a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397,9175,984],()=>__webpack_exec__(8430));module.exports=s})();
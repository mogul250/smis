"use strict";(()=>{var e={};e.id=2795,e.ids=[2795,2888,660],e.modules={5852:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{config:()=>g,default:()=>x,getServerSideProps:()=>u,getStaticPaths:()=>p,getStaticProps:()=>h,reportWebVitals:()=>j,routeModule:()=>_,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>b});var r=t(7093),l=t(5244),i=t(1323),n=t(9209),c=t.n(n),d=t(8397),o=t(816),m=e([d,o]);[d,o]=m.then?(await m)():m;let x=(0,i.l)(o,"default"),h=(0,i.l)(o,"getStaticProps"),p=(0,i.l)(o,"getStaticPaths"),u=(0,i.l)(o,"getServerSideProps"),g=(0,i.l)(o,"config"),j=(0,i.l)(o,"reportWebVitals"),b=(0,i.l)(o,"unstable_getStaticProps"),v=(0,i.l)(o,"unstable_getStaticPaths"),f=(0,i.l)(o,"unstable_getStaticParams"),N=(0,i.l)(o,"unstable_getServerProps"),y=(0,i.l)(o,"unstable_getServerSideProps"),_=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/hod/timetable",pathname:"/hod/timetable",bundlePath:"",filename:""},components:{App:d.default,Document:c()},userland:o});a()}catch(e){a(e)}})},816:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=t(997),l=t(6689),i=t(968),n=t.n(i),c=t(6761),d=t(3242),o=t(8303),m=t(4082),x=t(6422),h=t(4105),p=t(9180),u=t(9175),g=t(4549),j=t(1618),b=t(6893),v=e([c,o,m,x]);[c,o,m,x]=v.then?(await v)():v;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,c.a)(),[s,t]=(0,l.useState)({semester:"current"}),[a,i]=(0,l.useState)(!1),{data:v,loading:f,error:N,refetch:y}=(0,d.h)(()=>o.pW.getDepartmentTimetable({semester:"current"===s.semester?void 0:s.semester})),{execute:_}=(0,d.c)();if(!e||"hod"!==e.role)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(u.Z,{variant:"error",children:"Access denied. HOD access required."})});let handleRefresh=async()=>{i(!0);try{await y()}catch(e){}finally{i(!1)}},handleApproval=async(e,s)=>{try{await _(()=>o.pW.approveTimetable({timetableId:e,approve:s})),await y()}catch(e){}},handleExport=()=>{if(!v||0===v.length){alert("No timetable data to export");return}let e=v.map(e=>({Day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.day_of_week]||"Unknown",Time:`${e.start_time?.substring(0,5)} - ${e.end_time?.substring(0,5)}`,Course:`${e.course_code} - ${e.course_name}`,Teacher:e.teacher_name,Room:e.room||"TBA",Status:e.status||"N/A",Semester:e.semester||"N/A"})),s=[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n"),t=new Blob([s],{type:"text/csv"}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`department-timetable-${new Date().toISOString().split("T")[0]}.csv`,r.click(),window.URL.revokeObjectURL(a)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[r.jsx("title",{children:"Timetable Management - HOD Dashboard"}),r.jsx("meta",{name:"description",content:"Manage department timetable and approve scheduling"})]}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(m.default,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(x.default,{}),r.jsx("main",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Timetable Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage your department's class schedule"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(p.Z,{variant:"outline",size:"sm",onClick:handleRefresh,loading:a,children:"\uD83D\uDD04 Refresh"}),r.jsx(p.Z,{variant:"outline",size:"sm",onClick:handleExport,disabled:!v||0===v.length,children:"\uD83D\uDCE5 Export"})]})]}),N&&(0,r.jsxs)(u.Z,{variant:"error",className:"mb-6",children:["Error loading timetable: ",N.message]}),r.jsx(j.QD,{filters:s,onFilterChange:e=>{t(e)},onReset:()=>{t({semester:"current"})},onExport:handleExport,showTeacherFilter:!0,showRoomFilter:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx(h.Z,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-lg bg-blue-50",children:r.jsx(b.vlc,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Classes"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:f?"...":v?.length||0})]})]})}),r.jsx(h.Z,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-lg bg-green-50",children:r.jsx(b.UgA,{className:"w-6 h-6 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approved"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:f?"...":v?.filter(e=>"approved"===e.status).length||0})]})]})}),r.jsx(h.Z,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-lg bg-yellow-50",children:r.jsx(b.TCC,{className:"w-6 h-6 text-yellow-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:f?"...":v?.filter(e=>"pending"===e.status).length||0})]})]})}),r.jsx(h.Z,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-lg bg-red-50",children:r.jsx(b.q5L,{className:"w-6 h-6 text-red-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rejected"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:f?"...":v?.filter(e=>"rejected"===e.status).length||0})]})]})})]}),f?r.jsx(h.Z,{className:"p-12",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(g.Z,{size:"lg"})})}):v&&v.length>0?r.jsx(j.mG,{timetable:v,editable:!1,showActions:!0,colorScheme:"teacher",title:"Department Timetable",onApprove:handleApproval,showApprovalActions:!0}):r.jsx(h.Z,{className:"p-12 text-center",children:(0,r.jsxs)("div",{className:"text-gray-500",children:[r.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC5"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Scheduled"}),r.jsx("p",{className:"text-gray-600",children:"No classes are scheduled for the selected semester."})]})})]})})]})]})]})};a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9783:e=>{e.exports=import("@fortawesome/free-solid-svg-icons")},3803:e=>{e.exports=import("@fortawesome/react-fontawesome")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[7689,1163,9801,4608,9209,8450,6422,4082,8397,9175,984,5822,9060],()=>__webpack_exec__(5852));module.exports=t})();
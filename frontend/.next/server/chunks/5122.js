"use strict";exports.id=5122,exports.ids=[5122],exports.modules={7014:(e,s,t)=>{t.d(s,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var a=t(997);t(6689);let __WEBPACK_DEFAULT_EXPORT__=({children:e,variant:s="default",size:t="md",className:l="",...i})=>a.jsx("span",{className:`inline-flex items-center font-medium rounded-full ${{default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[s]} ${{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}[t]} ${l}`,...i,children:e})},5122:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var l=t(997),i=t(6689),n=t(6761),r=t(3242),d=t(3240),c=t(4082),x=t(6422),m=t(4105),o=t(6208),u=t(7014),h=t(9180),j=t(5822),g=t(9175),v=t(4549),p=t(6893),y=e([n,d,c,x]);[n,d,c,x]=y.then?(await y)():y;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,n.a)(),[s,t]=(0,i.useState)(""),[a,y]=(0,i.useState)("all"),[f,N]=(0,i.useState)("all"),[b,Z]=(0,i.useState)(null),{data:w,loading:_,error:C,refetch:F}=(0,r.h)(()=>d.sz.getAllFees({search:s,status:a,feeType:f}),[s,a,f]),{loading:D,execute:S}=(0,r.c)();if(!e||"finance"!==e.role)return l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx(g.Z,{variant:"error",children:"Access denied. Finance access required."})});let T=w?.fees||[],A=w?.stats||{},handleEditFee=e=>{alert(`Edit fee ${e} functionality would be implemented here`)},handleViewDetails=e=>{alert(`View fee ${e} details functionality would be implemented here`)},handleSendReminder=async(e,s)=>{try{await S(()=>d.sz.sendPaymentReminder({studentId:e,feeId:s})),Z({type:"success",text:"Payment reminder sent successfully!"}),setTimeout(()=>Z(null),5e3)}catch(e){Z({type:"error",text:e.response?.data?.message||"Failed to send reminder"})}},getStatusBadgeVariant=(e,s)=>"paid"===e?"success":"partial"===e?"warning":"unpaid"===e&&new Date(s)<new Date?"danger":"warning",getStatusText=(e,s)=>"paid"===e?"Paid":"partial"===e?"Partial":"unpaid"===e&&new Date(s)<new Date?"Overdue":"Pending";return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(c.Z,{}),(0,l.jsxs)("div",{className:"flex",children:[l.jsx(x.Z,{}),l.jsx("main",{className:"flex-1 p-6",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Fee Management"}),l.jsx("p",{className:"text-gray-600",children:"Manage student fees and payment tracking"})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[l.jsx(h.Z,{variant:"outline",icon:p._hL,children:"Export Report"}),l.jsx(h.Z,{variant:"primary",icon:p.OvN,onClick:()=>{alert("Create fee functionality would be implemented here")},children:"Create Fee"})]})]}),b&&l.jsx(g.Z,{variant:b.type,dismissible:!0,onDismiss:()=>Z(null),children:b.text}),_?l.jsx(m.Z,{className:"flex justify-center py-12",children:l.jsx(v.Z,{size:"lg"})}):C?(0,l.jsxs)(g.Z,{variant:"error",children:["Failed to load fees: ",C]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsx(m.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:l.jsx(p.oQC,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",A.totalRevenue?.toLocaleString()||"0"]})]})]})}),l.jsx(m.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:l.jsx(p.XiQ,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Collected"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",A.collectedAmount?.toLocaleString()||"0"]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[A.collectionRate?`${A.collectionRate.toFixed(1)}%`:"0%"," rate"]})]})]})}),l.jsx(m.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:l.jsx(p.oQC,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Outstanding"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",A.outstandingAmount?.toLocaleString()||"0"]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[A.outstandingCount||0," students"]})]})]})}),l.jsx(m.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:l.jsx(p.oQC,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",A.overdueAmount?.toLocaleString()||"0"]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[A.overdueCount||0," fees"]})]})]})})]}),l.jsx(m.Z,{children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx("div",{children:l.jsx(j.Z,{label:"Search",placeholder:"Search by student name or ID...",value:s,onChange:e=>t(e.target.value),icon:p.jRj})}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsx("select",{value:a,onChange:e=>y(e.target.value),className:"form-select",children:[{value:"all",label:"All Status"},{value:"paid",label:"Paid"},{value:"unpaid",label:"Unpaid"},{value:"overdue",label:"Overdue"},{value:"partial",label:"Partial Payment"}].map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee Type"}),l.jsx("select",{value:f,onChange:e=>N(e.target.value),className:"form-select",children:[{value:"all",label:"All Types"},{value:"tuition",label:"Tuition"},{value:"library",label:"Library"},{value:"lab",label:"Laboratory"},{value:"hostel",label:"Hostel"},{value:"transport",label:"Transport"},{value:"exam",label:"Examination"}].map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]}),l.jsx("div",{className:"flex items-end",children:l.jsx(h.Z,{variant:"outline",onClick:F,className:"w-full",children:"Refresh"})})]})}),(0,l.jsxs)(m.Z,{children:[l.jsx(m.Z.Header,{children:l.jsx(m.Z.Title,{children:"Fee Records"})}),T.length>0?(0,l.jsxs)(o.Z,{children:[l.jsx(o.Z.Header,{children:(0,l.jsxs)(o.Z.Row,{children:[l.jsx(o.Z.Head,{children:"Student"}),l.jsx(o.Z.Head,{children:"Fee Type"}),l.jsx(o.Z.Head,{children:"Amount"}),l.jsx(o.Z.Head,{children:"Due Date"}),l.jsx(o.Z.Head,{children:"Status"}),l.jsx(o.Z.Head,{children:"Paid Amount"}),l.jsx(o.Z.Head,{children:"Actions"})]})}),l.jsx(o.Z.Body,{children:T.map((e,s)=>(0,l.jsxs)(o.Z.Row,{children:[(0,l.jsxs)(o.Z.Cell,{children:[l.jsx("div",{className:"font-medium text-gray-900",children:e.student_name}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.student_id]})]}),(0,l.jsxs)(o.Z.Cell,{children:[l.jsx("div",{className:"font-medium text-gray-900",children:e.fee_type}),l.jsx("div",{className:"text-sm text-gray-500",children:e.description})]}),l.jsx(o.Z.Cell,{children:(0,l.jsxs)("span",{className:"font-semibold text-gray-900",children:["$",parseFloat(e.amount).toFixed(2)]})}),(0,l.jsxs)(o.Z.Cell,{children:[l.jsx("div",{className:"text-gray-900",children:new Date(e.due_date).toLocaleDateString()}),new Date(e.due_date)<new Date&&"unpaid"===e.status&&(0,l.jsxs)("div",{className:"text-xs text-red-600",children:[Math.ceil((new Date-new Date(e.due_date))/864e5)," days overdue"]})]}),l.jsx(o.Z.Cell,{children:l.jsx(u.Z,{variant:getStatusBadgeVariant(e.status,e.due_date),children:getStatusText(e.status,e.due_date)})}),(0,l.jsxs)(o.Z.Cell,{children:[(0,l.jsxs)("span",{className:"font-medium text-gray-900",children:["$",parseFloat(e.paid_amount||0).toFixed(2)]}),"partial"===e.status&&(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["$",(parseFloat(e.amount)-parseFloat(e.paid_amount||0)).toFixed(2)," remaining"]})]}),l.jsx(o.Z.Cell,{children:(0,l.jsxs)("div",{className:"flex space-x-2",children:[l.jsx(h.Z,{variant:"outline",size:"sm",icon:p.rDJ,onClick:()=>handleViewDetails(e.id),children:"View"}),l.jsx(h.Z,{variant:"primary",size:"sm",icon:p.vPQ,onClick:()=>handleEditFee(e.id),children:"Edit"}),"paid"!==e.status&&l.jsx(h.Z,{variant:"warning",size:"sm",onClick:()=>handleSendReminder(e.student_id,e.id),loading:D,children:"Remind"})]})})]},s))})]}):(0,l.jsxs)("div",{className:"text-center py-8",children:[l.jsx(p.oQC,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Fees Found"}),l.jsx("p",{className:"text-gray-500",children:"No fees match the current filters. Try adjusting your search criteria."})]})]})]})]})})]})]})};a()}catch(e){a(e)}})}};
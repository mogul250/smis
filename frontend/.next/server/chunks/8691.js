"use strict";exports.id=8691,exports.ids=[8691],exports.modules={8691:(e,s,t)=>{t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=t(997),l=t(6689),i=t(968),d=t.n(i),c=t(6761),n=t(3242),o=t(3240),m=t(4082),x=t(6422),h=t(4105),u=t(9180),j=t(7014),g=t(9175),y=t(4549),N=t(1618),p=e([c,o,m,x]);[c,o,m,x]=p.then?(await p)():p;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,c.a)(),[s,t]=(0,l.useState)({semester:"current"}),[r,i]=(0,l.useState)(!1),{data:p,loading:v,error:f,refetch:b}=(0,n.h)(()=>o.t7.getTimetable({semester:"current"===s.semester?void 0:s.semester}));if(!e||"student"!==e.role)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(g.Z,{variant:"error",children:"Access denied. Student access required."})});let handleRefresh=async()=>{i(!0);try{await b()}finally{i(!1)}},handleExport=()=>{if(!p||0===p.length){alert("No timetable data to export");return}let e=p.map(e=>({Day:getDayName(e.day_of_week),Time:`${e.start_time?.substring(0,5)} - ${e.end_time?.substring(0,5)}`,Course:`${e.course_code} - ${e.course_name}`,Teacher:e.teacher_name,Room:e.room||"TBA",Semester:e.semester||"N/A"})),s=[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n"),t=new Blob([s],{type:"text/csv"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=`my-timetable-${new Date().toISOString().split("T")[0]}.csv`,a.click(),window.URL.revokeObjectURL(r)};function getDayName(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]||"Unknown"}let _={totalClasses:p?.length||0,uniqueCourses:new Set(p?.map(e=>e.course_id)).size||0,hoursPerWeek:p?.reduce((e,s)=>{let t=new Date(`1970-01-01T${s.start_time}`),r=new Date(`1970-01-01T${s.end_time}`);return e+(r-t)/(1e3*60*60)},0)||0,busyDays:new Set(p?.map(e=>e.day_of_week)).size||0},w=p?.filter(e=>{if(s.day&&e.day_of_week.toString()!==s.day)return!1;if(s.search){let t=s.search.toLowerCase();return e.course_name?.toLowerCase().includes(t)||e.course_code?.toLowerCase().includes(t)||e.teacher_name?.toLowerCase().includes(t)||e.room?.toLowerCase().includes(t)}return!0})||[];return(0,a.jsxs)(a.Fragment,{children:[a.jsx(d(),{children:a.jsx("title",{children:"My Timetable - Student Dashboard"})}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(m.Z,{}),(0,a.jsxs)("div",{className:"flex",children:[a.jsx(x.Z,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Timetable"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"View your class schedule and course information"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(u.Z,{variant:"outline",size:"sm",onClick:handleRefresh,loading:r,children:"\uD83D\uDD04 Refresh"}),a.jsx(u.Z,{variant:"outline",size:"sm",onClick:handleExport,disabled:!p||0===p.length,children:"\uD83D\uDCE5 Export"})]})]}),f&&(0,a.jsxs)(g.Z,{variant:"error",children:["Error loading timetable: ",f]}),a.jsx(N.QD,{filters:s,onFilterChange:e=>{t(e)},onReset:()=>{t({semester:"current"})},onExport:handleExport,showTeacherFilter:!1,showRoomFilter:!1}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)(h.Z,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_.totalClasses}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Classes"})]}),(0,a.jsxs)(h.Z,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.uniqueCourses}),a.jsx("div",{className:"text-sm text-gray-600",children:"Enrolled Courses"})]}),(0,a.jsxs)(h.Z,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:_.hoursPerWeek.toFixed(1)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Hours per Week"})]}),(0,a.jsxs)(h.Z,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:_.busyDays}),a.jsx("div",{className:"text-sm text-gray-600",children:"Class Days"})]})]}),p&&p.length>0&&(0,a.jsxs)(h.Z,{className:"p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quick Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Today's Classes"}),(0,a.jsxs)("div",{className:"text-blue-600",children:[p.filter(e=>e.day_of_week===new Date().getDay()).length," classes"]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-green-800",children:"Next Class"}),a.jsx("div",{className:"text-green-600",children:"Check your schedule below"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-purple-800",children:"Most Classes With"}),a.jsx("div",{className:"text-purple-600",children:Object.entries(p.reduce((e,s)=>(e[s.teacher_name]=(e[s.teacher_name]||0)+1,e),{})).sort(([,e],[,s])=>s-e)[0]?.[0]||"N/A"})]})]})]}),v?a.jsx(h.Z,{className:"p-12",children:a.jsx("div",{className:"flex justify-center",children:a.jsx(y.Z,{size:"lg"})})}):p&&p.length>0?a.jsx(N.mG,{timetable:w,editable:!1,showActions:!1,colorScheme:"course",title:"My Class Schedule"}):a.jsx(h.Z,{className:"p-12 text-center",children:(0,a.jsxs)("div",{className:"text-gray-500",children:[a.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC5"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Scheduled"}),a.jsx("p",{className:"text-gray-600",children:"You don't have any classes scheduled for the selected semester. Contact your academic advisor if this seems incorrect."})]})}),p&&p.length>0&&(0,a.jsxs)(h.Z,{children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Enrolled Courses"})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from(new Set(p.map(e=>e.course_id))).map(e=>{let s=p.find(s=>s.course_id===e),t=p.filter(s=>s.course_id===e);return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:s.course_name}),a.jsx("p",{className:"text-sm text-gray-600",children:s.course_code}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Prof. ",s.teacher_name]})]}),(0,a.jsxs)(j.Z,{variant:"primary",size:"sm",children:[t.length," ",1===t.length?"class":"classes"]})]}),a.jsx("div",{className:"space-y-1 text-sm text-gray-600",children:t.map((e,s)=>(0,a.jsxs)("div",{children:[getDayName(e.day_of_week)," ",e.start_time?.substring(0,5)," - ",e.end_time?.substring(0,5),e.room&&` â€¢ ${e.room}`]},s))})]},e)})})})]})]})})]})]})]})};r()}catch(e){r(e)}})}};
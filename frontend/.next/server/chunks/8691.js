"use strict";exports.id=8691,exports.ids=[8691],exports.modules={8691:(e,s,a)=>{a.a(e,async(e,t)=>{try{a.r(s),a.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=a(997),l=a(6689),n=a(968),i=a.n(n),d=a(5152),c=a.n(d),o=a(6761),m=a(3242),x=a(8303),u=e([o,x]);[o,x]=u.then?(await u)():u;let h=c()(()=>a.e(4082).then(a.bind(a,4082)),{loadableGenerated:{modules:["student\\timetable.js -> ../../components/common/Header"]},ssr:!1,loading:()=>r.jsx("header",{className:"bg-blue-600 text-white shadow-lg",children:r.jsx("div",{className:"container mx-auto px-4 py-3",children:r.jsx("h1",{className:"text-xl font-bold",children:"SMIS - Loading..."})})})}),g=c()(()=>Promise.all([a.e(7689),a.e(1163),a.e(6422)]).then(a.bind(a,6422)),{loadableGenerated:{modules:["student\\timetable.js -> ../../components/common/Sidebar"]},ssr:!1,loading:()=>r.jsx("aside",{className:"w-64 bg-gray-800 text-white min-h-screen",children:r.jsx("div",{className:"p-4",children:r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Loading..."})})})}),useFontAwesome=()=>{let[e,s]=(0,l.useState)(null);return(0,l.useEffect)(()=>{Promise.resolve().then(a.bind(a,3803)).then(e=>{Promise.resolve().then(a.bind(a,9783)).then(a=>{s({FontAwesomeIcon:e.FontAwesomeIcon,faCalendarAlt:a.faCalendarAlt,faBook:a.faBook,faClock:a.faClock,faUsers:a.faUsers,faDownload:a.faDownload,faSync:a.faSync,faFilter:a.faFilter,faSearch:a.faSearch,faMapMarkerAlt:a.faMapMarkerAlt})})}).catch(()=>{s({FontAwesomeIcon:({icon:e,className:s})=>r.jsx("span",{className:s,children:{"calendar-alt":"\uD83D\uDCC5",book:"\uD83D\uDCDA",clock:"\uD83D\uDD50",users:"\uD83D\uDC65",download:"\uD83D\uDCE5",sync:"\uD83D\uDD04",filter:"\uD83D\uDD0D",search:"\uD83D\uDD0D","map-marker-alt":"\uD83D\uDCCD"}[e?.iconName]||"\uD83D\uDCCB"}),faCalendarAlt:{iconName:"calendar-alt"},faBook:{iconName:"book"},faClock:{iconName:"clock"},faUsers:{iconName:"users"},faDownload:{iconName:"download"},faSync:{iconName:"sync"},faFilter:{iconName:"filter"},faSearch:{iconName:"search"},faMapMarkerAlt:{iconName:"map-marker-alt"}})})},[]),e},Card=({children:e,className:s=""})=>r.jsx("div",{className:`bg-white rounded-lg shadow border border-gray-200 p-6 ${s}`,children:e}),Button=({children:e,variant:s="primary",size:a="md",onClick:t,disabled:l=!1,loading:n=!1,className:i=""})=>(0,r.jsxs)("button",{className:`inline-flex items-center justify-center font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-blue-500"}[s]} ${{sm:"px-3 py-2 text-sm",md:"px-4 py-2 text-sm"}[a]} ${l?"opacity-50 cursor-not-allowed":""} ${i}`,onClick:t,disabled:l||n,children:[n&&r.jsx("span",{className:"animate-spin mr-2",children:"⏳"}),e]}),Badge=({children:e,variant:s="default",size:a="md"})=>r.jsx("span",{className:`rounded font-medium ${{primary:"bg-blue-100 text-blue-800",default:"bg-gray-100 text-gray-800"}[s]} ${{sm:"px-2 py-1 text-xs",md:"px-2 py-1 text-sm"}[a]}`,children:e}),Alert=({children:e,variant:s="info"})=>r.jsx("div",{className:`p-4 rounded ${{error:"bg-red-100 text-red-800 border border-red-200",info:"bg-blue-100 text-blue-800 border border-blue-200"}[s]}`,children:e}),LoadingSpinner=({size:e="md"})=>r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${{md:"h-8 w-8",lg:"h-12 w-12"}[e]}`})}),__WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,o.a)(),s=useFontAwesome(),[a,t]=(0,l.useState)({semester:"current"}),[n,d]=(0,l.useState)(!1),{data:c,loading:u,error:j,refetch:y}=(0,m.h)(()=>x.t7.getTimetable("current"===a.semester?void 0:a.semester));if(!e||"student"!==e.role)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(Alert,{variant:"error",children:"Access denied. Student access required."})});let handleRefresh=async()=>{d(!0);try{await y()}finally{d(!1)}};function getDayName(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]||"Unknown"}let p={totalClasses:c?.length||0,uniqueCourses:new Set(c?.map(e=>e.course_id)).size||0,hoursPerWeek:c?.reduce((e,s)=>{let a=new Date(`1970-01-01T${s.start_time}`),t=new Date(`1970-01-01T${s.end_time}`);return e+(t-a)/(1e3*60*60)},0)||0,busyDays:new Set(c?.map(e=>e.day_of_week)).size||0},f=c?.filter(e=>{if(a.day&&e.day_of_week.toString()!==a.day)return!1;if(a.search){let s=a.search.toLowerCase();return e.course_name?.toLowerCase().includes(s)||e.course_code?.toLowerCase().includes(s)||e.teacher_name?.toLowerCase().includes(s)||e.room?.toLowerCase().includes(s)}return!0})||[];return(0,r.jsxs)(r.Fragment,{children:[r.jsx(i(),{children:r.jsx("title",{children:"My Timetable - Student Dashboard"})}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(h,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(g,{}),r.jsx("main",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Timetable"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"View your class schedule and course information"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(Button,{variant:"outline",size:"sm",onClick:handleRefresh,loading:n,children:[s?r.jsx(s.FontAwesomeIcon,{icon:s.faSync,className:"mr-2"}):"\uD83D\uDD04 ","Refresh"]}),(0,r.jsxs)(Button,{variant:"outline",size:"sm",onClick:()=>{if(!c||0===c.length){alert("No timetable data to export");return}let e=c.map(e=>({Day:getDayName(e.day_of_week),Time:`${e.start_time?.substring(0,5)} - ${e.end_time?.substring(0,5)}`,Course:`${e.course_code} - ${e.course_name}`,Teacher:e.teacher_name,Room:e.room||"TBA",Semester:e.semester||"N/A"})),s=[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n"),a=new Blob([s],{type:"text/csv"}),t=window.URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download=`my-timetable-${new Date().toISOString().split("T")[0]}.csv`,r.click(),window.URL.revokeObjectURL(t)},disabled:!c||0===c.length,children:[s?r.jsx(s.FontAwesomeIcon,{icon:s.faDownload,className:"mr-2"}):"\uD83D\uDCE5 ","Export"]})]})]}),j&&(0,r.jsxs)(Alert,{variant:"error",children:["Error loading timetable: ",j]}),r.jsx(Card,{children:(0,r.jsxs)("div",{className:"flex flex-wrap items-end gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Semester"}),(0,r.jsxs)("select",{value:a.semester,onChange:e=>t({...a,semester:e.target.value}),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"current",children:"Current Semester"}),r.jsx("option",{value:"1",children:"Semester 1"}),r.jsx("option",{value:"2",children:"Semester 2"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day"}),(0,r.jsxs)("select",{value:a.day||"",onChange:e=>t({...a,day:e.target.value}),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"All Days"}),r.jsx("option",{value:"1",children:"Monday"}),r.jsx("option",{value:"2",children:"Tuesday"}),r.jsx("option",{value:"3",children:"Wednesday"}),r.jsx("option",{value:"4",children:"Thursday"}),r.jsx("option",{value:"5",children:"Friday"}),r.jsx("option",{value:"6",children:"Saturday"}),r.jsx("option",{value:"0",children:"Sunday"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),r.jsx("input",{type:"text",placeholder:"Search courses, teachers...",value:a.search||"",onChange:e=>t({...a,search:e.target.value}),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{t({semester:"current"})},children:"Reset"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx(Card,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center mr-4",children:s?r.jsx(s.FontAwesomeIcon,{icon:s.faCalendarAlt,className:"text-white text-xl"}):r.jsx("span",{className:"text-white text-xl",children:"\uD83D\uDCC5"})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.totalClasses}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Classes"})]})]})}),r.jsx(Card,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center mr-4",children:s?r.jsx(s.FontAwesomeIcon,{icon:s.faBook,className:"text-white text-xl"}):r.jsx("span",{className:"text-white text-xl",children:"\uD83D\uDCDA"})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.uniqueCourses}),r.jsx("div",{className:"text-sm text-gray-600",children:"Enrolled Courses"})]})]})}),r.jsx(Card,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center mr-4",children:s?r.jsx(s.FontAwesomeIcon,{icon:s.faClock,className:"text-white text-xl"}):r.jsx("span",{className:"text-white text-xl",children:"\uD83D\uDD50"})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:p.hoursPerWeek.toFixed(1)}),r.jsx("div",{className:"text-sm text-gray-600",children:"Hours per Week"})]})]})}),r.jsx(Card,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center mr-4",children:s?r.jsx(s.FontAwesomeIcon,{icon:s.faUsers,className:"text-white text-xl"}):r.jsx("span",{className:"text-white text-xl",children:"\uD83D\uDC65"})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:p.busyDays}),r.jsx("div",{className:"text-sm text-gray-600",children:"Class Days"})]})]})})]}),c&&c.length>0&&(0,r.jsxs)(Card,{className:"p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quick Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[r.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Today's Classes"}),(0,r.jsxs)("div",{className:"text-blue-600",children:[c.filter(e=>e.day_of_week===new Date().getDay()).length," classes"]})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[r.jsx("div",{className:"text-sm font-medium text-green-800",children:"Next Class"}),r.jsx("div",{className:"text-green-600",children:"Check your schedule below"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[r.jsx("div",{className:"text-sm font-medium text-purple-800",children:"Most Classes With"}),r.jsx("div",{className:"text-purple-600",children:Object.entries(c.reduce((e,s)=>(e[s.teacher_name]=(e[s.teacher_name]||0)+1,e),{})).sort(([,e],[,s])=>s-e)[0]?.[0]||"N/A"})]})]})]}),u?r.jsx(Card,{className:"p-12",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(LoadingSpinner,{size:"lg"})})}):c&&c.length>0?(0,r.jsxs)(Card,{children:[r.jsx("div",{className:"border-b border-gray-200 pb-4 mb-4",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Class Schedule"})}),r.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Day"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((e,s)=>(0,r.jsxs)("tr",{className:"transition-colors hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("div",{className:"font-medium text-gray-900",children:getDayName(e.day_of_week)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsxs)("div",{className:"font-medium text-gray-900",children:[e.start_time?.substring(0,5)," - ",e.end_time?.substring(0,5)]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.course_name}),r.jsx("div",{className:"text-sm text-gray-500",children:e.course_code})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("span",{className:"text-gray-900",children:e.teacher_name||"TBA"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("span",{className:"text-gray-900",children:e.room||"TBA"})})]},s))})]})})]}):r.jsx(Card,{className:"p-12 text-center",children:(0,r.jsxs)("div",{className:"text-gray-500",children:[s?r.jsx(s.FontAwesomeIcon,{icon:s.faCalendarAlt,className:"text-4xl mb-4 block text-gray-400 mx-auto"}):r.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC5"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Scheduled"}),r.jsx("p",{className:"text-gray-600",children:"You don't have any classes scheduled for the selected semester. Contact your academic advisor if this seems incorrect."})]})}),c&&c.length>0&&(0,r.jsxs)(Card,{children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Enrolled Courses"})}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from(new Set(c.map(e=>e.course_id))).map(e=>{let s=c.find(s=>s.course_id===e),a=c.filter(s=>s.course_id===e);return(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:s.course_name}),r.jsx("p",{className:"text-sm text-gray-600",children:s.course_code}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Prof. ",s.teacher_name]})]}),(0,r.jsxs)(Badge,{variant:"primary",size:"sm",children:[a.length," ",1===a.length?"class":"classes"]})]}),r.jsx("div",{className:"space-y-1 text-sm text-gray-600",children:a.map((e,s)=>(0,r.jsxs)("div",{children:[getDayName(e.day_of_week)," ",e.start_time?.substring(0,5)," - ",e.end_time?.substring(0,5),e.room&&` • ${e.room}`]},s))})]},e)})})})]})]})})]})]})]})};t()}catch(e){t(e)}})}};
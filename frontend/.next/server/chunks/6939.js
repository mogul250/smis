"use strict";exports.id=6939,exports.ids=[6939],exports.modules={6939:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var l=t(997),r=t(6689),n=t.n(r),i=t(6761),c=t(3242),d=t(3240),x=t(4082),m=t(6422),o=t(4105),h=t(6208),u=t(9180),j=t(9175),g=t(4549),y=t(6893),v=e([i,d,x,m]);[i,d,x,m]=v.then?(await v)():v;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,i.a)(),[s,t]=(0,r.useState)("revenue"),[a,v]=(0,r.useState)("current_month"),[f,p]=(0,r.useState)({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),{data:N,loading:Z,error:b,execute:C}=(0,c.h)(()=>d.sz.getFinancialReport({type:s,period:a,..."custom"===a?f:{}}),[]);if(n().useEffect(()=>{C()},[s,a,f,C]),!e||"finance"!==e.role)return l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx(j.Z,{variant:"error",children:"Access denied. Finance access required."})});let w=[{value:"revenue",label:"Revenue Report",icon:y.oQC},{value:"collections",label:"Collections Report",icon:y.QqI},{value:"outstanding",label:"Outstanding Report",icon:y.DKx},{value:"fee_analysis",label:"Fee Analysis",icon:y.CFv}],handleDateChange=(e,s)=>{p(t=>({...t,[e]:s}))},formatCurrency=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e||0),formatPercentage=e=>`${(e||0).toFixed(1)}%`;return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(x.Z,{}),(0,l.jsxs)("div",{className:"flex",children:[l.jsx(m.Z,{}),l.jsx("main",{className:"flex-1 p-6",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Financial Reports"}),l.jsx("p",{className:"text-gray-600",children:"Generate and analyze financial reports and insights"})]}),l.jsx(u.Z,{variant:"primary",icon:y._hL,onClick:()=>{alert("Export report functionality would be implemented here")},children:"Export Report"})]}),l.jsx(o.Z,{children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Report Type"}),l.jsx("select",{value:s,onChange:e=>t(e.target.value),className:"form-select",children:w.map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),l.jsx("select",{value:a,onChange:e=>v(e.target.value),className:"form-select",children:[{value:"current_month",label:"Current Month"},{value:"last_month",label:"Last Month"},{value:"current_quarter",label:"Current Quarter"},{value:"current_year",label:"Current Year"},{value:"last_year",label:"Last Year"},{value:"custom",label:"Custom Range"}].map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]}),"custom"===a&&(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),l.jsx("input",{type:"date",value:f.startDate,onChange:e=>handleDateChange("startDate",e.target.value),className:"form-input"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),l.jsx("input",{type:"date",value:f.endDate,onChange:e=>handleDateChange("endDate",e.target.value),className:"form-input"})]})]})]})}),Z?l.jsx(o.Z,{className:"flex justify-center py-12",children:l.jsx(g.Z,{size:"lg"})}):b?(0,l.jsxs)(j.Z,{variant:"error",children:["Failed to load report: ",b]}):N?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsx(o.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:l.jsx(y.oQC,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(N.summary?.totalRevenue)}),N.summary?.revenueGrowth&&(0,l.jsxs)("p",{className:"text-xs text-green-600",children:["+",formatPercentage(N.summary.revenueGrowth)," from last period"]})]})]})}),l.jsx(o.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:l.jsx(y.QqI,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Collections"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(N.summary?.totalCollections)}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[formatPercentage(N.summary?.collectionRate)," collection rate"]})]})]})}),l.jsx(o.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:l.jsx(y.DKx,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Outstanding"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(N.summary?.totalOutstanding)}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[N.summary?.outstandingCount||0," students"]})]})]})}),l.jsx(o.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:l.jsx(y.vlc,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(N.summary?.totalOverdue)}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[N.summary?.overdueCount||0," fees"]})]})]})})]}),"revenue"===s&&N.revenueBreakdown&&(0,l.jsxs)(o.Z,{children:[l.jsx(o.Z.Header,{children:l.jsx(o.Z.Title,{children:"Revenue Breakdown by Fee Type"})}),(0,l.jsxs)(h.Z,{children:[l.jsx(h.Z.Header,{children:(0,l.jsxs)(h.Z.Row,{children:[l.jsx(h.Z.Head,{children:"Fee Type"}),l.jsx(h.Z.Head,{children:"Total Amount"}),l.jsx(h.Z.Head,{children:"Collected"}),l.jsx(h.Z.Head,{children:"Outstanding"}),l.jsx(h.Z.Head,{children:"Collection Rate"})]})}),l.jsx(h.Z.Body,{children:N.revenueBreakdown.map((e,s)=>(0,l.jsxs)(h.Z.Row,{children:[l.jsx(h.Z.Cell,{children:l.jsx("span",{className:"font-medium text-gray-900",children:e.feeType})}),l.jsx(h.Z.Cell,{children:l.jsx("span",{className:"font-semibold",children:formatCurrency(e.totalAmount)})}),l.jsx(h.Z.Cell,{children:l.jsx("span",{className:"text-green-600 font-medium",children:formatCurrency(e.collectedAmount)})}),l.jsx(h.Z.Cell,{children:l.jsx("span",{className:"text-orange-600 font-medium",children:formatCurrency(e.outstandingAmount)})}),l.jsx(h.Z.Cell,{children:l.jsx("span",{className:"font-medium",children:formatPercentage(e.collectionRate)})})]},s))})]})]}),"collections"===s&&N.dailyCollections&&(0,l.jsxs)(o.Z,{children:[l.jsx(o.Z.Header,{children:l.jsx(o.Z.Title,{children:"Daily Collections Trend"})}),l.jsx("div",{className:"space-y-4",children:N.dailyCollections.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:[e.transactionCount," transactions"]})]}),(0,l.jsxs)("div",{className:"text-right",children:[l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:formatCurrency(e.amount)}),l.jsx("div",{className:"text-sm text-gray-500",children:e.paymentMethods?.join(", ")})]})]},s))})]}),"outstanding"===s&&N.outstandingDetails&&(0,l.jsxs)(o.Z,{children:[l.jsx(o.Z.Header,{children:l.jsx(o.Z.Title,{children:"Outstanding Fees by Student"})}),(0,l.jsxs)(h.Z,{children:[l.jsx(h.Z.Header,{children:(0,l.jsxs)(h.Z.Row,{children:[l.jsx(h.Z.Head,{children:"Student"}),l.jsx(h.Z.Head,{children:"Total Outstanding"}),l.jsx(h.Z.Head,{children:"Overdue Amount"}),l.jsx(h.Z.Head,{children:"Days Overdue"}),l.jsx(h.Z.Head,{children:"Fee Types"})]})}),l.jsx(h.Z.Body,{children:N.outstandingDetails.map((e,s)=>(0,l.jsxs)(h.Z.Row,{children:[(0,l.jsxs)(h.Z.Cell,{children:[l.jsx("div",{className:"font-medium text-gray-900",children:e.studentName}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.studentId]})]}),l.jsx(h.Z.Cell,{children:l.jsx("span",{className:"font-semibold text-orange-600",children:formatCurrency(e.totalOutstanding)})}),l.jsx(h.Z.Cell,{children:l.jsx("span",{className:"font-semibold text-red-600",children:formatCurrency(e.overdueAmount)})}),l.jsx(h.Z.Cell,{children:(0,l.jsxs)("span",{className:"text-gray-900",children:[e.maxDaysOverdue||0," days"]})}),l.jsx(h.Z.Cell,{children:l.jsx("div",{className:"text-sm text-gray-600",children:e.feeTypes?.join(", ")})})]},s))})]})]}),"fee_analysis"===s&&N.feeAnalysis&&(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)(o.Z,{children:[l.jsx(o.Z.Header,{children:l.jsx(o.Z.Title,{children:"Fee Type Performance"})}),l.jsx("div",{className:"space-y-4",children:N.feeAnalysis.feeTypePerformance?.map((e,s)=>l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:e.feeType}),l.jsxs("div",{className:"text-sm text-gray-500",children:[e.studentCount," students"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"font-semibold text-gray-900",children:formatCurrency(e.totalAmount)}),l.jsxs("div",{className:"text-sm text-green-600",children:[formatPercentage(e.collectionRate)," collected"]})]})]},s))})]}),(0,l.jsxs)(o.Z,{children:[l.jsx(o.Z.Header,{children:l.jsx(o.Z.Title,{children:"Payment Method Analysis"})}),l.jsx("div",{className:"space-y-4",children:N.feeAnalysis.paymentMethodBreakdown?.map((e,s)=>l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:e.paymentMethod?.replace("_"," ")}),l.jsxs("div",{className:"text-sm text-gray-500",children:[e.transactionCount," transactions"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"font-semibold text-gray-900",children:formatCurrency(e.totalAmount)}),l.jsxs("div",{className:"text-sm text-blue-600",children:[formatPercentage(e.percentage)," of total"]})]})]},s))})]})]})]}):(0,l.jsxs)(o.Z,{className:"text-center py-12",children:[l.jsx(y.DKx,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Report Data"}),l.jsx("p",{className:"text-gray-500",children:"Select a report type and period to generate financial reports."})]})]})})]})]})};a()}catch(e){a(e)}})}};
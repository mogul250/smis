"use strict";exports.id=2361,exports.ids=[2361],exports.modules={6761:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.d(s,{a:()=>useAuth});var l=t(6689),r=t(8786),d=e([r]);r=(d.then?(await d)():d)[0];let useAuth=()=>{let e=(0,l.useContext)(r.ZP);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};a()}catch(e){a(e)}})},5868:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var l=t(997),r=t(6689),d=t.n(r),n=t(1163),c=t(4082),i=t(6422),x=t(4549),m=t(6893),o=t(8303),h=e([c,i,o]);[c,i,o]=h.then?(await h)():h;let __WEBPACK_DEFAULT_EXPORT__=()=>{let e=(0,n.useRouter)(),{courseId:s}=e.query,[t,a]=(0,r.useState)(!0),[h,u]=(0,r.useState)(!1),[g,j]=(0,r.useState)(null),[p,b]=(0,r.useState)(null),[N,f]=(0,r.useState)([]),[v,y]=(0,r.useState)(s||""),[w,_]=(0,r.useState)([]),[S,C]=(0,r.useState)([]),[A,G]=(0,r.useState)("Fall 2024"),[P,E]=(0,r.useState)({}),[F,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let fetchCourses=async()=>{try{let e=await o.$o.getClasses();f(e||[])}catch(e){j("Failed to load courses")}};fetchCourses()},[]),(0,r.useEffect)(()=>{if(!v){a(!1);return}let fetchCourseData=async()=>{try{a(!0),j(null);let e=await o.$o.getClassStudents(parseInt(v));_(e||[]);let s=[];C(s);let t={};(e||[]).forEach(e=>{let a=s.find(s=>s.student_id===e.id);t[e.id]={assessment_type:a?.assessment_type||"assignment",score:a?.score||"",max_score:a?.max_score||100,comments:a?.comments||""}}),E(t)}catch(e){j("Failed to load course data")}finally{a(!1)}};fetchCourseData()},[v,A]);let handleGradeChange=(e,s,t)=>{E(a=>({...a,[e]:{...a[e],[s]:t}}))},calculateGrade=(e,s)=>{if(!e||!s||0===s)return{percentage:0,letter:"F"};let t=Math.round(e/s*100),a="F";return t>=90?a="A+":t>=85?a="A":t>=80?a="A-":t>=75?a="B+":t>=70?a="B":t>=65?a="B-":t>=60?a="C+":t>=55?a="C":t>=50?a="C-":t>=45?a="D+":t>=40&&(a="D"),{percentage:t,letter:a}},handleSaveGrades=async()=>{if(v)try{u(!0),j(null);let e=Object.entries(P).filter(([e,s])=>s.score&&""!==s.score).map(([e,s])=>{let{percentage:t,letter:a}=calculateGrade(s.score,s.max_score);return{student:parseInt(e),grade:a,semester:A,date:new Date().toISOString().split("T")[0],comments:s.comments,max_score:s.max_score,type:s.assessment_type,score:parseFloat(s.score)}});if(0===e.length){j("No grades to save");return}await o.$o.enterGrades({courseId:parseInt(v),grades:e}),b("Grades saved successfully!"),D(!1),C([]),setTimeout(()=>b(null),5e3)}catch(e){j(e.response?.data?.message||"Failed to save grades")}finally{u(!1)}},k=d().useMemo(()=>{let e=Object.values(P).filter(e=>e.score&&e.max_score&&""!==e.score);if(0===e.length)return{average:0,highest:0,lowest:0,graded:0,total:w.length};let s=e.map(e=>parseFloat(e.score)/parseFloat(e.max_score)*100);return{average:Math.round(s.reduce((e,s)=>e+s,0)/s.length),highest:Math.round(Math.max(...s)),lowest:Math.round(Math.min(...s)),graded:e.length,total:w.length}},[P,w]);return t?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(c.default,{}),(0,l.jsxs)("div",{className:"flex",children:[l.jsx(i.default,{}),l.jsx("main",{className:"flex-1 p-6",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx(x.Z,{size:"lg"})})})]})]}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(c.default,{}),(0,l.jsxs)("div",{className:"flex",children:[l.jsx(i.default,{}),(0,l.jsxs)("main",{className:"flex-1 p-6",children:[l.jsx("div",{className:"mb-8",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Grade Management"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Enter and manage student grades"})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsxs)("button",{onClick:()=>D(!F),className:`inline-flex items-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium ${F?"border-red-300 text-red-700 bg-red-50 hover:bg-red-100":"border-blue-300 text-blue-700 bg-blue-50 hover:bg-blue-100"}`,children:[F?l.jsx(m.q5L,{className:"mr-2 h-4 w-4"}):l.jsx(m.vPQ,{className:"mr-2 h-4 w-4"}),F?"Cancel Edit":"Edit Grades"]}),F&&(0,l.jsxs)("button",{onClick:handleSaveGrades,disabled:h,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:[h?l.jsx(x.Z,{size:"sm",className:"mr-2"}):l.jsx(m.mW3,{className:"mr-2 h-4 w-4"}),"Save Grades"]})]})]})}),g&&l.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"flex",children:[l.jsx(m.q5L,{className:"h-5 w-5 text-red-400"}),(0,l.jsxs)("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),l.jsx("div",{className:"mt-2 text-sm text-red-700",children:l.jsx("p",{children:g})})]})]})}),p&&l.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"flex",children:[l.jsx(m.UgA,{className:"h-5 w-5 text-green-400"}),(0,l.jsxs)("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Success"}),l.jsx("div",{className:"mt-2 text-sm text-green-700",children:l.jsx("p",{children:p})})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Course"}),(0,l.jsxs)("select",{value:v,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:"Select a course"}),N.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," (",e.course_code,")"]},e.id))]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester"}),(0,l.jsxs)("select",{value:A,onChange:e=>G(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"Fall 2024",children:"Fall 2024"}),l.jsx("option",{value:"Spring 2024",children:"Spring 2024"}),l.jsx("option",{value:"Summer 2024",children:"Summer 2024"})]})]})]})}),v&&w.length>0&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mr-4",children:l.jsx(m.WY8,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.total})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mr-4",children:l.jsx(m.UgA,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Graded"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.graded})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center mr-4",children:l.jsx(m.DKx,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Class Average"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[k.average,"%"]})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mr-4",children:l.jsx(m.DKx,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Highest"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[k.highest,"%"]})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center mr-4",children:l.jsx(m.DKx,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lowest"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[k.lowest,"%"]})]})]})})]}),v?0===w.length?(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[l.jsx(m.WY8,{className:"mx-auto h-12 w-12 text-gray-400"}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No students found"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No students are enrolled in this course."})]}):(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Student Grades"})}),l.jsx("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assessment Type"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Max Score"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Comments"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(e=>{let s=P[e.id]||{},{percentage:t,letter:a}=calculateGrade(s.score,s.max_score);return(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center mr-3",children:(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[e.first_name?.[0],e.last_name?.[0]]})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.student_id||e.id]})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F?(0,l.jsxs)("select",{value:s.assessment_type||"assignment",onChange:s=>handleGradeChange(e.id,"assessment_type",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"assignment",children:"Assignment"}),l.jsx("option",{value:"quiz",children:"Quiz"}),l.jsx("option",{value:"midterm",children:"Midterm"}),l.jsx("option",{value:"final",children:"Final Exam"}),l.jsx("option",{value:"project",children:"Project"}),l.jsx("option",{value:"participation",children:"Participation"})]}):l.jsx("span",{className:"text-sm text-gray-900",children:s.assessment_type||"Assignment"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F?l.jsx("input",{type:"number",value:s.score||"",onChange:s=>handleGradeChange(e.id,"score",s.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"0",min:"0",step:"0.1"}):l.jsx("span",{className:"text-sm text-gray-900",children:s.score||"-"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F?l.jsx("input",{type:"number",value:s.max_score||100,onChange:s=>handleGradeChange(e.id,"max_score",s.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"100",min:"1"}):l.jsx("span",{className:"text-sm text-gray-900",children:s.max_score||100})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:"text-sm text-gray-900",children:s.score?`${t}%`:"-"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.score?l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t>=85?"text-green-600 bg-green-50":t>=70?"text-blue-600 bg-blue-50":t>=60?"text-yellow-600 bg-yellow-50":t>=50?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50"}`,children:a}):l.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),l.jsx("td",{className:"px-6 py-4",children:F?l.jsx("input",{type:"text",value:s.comments||"",onChange:s=>handleGradeChange(e.id,"comments",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional comments"}):l.jsx("span",{className:"text-sm text-gray-500",children:s.comments||"-"})})]},e.id)})})]})})]}):(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[l.jsx(m.DKx,{className:"mx-auto h-12 w-12 text-gray-400"}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Select a Course"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Choose a course from the dropdown above to manage grades."})]}),(0,l.jsxs)("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Grade Scale Reference"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 text-sm",children:[(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"font-semibold text-blue-800",children:"A+ (90-100%)"}),l.jsx("div",{className:"text-blue-600",children:"4.0 GPA"})]}),(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"font-semibold text-blue-800",children:"A (85-89%)"}),l.jsx("div",{className:"text-blue-600",children:"3.7 GPA"})]}),(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"font-semibold text-blue-800",children:"A- (80-84%)"}),l.jsx("div",{className:"text-blue-600",children:"3.3 GPA"})]}),(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"font-semibold text-blue-800",children:"B+ (75-79%)"}),l.jsx("div",{className:"text-blue-600",children:"3.0 GPA"})]}),(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"font-semibold text-blue-800",children:"B (70-74%)"}),l.jsx("div",{className:"text-blue-600",children:"2.7 GPA"})]}),(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"font-semibold text-blue-800",children:"B- (65-69%)"}),l.jsx("div",{className:"text-blue-600",children:"2.3 GPA"})]})]})]})]})]})]})};a()}catch(e){a(e)}})}};
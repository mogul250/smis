"use strict";exports.id=4218,exports.ids=[4218],exports.modules={4218:(e,s,a)=>{a.a(e,async(e,t)=>{try{a.r(s),a.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var l=a(997),n=a(6689),i=a.n(n),r=a(6761),c=a(3242),d=a(3240),m=a(4082),o=a(6422),h=a(4105),x=a(9180),g=a(5822),u=a(9175),j=a(4549),b=a(6893),p=e([r,d,m,o]);[r,d,m,o]=p.then?(await p)():p;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,r.a)(),[s,a]=(0,n.useState)("general"),[t,p]=(0,n.useState)(null),[y,f]=(0,n.useState)({}),{data:v,loading:N,error:C,refetch:S}=(0,c.h)(d.Sb.getSystemConfig),{loading:w,execute:k}=(0,c.c)();if(i().useEffect(()=>{v&&f(v)},[v]),!e||"admin"!==e.role)return l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx(u.Z,{variant:"error",children:"Access denied. Admin access required."})});let Z=[{id:"general",label:"General Settings",icon:b.nbt},{id:"database",label:"Database",icon:b.bGz},{id:"security",label:"Security",icon:b.bfl},{id:"email",label:"Email Settings",icon:b.Imn},{id:"system",label:"System Info",icon:b.j8v}],handleConfigChange=(e,s,a)=>{f(t=>({...t,[e]:{...t[e],[s]:a}}))},handleSaveConfig=async()=>{try{await k(()=>d.Sb.updateSystemConfig(y)),p({type:"success",text:"System configuration saved successfully!"}),S(),setTimeout(()=>p(null),5e3)}catch(e){p({type:"error",text:e.response?.data?.message||"Failed to save configuration"})}},handleTestEmailConfig=async()=>{try{await d.Sb.testEmailConfig(),p({type:"success",text:"Test email sent successfully!"}),setTimeout(()=>p(null),5e3)}catch(e){p({type:"error",text:e.response?.data?.message||"Failed to send test email"})}},handleBackupDatabase=async()=>{try{await d.Sb.backupDatabase(),p({type:"success",text:"Database backup initiated successfully!"}),setTimeout(()=>p(null),5e3)}catch(e){p({type:"error",text:e.response?.data?.message||"Failed to backup database"})}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(m.Z,{}),(0,l.jsxs)("div",{className:"flex",children:[l.jsx(o.Z,{}),l.jsx("main",{className:"flex-1 p-6",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Configuration"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system settings, security, and configuration"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[l.jsx(x.Z,{variant:"outline",size:"sm",icon:b.Bw1,onClick:S,children:"Refresh"}),l.jsx(x.Z,{variant:"primary",size:"sm",icon:b.mW3,onClick:handleSaveConfig,loading:w,children:"Save Changes"})]})]}),t&&l.jsx(u.Z,{variant:t.type,dismissible:!0,onDismiss:()=>p(null),children:t.text}),N?l.jsx(h.Z,{className:"flex justify-center py-12",children:l.jsx(j.Z,{size:"lg"})}):C?(0,l.jsxs)(u.Z,{variant:"error",children:["Failed to load system configuration: ",C]}):(0,l.jsxs)(h.Z,{children:[l.jsx("div",{className:"border-b border-gray-200",children:l.jsx("nav",{className:"-mb-px flex space-x-8",children:Z.map(e=>{let t=e.icon;return(0,l.jsxs)("button",{onClick:()=>a(e.id),className:`py-3 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors duration-200 ${s===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(t,{className:"w-4 h-4"}),l.jsx("span",{children:e.label})]},e.id)})})}),(0,l.jsxs)("div",{className:"p-6",children:["general"===s&&(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Institution Information"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx(g.Z,{label:"Institution Name",value:y.general?.institutionName||"",onChange:e=>handleConfigChange("general","institutionName",e.target.value),placeholder:"Enter institution name"}),l.jsx(g.Z,{label:"Institution Code",value:y.general?.institutionCode||"",onChange:e=>handleConfigChange("general","institutionCode",e.target.value),placeholder:"Enter institution code"}),l.jsx(g.Z,{label:"Academic Year",value:y.general?.academicYear||"",onChange:e=>handleConfigChange("general","academicYear",e.target.value),placeholder:"e.g., 2024-2025"}),l.jsx(g.Z,{label:"Current Semester",value:y.general?.currentSemester||"",onChange:e=>handleConfigChange("general","currentSemester",e.target.value),placeholder:"e.g., Fall 2024"})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx(g.Z,{label:"Contact Email",type:"email",value:y.general?.contactEmail||"",onChange:e=>handleConfigChange("general","contactEmail",e.target.value),placeholder:"admin@institution.edu"}),l.jsx(g.Z,{label:"Contact Phone",value:y.general?.contactPhone||"",onChange:e=>handleConfigChange("general","contactPhone",e.target.value),placeholder:"+1 (555) 123-4567"})]}),(0,l.jsxs)("div",{className:"mt-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Institution Address"}),l.jsx("textarea",{value:y.general?.address||"",onChange:e=>handleConfigChange("general","address",e.target.value),rows:3,className:"form-textarea",placeholder:"Enter complete institution address..."})]})]})]}),"database"===s&&(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Database Status"}),(0,l.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h4",{className:"font-semibold text-blue-900",children:"Database Information"}),(0,l.jsxs)("div",{className:"flex items-center text-green-600",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),l.jsx("span",{className:"text-sm font-medium",children:"Connected"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-blue-700 font-medium",children:"Database Type:"}),l.jsx("span",{className:"font-semibold text-blue-900",children:y.database?.type||"MySQL"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-blue-700 font-medium",children:"Database Size:"}),l.jsx("span",{className:"font-semibold text-blue-900",children:y.database?.size||"2.4 GB"})]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-blue-700 font-medium",children:"Last Backup:"}),l.jsx("span",{className:"font-semibold text-blue-900",children:y.database?.lastBackup?new Date(y.database.lastBackup).toLocaleDateString():"Never"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-blue-700 font-medium",children:"Uptime:"}),l.jsx("span",{className:"font-semibold text-blue-900",children:"99.9%"})]})]})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Database Operations"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)(x.Z,{variant:"primary",onClick:handleBackupDatabase,className:"justify-start",children:[l.jsx(b.bGz,{className:"w-4 h-4 mr-2"}),"Create Backup"]}),(0,l.jsxs)(x.Z,{variant:"outline",className:"justify-start",children:[l.jsx(b.Bw1,{className:"w-4 h-4 mr-2"}),"View Backup History"]}),(0,l.jsxs)(x.Z,{variant:"warning",className:"justify-start",children:[l.jsx(b.nbt,{className:"w-4 h-4 mr-2"}),"Optimize Database"]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Backup Settings"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx(g.Z,{label:"Backup Frequency (hours)",type:"number",value:y.database?.backupFrequency||"24",onChange:e=>handleConfigChange("database","backupFrequency",e.target.value),placeholder:"24"}),l.jsx(g.Z,{label:"Retention Period (days)",type:"number",value:y.database?.retentionPeriod||"30",onChange:e=>handleConfigChange("database","retentionPeriod",e.target.value),placeholder:"30"})]})]})]}),"security"===s&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Policy"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:y.security?.requireUppercase||!1,onChange:e=>handleConfigChange("security","requireUppercase",e.target.checked),className:"form-checkbox"}),l.jsx("span",{className:"ml-2 text-sm",children:"Require uppercase letters"})]}),(0,l.jsxs)("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:y.security?.requireNumbers||!1,onChange:e=>handleConfigChange("security","requireNumbers",e.target.checked),className:"form-checkbox"}),l.jsx("span",{className:"ml-2 text-sm",children:"Require numbers"})]}),(0,l.jsxs)("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:y.security?.requireSpecialChars||!1,onChange:e=>handleConfigChange("security","requireSpecialChars",e.target.checked),className:"form-checkbox"}),l.jsx("span",{className:"ml-2 text-sm",children:"Require special characters"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[l.jsx(g.Z,{label:"Minimum Password Length",type:"number",value:y.security?.minPasswordLength||"8",onChange:e=>handleConfigChange("security","minPasswordLength",e.target.value)}),l.jsx(g.Z,{label:"Session Timeout (minutes)",type:"number",value:y.security?.sessionTimeout||"60",onChange:e=>handleConfigChange("security","sessionTimeout",e.target.value)}),l.jsx(g.Z,{label:"Max Login Attempts",type:"number",value:y.security?.maxLoginAttempts||"5",onChange:e=>handleConfigChange("security","maxLoginAttempts",e.target.value)})]})]}),l.jsx("div",{children:(0,l.jsxs)("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:y.security?.enableTwoFactor||!1,onChange:e=>handleConfigChange("security","enableTwoFactor",e.target.checked),className:"form-checkbox"}),l.jsx("span",{className:"ml-2 text-sm font-medium",children:"Enable Two-Factor Authentication"})]})})]}),"email"===s&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx(g.Z,{label:"SMTP Server",value:y.email?.smtpServer||"",onChange:e=>handleConfigChange("email","smtpServer",e.target.value)}),l.jsx(g.Z,{label:"SMTP Port",type:"number",value:y.email?.smtpPort||"587",onChange:e=>handleConfigChange("email","smtpPort",e.target.value)}),l.jsx(g.Z,{label:"Username",value:y.email?.username||"",onChange:e=>handleConfigChange("email","username",e.target.value)}),l.jsx(g.Z,{label:"Password",type:"password",value:y.email?.password||"",onChange:e=>handleConfigChange("email","password",e.target.value)}),l.jsx(g.Z,{label:"From Email",type:"email",value:y.email?.fromEmail||"",onChange:e=>handleConfigChange("email","fromEmail",e.target.value)}),l.jsx(g.Z,{label:"From Name",value:y.email?.fromName||"",onChange:e=>handleConfigChange("email","fromName",e.target.value)})]}),l.jsx("div",{className:"space-y-2",children:(0,l.jsxs)("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:y.email?.enableSSL||!1,onChange:e=>handleConfigChange("email","enableSSL",e.target.checked),className:"form-checkbox"}),l.jsx("span",{className:"ml-2 text-sm",children:"Enable SSL/TLS"})]})}),l.jsx("div",{children:l.jsx(x.Z,{variant:"outline",onClick:handleTestEmailConfig,children:"Send Test Email"})})]}),"system"===s&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[l.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"System Information"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Version:"}),l.jsx("span",{className:"font-medium",children:y.system?.version||"1.0.0"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Environment:"}),l.jsx("span",{className:"font-medium",children:y.system?.environment||"Production"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Uptime:"}),l.jsx("span",{className:"font-medium",children:y.system?.uptime||"N/A"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),l.jsx("span",{className:"font-medium",children:y.system?.lastUpdated?new Date(y.system.lastUpdated).toLocaleString():"N/A"})]})]})]}),(0,l.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[l.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Performance Metrics"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"CPU Usage:"}),(0,l.jsxs)("span",{className:"font-medium",children:[y.system?.cpuUsage||"0","%"]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Memory Usage:"}),(0,l.jsxs)("span",{className:"font-medium",children:[y.system?.memoryUsage||"0","%"]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Disk Usage:"}),(0,l.jsxs)("span",{className:"font-medium",children:[y.system?.diskUsage||"0","%"]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Active Users:"}),l.jsx("span",{className:"font-medium",children:y.system?.activeUsers||"0"})]})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"System Maintenance"}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[l.jsx(x.Z,{variant:"warning",children:"Clear Cache"}),l.jsx(x.Z,{variant:"outline",children:"View System Logs"}),l.jsx(x.Z,{variant:"danger",children:"Restart System"})]})]})]})]})]})]})})]})]})};t()}catch(e){t(e)}})}};
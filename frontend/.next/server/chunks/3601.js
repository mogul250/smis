"use strict";exports.id=3601,exports.ids=[3601],exports.modules={7014:(e,t,a)=>{a.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var s=a(997);a(6689);let __WEBPACK_DEFAULT_EXPORT__=({children:e,variant:t="default",size:a="md",className:l="",...n})=>s.jsx("span",{className:`inline-flex items-center font-medium rounded-full ${{default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[t]} ${{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}[a]} ${l}`,...n,children:e})},3601:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var l=a(997),n=a(6689),i=a(6761),r=a(3242),d=a(3240),c=a(4082),x=a(6422),m=a(4105),h=a(6208),o=a(7014),u=a(9180),j=a(5822),g=a(9175),y=a(4549),p=a(6893),f=e([i,d,c,x]);[i,d,c,x]=f.then?(await f)():f;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,i.a)(),[t,a]=(0,n.useState)(""),[s,f]=(0,n.useState)("all"),[v,N]=(0,n.useState)("all"),[b,Z]=(0,n.useState)({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[w,_]=(0,n.useState)(null),{data:C,loading:D,error:P,refetch:S}=(0,r.h)(()=>d.sz.getPayments({search:t,status:s,method:v,...b}),[t,s,v,b]),{loading:T,execute:A}=(0,r.c)();if(!e||"finance"!==e.role)return l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx(g.Z,{variant:"error",children:"Access denied. Finance access required."})});let R=C?.payments||[],F=C?.stats||{},handleDateChange=(e,t)=>{Z(a=>({...a,[e]:t}))},handleViewReceipt=e=>{alert(`View receipt for payment ${e} functionality would be implemented here`)},handleRefundPayment=async e=>{try{await A(()=>d.sz.refundPayment(e)),_({type:"success",text:"Payment refund initiated successfully!"}),S(),setTimeout(()=>_(null),5e3)}catch(e){_({type:"error",text:e.response?.data?.message||"Failed to initiate refund"})}},handleVerifyPayment=async e=>{try{await A(()=>d.sz.verifyPayment(e)),_({type:"success",text:"Payment verified successfully!"}),S(),setTimeout(()=>_(null),5e3)}catch(e){_({type:"error",text:e.response?.data?.message||"Failed to verify payment"})}},getStatusBadgeVariant=e=>{switch(e){case"completed":return"success";case"pending":return"warning";case"failed":return"danger";default:return"default"}},getMethodBadgeVariant=e=>{switch(e){case"cash":return"success";case"card":case"online":return"primary";case"bank_transfer":return"warning";default:return"default"}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(c.Z,{}),(0,l.jsxs)("div",{className:"flex",children:[l.jsx(x.Z,{}),l.jsx("main",{className:"flex-1 p-6",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Management"}),l.jsx("p",{className:"text-gray-600",children:"Track and manage all payment transactions"})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[l.jsx(u.Z,{variant:"outline",icon:p._hL,children:"Export Report"}),l.jsx(u.Z,{variant:"outline",icon:p.Bw1,onClick:S,children:"Refresh"})]})]}),w&&l.jsx(g.Z,{variant:w.type,dismissible:!0,onDismiss:()=>_(null),children:w.text}),D?l.jsx(m.Z,{className:"flex justify-center py-12",children:l.jsx(y.Z,{size:"lg"})}):P?(0,l.jsxs)(g.Z,{variant:"error",children:["Failed to load payments: ",P]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsx(m.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-primary-blue rounded-lg flex items-center justify-center mr-4",children:l.jsx(p.oQC,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Payments"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",F.totalAmount?.toLocaleString()||"0"]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[F.totalCount||0," transactions"]})]})]})}),l.jsx(m.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-green rounded-lg flex items-center justify-center mr-4",children:l.jsx(p.XiQ,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",F.completedAmount?.toLocaleString()||"0"]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[F.completedCount||0," payments"]})]})]})}),l.jsx(m.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-orange rounded-lg flex items-center justify-center mr-4",children:l.jsx(p.vlc,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",F.pendingAmount?.toLocaleString()||"0"]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[F.pendingCount||0," payments"]})]})]})}),l.jsx(m.Z,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-red rounded-lg flex items-center justify-center mr-4",children:l.jsx(p.Bw1,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed/Refunded"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",F.failedAmount?.toLocaleString()||"0"]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[F.failedCount||0," payments"]})]})]})})]}),l.jsx(m.Z,{children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[l.jsx("div",{children:l.jsx(j.Z,{label:"Search",placeholder:"Search by student or transaction ID...",value:t,onChange:e=>a(e.target.value),icon:p.jRj})}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsx("select",{value:s,onChange:e=>f(e.target.value),className:"form-select",children:[{value:"all",label:"All Status"},{value:"completed",label:"Completed"},{value:"pending",label:"Pending"},{value:"failed",label:"Failed"},{value:"refunded",label:"Refunded"}].map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),l.jsx("select",{value:v,onChange:e=>N(e.target.value),className:"form-select",children:[{value:"all",label:"All Methods"},{value:"cash",label:"Cash"},{value:"card",label:"Credit/Debit Card"},{value:"bank_transfer",label:"Bank Transfer"},{value:"online",label:"Online Payment"},{value:"cheque",label:"Cheque"}].map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),l.jsx("input",{type:"date",value:b.startDate,onChange:e=>handleDateChange("startDate",e.target.value),className:"form-input"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),l.jsx("input",{type:"date",value:b.endDate,onChange:e=>handleDateChange("endDate",e.target.value),className:"form-input"})]})]})}),(0,l.jsxs)(m.Z,{children:[l.jsx(m.Z.Header,{children:l.jsx(m.Z.Title,{children:"Payment Transactions"})}),R.length>0?(0,l.jsxs)(h.Z,{children:[l.jsx(h.Z.Header,{children:(0,l.jsxs)(h.Z.Row,{children:[l.jsx(h.Z.Head,{children:"Transaction ID"}),l.jsx(h.Z.Head,{children:"Student"}),l.jsx(h.Z.Head,{children:"Fee Type"}),l.jsx(h.Z.Head,{children:"Amount"}),l.jsx(h.Z.Head,{children:"Method"}),l.jsx(h.Z.Head,{children:"Date"}),l.jsx(h.Z.Head,{children:"Status"}),l.jsx(h.Z.Head,{children:"Actions"})]})}),l.jsx(h.Z.Body,{children:R.map((e,t)=>(0,l.jsxs)(h.Z.Row,{children:[l.jsx(h.Z.Cell,{children:l.jsx("span",{className:"font-mono text-sm",children:e.transaction_id})}),(0,l.jsxs)(h.Z.Cell,{children:[l.jsx("div",{className:"font-medium text-gray-900",children:e.student_name}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.student_id]})]}),l.jsx(h.Z.Cell,{children:l.jsx("span",{className:"text-gray-900",children:e.fee_type})}),l.jsx(h.Z.Cell,{children:(0,l.jsxs)("span",{className:"font-semibold text-gray-900",children:["$",parseFloat(e.amount).toFixed(2)]})}),l.jsx(h.Z.Cell,{children:l.jsx(o.Z,{variant:getMethodBadgeVariant(e.payment_method),children:e.payment_method?.replace("_"," ")})}),(0,l.jsxs)(h.Z.Cell,{children:[l.jsx("div",{className:"text-gray-900",children:new Date(e.payment_date).toLocaleDateString()}),l.jsx("div",{className:"text-sm text-gray-500",children:new Date(e.payment_date).toLocaleTimeString()})]}),l.jsx(h.Z.Cell,{children:l.jsx(o.Z,{variant:getStatusBadgeVariant(e.status),children:e.status})}),l.jsx(h.Z.Cell,{children:(0,l.jsxs)("div",{className:"flex space-x-2",children:[l.jsx(u.Z,{variant:"outline",size:"sm",icon:p.rDJ,onClick:()=>handleViewReceipt(e.id),children:"Receipt"}),"pending"===e.status&&l.jsx(u.Z,{variant:"success",size:"sm",onClick:()=>handleVerifyPayment(e.id),loading:T,children:"Verify"}),"completed"===e.status&&l.jsx(u.Z,{variant:"warning",size:"sm",onClick:()=>handleRefundPayment(e.id),loading:T,children:"Refund"})]})})]},t))})]}):(0,l.jsxs)("div",{className:"text-center py-8",children:[l.jsx(p.XiQ,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payments Found"}),l.jsx("p",{className:"text-gray-500",children:"No payment transactions match the current filters."})]})]})]})]})})]})]})};s()}catch(e){s(e)}})}};
"use strict";exports.id=2158,exports.ids=[2158],exports.modules={2756:(e,a,s)=>{s.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=s(997),r=s(6689),l=s(9180),n=s(5822),i=s(6893);let __WEBPACK_DEFAULT_EXPORT__=({isOpen:e,onClose:a,onSubmit:s})=>{let[d,c]=(0,r.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"student",departmentId:"",phone:"",address:"",dateOfBirth:"",gender:"",studentId:"",staffId:"",enrollmentYear:"",currentYear:"",hireDate:"",qualifications:"",subjects:[]}),[m,o]=(0,r.useState)({}),[h,x]=(0,r.useState)(!1),[u,g]=(0,r.useState)([]),f=[{value:"student",label:"Student",icon:i.WY8},{value:"teacher",label:"Teacher",icon:i.fzv},{value:"hod",label:"Head of Department",icon:i.bfl},{value:"finance",label:"Finance Staff",icon:i.fzv},{value:"admin",label:"Administrator",icon:i.bfl}];(0,r.useEffect)(()=>{g([{id:1,name:"Computer Science"},{id:2,name:"Mathematics"},{id:3,name:"Physics"},{id:4,name:"Chemistry"},{id:5,name:"Biology"}])},[]);let handleChange=e=>{let{name:a,value:s}=e.target;c(e=>({...e,[a]:s})),m[a]&&o(e=>({...e,[a]:""}))},validateForm=()=>{let e={};return d.firstName.trim()||(e.firstName="First name is required"),d.lastName.trim()||(e.lastName="Last name is required"),d.email.trim()||(e.email="Email is required"),d.password||(e.password="Password is required"),d.confirmPassword||(e.confirmPassword="Please confirm password"),d.role||(e.role="Role is required"),d.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)&&(e.email="Please enter a valid email address"),d.password&&d.password.length<6&&(e.password="Password must be at least 6 characters"),d.password!==d.confirmPassword&&(e.confirmPassword="Passwords do not match"),"student"!==d.role||(d.studentId.trim()||(e.studentId="Student ID is required"),d.enrollmentYear||(e.enrollmentYear="Enrollment year is required"),d.currentYear||(e.currentYear="Current year is required")),["teacher","hod","finance","admin"].includes(d.role)&&(d.staffId.trim()||(e.staffId="Staff ID is required"),d.hireDate||(e.hireDate="Hire date is required")),o(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){x(!0);try{let e={firstName:d.firstName.trim(),lastName:d.lastName.trim(),email:d.email.trim().toLowerCase(),password:d.password,role:d.role,departmentId:d.departmentId||null,additionalData:{phone:d.phone,address:d.address,dateOfBirth:d.dateOfBirth,gender:d.gender,..."student"===d.role&&{studentId:d.studentId,enrollmentYear:parseInt(d.enrollmentYear),currentYear:parseInt(d.currentYear)},...["teacher","hod","finance","admin"].includes(d.role)&&{staffId:d.staffId,hireDate:d.hireDate,qualifications:d.qualifications,subjects:d.subjects}}};await s(e),c({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"student",departmentId:"",phone:"",address:"",dateOfBirth:"",gender:"",studentId:"",staffId:"",enrollmentYear:"",currentYear:"",hireDate:"",qualifications:"",subjects:[]}),o({})}catch(e){o({submit:e.response?.data?.message||"Failed to create user"})}finally{x(!1)}}};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New User"}),t.jsx(l.Z,{variant:"outline",size:"sm",icon:i.q5L,onClick:a})]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[m.submit&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsx("p",{className:"text-sm text-red-600",children:m.submit})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"First Name",name:"firstName",value:d.firstName,onChange:handleChange,error:m.firstName,required:!0,icon:i.fzv}),t.jsx(n.Z,{label:"Last Name",name:"lastName",value:d.lastName,onChange:handleChange,error:m.lastName,required:!0,icon:i.fzv})]}),t.jsx(n.Z,{label:"Email Address",name:"email",type:"email",value:d.email,onChange:handleChange,error:m.email,required:!0,icon:i.Imn})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Role ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:f.map(e=>{let a=e.icon;return(0,t.jsxs)("label",{className:`relative flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${d.role===e.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:[t.jsx("input",{type:"radio",name:"role",value:e.value,checked:d.role===e.value,onChange:handleChange,className:"sr-only"}),t.jsx(a,{className:"w-5 h-5 mr-2"}),t.jsx("span",{className:"text-sm font-medium",children:e.label})]},e.value)})}),m.role&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.role})]}),"student"===d.role?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"Student ID",name:"studentId",value:d.studentId,onChange:handleChange,error:m.studentId,required:!0,placeholder:"e.g., STU2024001"}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsxs)("select",{name:"departmentId",value:d.departmentId,onChange:handleChange,className:"form-select",children:[t.jsx("option",{value:"",children:"Select Department"}),u.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"Enrollment Year",name:"enrollmentYear",type:"number",value:d.enrollmentYear,onChange:handleChange,error:m.enrollmentYear,required:!0,min:"2020",max:"2030"}),t.jsx(n.Z,{label:"Current Year",name:"currentYear",type:"number",value:d.currentYear,onChange:handleChange,error:m.currentYear,required:!0,min:"1",max:"4"})]})]}):["teacher","hod","finance","admin"].includes(d.role)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"Staff ID",name:"staffId",value:d.staffId,onChange:handleChange,error:m.staffId,required:!0,placeholder:"e.g., STAFF2024001"}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsxs)("select",{name:"departmentId",value:d.departmentId,onChange:handleChange,className:"form-select",children:[t.jsx("option",{value:"",children:"Select Department"}),u.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),t.jsx(n.Z,{label:"Hire Date",name:"hireDate",type:"date",value:d.hireDate,onChange:handleChange,error:m.hireDate,required:!0}),t.jsx(n.Z,{label:"Qualifications",name:"qualifications",value:d.qualifications,onChange:handleChange,placeholder:"e.g., PhD in Computer Science, MSc Mathematics"})]}):null,(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"Password",name:"password",type:"password",value:d.password,onChange:handleChange,error:m.password,required:!0,icon:i.UIZ}),t.jsx(n.Z,{label:"Confirm Password",name:"confirmPassword",type:"password",value:d.confirmPassword,onChange:handleChange,error:m.confirmPassword,required:!0,icon:i.UIZ})]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"Phone Number",name:"phone",value:d.phone,onChange:handleChange,icon:i.tUt,placeholder:"+1 (555) 123-4567"}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),t.jsx("select",{name:"gender",value:d.gender,onChange:handleChange,className:"form-select",children:[{value:"",label:"Select Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}].map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),t.jsx(n.Z,{label:"Date of Birth",name:"dateOfBirth",type:"date",value:d.dateOfBirth,onChange:handleChange,icon:i.vlc}),t.jsx(n.Z,{label:"Address",name:"address",value:d.address,onChange:handleChange,icon:i.i63,placeholder:"Street address, city, state, zip code"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[t.jsx(l.Z,{type:"button",variant:"outline",onClick:a,disabled:h,children:"Cancel"}),t.jsx(l.Z,{type:"submit",variant:"primary",loading:h,children:"Create User"})]})]})]})}):null}},7301:(e,a,s)=>{s.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=s(997),r=s(6689),l=s(9180),n=s(6893);let __WEBPACK_DEFAULT_EXPORT__=({isOpen:e,user:a,onClose:s,onConfirm:i})=>{let[d,c]=(0,r.useState)(!1),[m,o]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),u="DELETE",handleConfirm=async()=>{if(m!==u){x(`Please type "${u}" to confirm`);return}c(!0),x("");try{await i(a.id)}catch(e){x(e.response?.data?.message||"Failed to delete user")}finally{c(!1)}},handleClose=()=>{d||(o(""),x(""),s())};if(!e||!a)return null;let g=(e=>{let a={admin:n.bfl,hod:n.bfl,teacher:n.fzv,finance:n.fzv,student:n.fzv};return a[e]||n.fzv})(a.role);return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",children:t.jsx(n.BJv,{className:"w-5 h-5 text-red-600"})}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Delete User"})]}),t.jsx(l.Z,{variant:"outline",size:"sm",icon:n.q5L,onClick:handleClose,disabled:d})]}),(0,t.jsxs)("div",{className:"p-6",children:[t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mr-4",children:(0,t.jsxs)("span",{className:"text-sm font-medium text-white",children:[a.first_name?.[0],a.last_name?.[0]]})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("h3",{className:"font-medium text-gray-900",children:[a.first_name," ",a.last_name]}),(0,t.jsxs)("div",{className:`ml-2 flex items-center ${{admin:"text-red-600",hod:"text-orange-600",teacher:"text-blue-600",finance:"text-green-600",student:"text-purple-600"}[a.role]||"text-gray-600"}`,children:[t.jsx(g,{className:"w-4 h-4 mr-1"}),t.jsx("span",{className:"text-sm font-medium capitalize",children:a.role})]})]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[t.jsx(n.Imn,{className:"w-3 h-3 mr-1"}),a.email]}),a.department_name&&t.jsx("div",{className:"text-xs text-gray-400 mt-1",children:a.department_name})]})]})}),t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx(n.BJv,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),(0,t.jsxs)("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Warning: This action cannot be undone"}),t.jsx("p",{className:"text-sm text-red-700",children:{admin:"Deleting an administrator will remove all their system access and permissions. This action cannot be undone.",hod:"Deleting a Head of Department will affect department management and approvals. Consider transferring responsibilities first.",teacher:"Deleting a teacher will remove their access to classes, grades, and student records. This may affect ongoing courses.",finance:"Deleting finance staff will remove their access to financial records and payment processing.",student:"Deleting a student will remove their academic records, grades, and enrollment status. This action cannot be undone."}[a.role]||"This action will permanently delete the user and cannot be undone."})]})]})}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["To confirm deletion, type ",t.jsx("span",{className:"font-mono font-bold text-red-600",children:u})," below:"]}),t.jsx("input",{type:"text",value:m,onChange:e=>{o(e.target.value),h&&x("")},placeholder:`Type "${u}" to confirm`,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 ${h?"border-red-300":"border-gray-300"}`,disabled:d}),h&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[t.jsx("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"What will be deleted:"}),(0,t.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[t.jsx("li",{children:"• User account and login credentials"}),t.jsx("li",{children:"• Personal information and profile data"}),"student"===a.role&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("li",{children:"• Academic records and grades"}),t.jsx("li",{children:"• Enrollment and attendance history"}),t.jsx("li",{children:"• Fee payment records"})]}),["teacher","hod"].includes(a.role)&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("li",{children:"• Class assignments and teaching records"}),t.jsx("li",{children:"• Grade entries and assessments"}),t.jsx("li",{children:"• Department associations"})]}),"finance"===a.role&&t.jsx("li",{children:"• Financial transaction records"}),t.jsx("li",{children:"• System access and permissions"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[t.jsx(l.Z,{variant:"outline",onClick:handleClose,disabled:d,children:"Cancel"}),t.jsx(l.Z,{variant:"danger",onClick:handleConfirm,loading:d,disabled:m!==u,icon:n.Ybf,children:"Delete User"})]})]})]})})}},5329:(e,a,s)=>{s.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=s(997),r=s(6689),l=s(9180),n=s(5822),i=s(6893);let __WEBPACK_DEFAULT_EXPORT__=({isOpen:e,user:a,onClose:s,onSubmit:d})=>{let[c,m]=(0,r.useState)({firstName:"",lastName:"",email:"",role:"",departmentId:"",phone:"",address:"",dateOfBirth:"",gender:"",status:"active",studentId:"",staffId:"",enrollmentYear:"",currentYear:"",hireDate:"",qualifications:"",subjects:[]}),[o,h]=(0,r.useState)({}),[x,u]=(0,r.useState)(!1),[g,f]=(0,r.useState)([]),p=[{value:"student",label:"Student",icon:i.WY8},{value:"teacher",label:"Teacher",icon:i.fzv},{value:"hod",label:"Head of Department",icon:i.bfl},{value:"finance",label:"Finance Staff",icon:i.fzv},{value:"admin",label:"Administrator",icon:i.bfl}];(0,r.useEffect)(()=>{f([{id:1,name:"Computer Science"},{id:2,name:"Mathematics"},{id:3,name:"Physics"},{id:4,name:"Chemistry"},{id:5,name:"Biology"}])},[]),(0,r.useEffect)(()=>{a&&e&&m({firstName:a.first_name||"",lastName:a.last_name||"",email:a.email||"",role:a.role||"",departmentId:a.department_id||"",phone:a.phone||"",address:a.address||"",dateOfBirth:a.date_of_birth||"",gender:a.gender||"",status:a.status||"active",studentId:a.student_id||"",staffId:a.staff_id||"",enrollmentYear:a.enrollment_year||"",currentYear:a.current_year||"",hireDate:a.hire_date||"",qualifications:a.qualifications||"",subjects:a.subjects||[]})},[a,e]);let handleChange=e=>{let{name:a,value:s}=e.target;m(e=>({...e,[a]:s})),o[a]&&h(e=>({...e,[a]:""}))},validateForm=()=>{let e={};return c.firstName.trim()||(e.firstName="First name is required"),c.lastName.trim()||(e.lastName="Last name is required"),c.email.trim()||(e.email="Email is required"),c.role||(e.role="Role is required"),c.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)&&(e.email="Please enter a valid email address"),"student"!==c.role||(c.studentId.trim()||(e.studentId="Student ID is required"),c.enrollmentYear||(e.enrollmentYear="Enrollment year is required"),c.currentYear||(e.currentYear="Current year is required")),["teacher","hod","finance","admin"].includes(c.role)&&(c.staffId.trim()||(e.staffId="Staff ID is required"),c.hireDate||(e.hireDate="Hire date is required")),h(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){u(!0);try{let e={firstName:c.firstName.trim(),lastName:c.lastName.trim(),email:c.email.trim().toLowerCase(),role:c.role,departmentId:c.departmentId||null,status:c.status,additionalData:{phone:c.phone,address:c.address,dateOfBirth:c.dateOfBirth,gender:c.gender,..."student"===c.role&&{studentId:c.studentId,enrollmentYear:parseInt(c.enrollmentYear),currentYear:parseInt(c.currentYear)},...["teacher","hod","finance","admin"].includes(c.role)&&{staffId:c.staffId,hireDate:c.hireDate,qualifications:c.qualifications,subjects:c.subjects}}};await d(a.id,e)}catch(e){h({submit:e.response?.data?.message||"Failed to update user"})}finally{u(!1)}}};return e&&a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit User"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Editing ",a.first_name," ",a.last_name]})]}),t.jsx(l.Z,{variant:"outline",size:"sm",icon:i.q5L,onClick:s})]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"p-6 space-y-6",children:[o.submit&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsx("p",{className:"text-sm text-red-600",children:o.submit})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"First Name",name:"firstName",value:c.firstName,onChange:handleChange,error:o.firstName,required:!0,icon:i.fzv}),t.jsx(n.Z,{label:"Last Name",name:"lastName",value:c.lastName,onChange:handleChange,error:o.lastName,required:!0,icon:i.fzv})]}),t.jsx(n.Z,{label:"Email Address",name:"email",type:"email",value:c.email,onChange:handleChange,error:o.email,required:!0,icon:i.Imn})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Role & Status"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Role ",t.jsx("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{name:"role",value:c.role,onChange:handleChange,className:"form-select",required:!0,children:[t.jsx("option",{value:"",children:"Select Role"}),p.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]}),o.role&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.role})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsx("select",{name:"status",value:c.status,onChange:handleChange,className:"form-select",children:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}].map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]})]})]}),"student"===c.role?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"Student ID",name:"studentId",value:c.studentId,onChange:handleChange,error:o.studentId,required:!0,placeholder:"e.g., STU2024001"}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsxs)("select",{name:"departmentId",value:c.departmentId,onChange:handleChange,className:"form-select",children:[t.jsx("option",{value:"",children:"Select Department"}),g.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"Enrollment Year",name:"enrollmentYear",type:"number",value:c.enrollmentYear,onChange:handleChange,error:o.enrollmentYear,required:!0,min:"2020",max:"2030"}),t.jsx(n.Z,{label:"Current Year",name:"currentYear",type:"number",value:c.currentYear,onChange:handleChange,error:o.currentYear,required:!0,min:"1",max:"4"})]})]}):["teacher","hod","finance","admin"].includes(c.role)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"Staff ID",name:"staffId",value:c.staffId,onChange:handleChange,error:o.staffId,required:!0,placeholder:"e.g., STAFF2024001"}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsxs)("select",{name:"departmentId",value:c.departmentId,onChange:handleChange,className:"form-select",children:[t.jsx("option",{value:"",children:"Select Department"}),g.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),t.jsx(n.Z,{label:"Hire Date",name:"hireDate",type:"date",value:c.hireDate,onChange:handleChange,error:o.hireDate,required:!0}),t.jsx(n.Z,{label:"Qualifications",name:"qualifications",value:c.qualifications,onChange:handleChange,placeholder:"e.g., PhD in Computer Science, MSc Mathematics"})]}):null,(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(n.Z,{label:"Phone Number",name:"phone",value:c.phone,onChange:handleChange,icon:i.tUt,placeholder:"+1 (555) 123-4567"}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),t.jsx("select",{name:"gender",value:c.gender,onChange:handleChange,className:"form-select",children:[{value:"",label:"Select Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}].map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),t.jsx(n.Z,{label:"Date of Birth",name:"dateOfBirth",type:"date",value:c.dateOfBirth,onChange:handleChange,icon:i.vlc}),t.jsx(n.Z,{label:"Address",name:"address",value:c.address,onChange:handleChange,icon:i.i63,placeholder:"Street address, city, state, zip code"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[t.jsx(l.Z,{type:"button",variant:"outline",onClick:s,disabled:x,children:"Cancel"}),t.jsx(l.Z,{type:"submit",variant:"primary",loading:x,icon:i.mW3,children:"Save Changes"})]})]})]})}):null}},7563:(e,a,s)=>{s.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=s(997),r=s(6689),l=s(4105),n=s(9180),i=s(7014),d=s(6893);let __WEBPACK_DEFAULT_EXPORT__=({users:e,loading:a,error:s,currentPage:c,totalPages:m,onPageChange:o,onUserAction:h})=>{let[x,u]=(0,r.useState)([]),[g,f]=(0,r.useState)(null),getRoleBadgeVariant=e=>({admin:"danger",hod:"warning",teacher:"primary",finance:"success",student:"default"})[e]||"default",getStatusBadgeVariant=e=>({active:"success",inactive:"default",suspended:"danger",pending:"warning"})[e]||"default",getRoleIcon=e=>{let a={admin:d.bfl,hod:d.bfl,teacher:d.WY8,finance:d.bAx,student:d.WY8};return a[e]||d.WY8},handleSelectUser=e=>{u(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},formatDate=e=>{if(!e)return"Never";let a=new Date(e);return a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},formatTime=e=>{if(!e)return"";let a=new Date(e);return a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};return a?t.jsx(l.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 mb-6"}),t.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),t.jsx("div",{className:"h-6 bg-gray-200 rounded w-16"}),t.jsx("div",{className:"h-6 bg-gray-200 rounded w-16"}),t.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"})]},a))})]})}):s?t.jsx(l.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-red-500 mb-2",children:t.jsx(d.WY8,{className:"w-12 h-12 mx-auto"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Users"}),t.jsx("p",{className:"text-gray-500",children:s})]})}):e&&0!==e.length?(0,t.jsxs)(l.Z,{className:"overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Users"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[x.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[x.length," selected"]}),t.jsx(n.Z,{variant:"outline",size:"sm",children:"Bulk Actions"})]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[e.length," users"]})]})]})}),t.jsx("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left",children:t.jsx("input",{type:"checkbox",checked:x.length===e.length,onChange:()=>{x.length===e.length?u([]):u(e.map(e=>e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{let a=getRoleIcon(e.role);return(0,t.jsxs)("tr",{className:`hover:bg-gray-50 transition-colors ${x.includes(e.id)?"bg-blue-50":""}`,children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("input",{type:"checkbox",checked:x.includes(e.id),onChange:()=>handleSelectUser(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mr-4",children:(0,t.jsxs)("span",{className:"text-sm font-medium text-white",children:[e.first_name?.[0],e.last_name?.[0]]})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[t.jsx(d.Imn,{className:"w-3 h-3 mr-1"}),e.email]}),e.staff_id&&(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",e.staff_id]})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(a,{className:"w-4 h-4 mr-2 text-gray-400"}),t.jsx(i.Z,{variant:getRoleBadgeVariant(e.role),children:e.role?.toUpperCase()})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.department_name||"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(i.Z,{variant:getStatusBadgeVariant(e.status||"active"),children:e.status||"active"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(d.vlc,{className:"w-4 h-4 mr-1 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("div",{children:formatDate(e.last_login)}),e.last_login&&t.jsx("div",{className:"text-xs text-gray-500",children:formatTime(e.last_login)})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:formatDate(e.created_at)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[t.jsx(n.Z,{variant:"outline",size:"sm",icon:d.rDJ,onClick:()=>h("view",e),children:"View"}),t.jsx(n.Z,{variant:"primary",size:"sm",icon:d.vPQ,onClick:()=>h("edit",e),children:"Edit"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(n.Z,{variant:"outline",size:"sm",icon:d.$Pu,onClick:()=>f(g===e.id?null:e.id)}),g===e.id&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("button",{onClick:()=>{h("activate",e),f(null)},className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:[t.jsx(d.tMu,{className:"w-4 h-4 mr-2"}),"Activate"]}),(0,t.jsxs)("button",{onClick:()=>{h("deactivate",e),f(null)},className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:[t.jsx(d.pBC,{className:"w-4 h-4 mr-2"}),"Deactivate"]}),t.jsx("hr",{className:"my-1"}),(0,t.jsxs)("button",{onClick:()=>{h("delete",e),f(null)},className:"flex items-center px-4 py-2 text-sm text-red-700 hover:bg-red-50 w-full text-left",children:[t.jsx(d.Ybf,{className:"w-4 h-4 mr-2"}),"Delete"]})]})})]})]})})]},e.id)})})]})}),m>1&&t.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",c," of ",m]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(n.Z,{variant:"outline",size:"sm",icon:d.YFh,disabled:1===c,onClick:()=>o(c-1),children:"Previous"}),t.jsx(n.Z,{variant:"outline",size:"sm",icon:d.Tfp,iconPosition:"right",disabled:c===m,onClick:()=>o(c+1),children:"Next"})]})]})})]}):t.jsx(l.Z,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(d.WY8,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Users Found"}),t.jsx("p",{className:"text-gray-500 mb-6",children:"No users match the current filters. Try adjusting your search criteria."}),t.jsx(n.Z,{variant:"primary",onClick:()=>h("create"),children:"Create First User"})]})})}},7014:(e,a,s)=>{s.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=s(997);s(6689);let __WEBPACK_DEFAULT_EXPORT__=({children:e,variant:a="default",size:s="md",className:r="",...l})=>t.jsx("span",{className:`inline-flex items-center font-medium rounded-full ${{default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[a]} ${{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}[s]} ${r}`,...l,children:e})},2158:(e,a,s)=>{s.a(e,async(e,t)=>{try{s.r(a),s.d(a,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=s(997),l=s(6689),n=s(1163),i=s(6761),d=s(3240),c=s(4082),m=s(6422),o=s(9180),h=s(4105),x=s(856),u=s(7563),g=s(2756),f=s(5329),p=s(7301),j=s(6893),v=e([i,d,c,m]);[i,d,c,m]=v.then?(await v)():v;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e,isAuthenticated:a}=(0,i.a)(),s=(0,n.useRouter)(),[t,v]=(0,l.useState)([]),[b,y]=(0,l.useState)(!0),[N,w]=(0,l.useState)(null),[C,_]=(0,l.useState)(!1),[S,D]=(0,l.useState)(1),[I,Z]=(0,l.useState)(1),[U,E]=(0,l.useState)(0),[P,q]=(0,l.useState)(""),[Y,k]=(0,l.useState)(""),[T,A]=(0,l.useState)(""),[F,B]=(0,l.useState)(!1),[R,O]=(0,l.useState)(!1),[z,L]=(0,l.useState)(!1),[W,M]=(0,l.useState)(null),[$,K]=(0,l.useState)({totalUsers:0,activeUsers:0,newThisMonth:0,byRole:{}});(0,l.useEffect)(()=>{if(!a||e?.role!=="admin"){s.push("/dashboard");return}},[a,e,s]);let fetchUsers=async(e=1,a="",s="",t="")=>{try{y(1===e),_(1!==e);let r={page:e,limit:10,...a&&{search:a},...s&&{role:s},...t&&{departmentId:t}},l=await d.Sb.getAllUsers(r),{users:n,pagination:i}=l.data;v(n),D(i.page),Z(i.pages),E(i.total),calculateUserStats(n),w(null)}catch(e){w("Failed to load users. Please try again.")}finally{y(!1),_(!1)}},calculateUserStats=e=>{let a={totalUsers:e.length,activeUsers:e.filter(e=>"active"===e.status).length,newThisMonth:e.filter(e=>{let a=new Date(e.created_at),s=new Date;return a.getMonth()===s.getMonth()&&a.getFullYear()===s.getFullYear()}).length,byRole:{}};e.forEach(e=>{a.byRole[e.role]=(a.byRole[e.role]||0)+1}),K(a)};(0,l.useEffect)(()=>{a&&e?.role==="admin"&&fetchUsers()},[a,e]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{fetchUsers(1,P,Y,T)},500);return()=>clearTimeout(e)},[P,Y,T]);let handleRefresh=()=>{fetchUsers(S,P,Y,T)},handleCreateUser=async e=>{try{await d.Sb.createUser(e),B(!1),handleRefresh()}catch(e){throw e}},handleEditUser=async(e,a)=>{try{await d.Sb.updateUser(e,a),O(!1),M(null),handleRefresh()}catch(e){throw e}},handleDeleteUser=async e=>{try{await d.Sb.deleteUser(e),L(!1),M(null),handleRefresh()}catch(e){throw e}},handleActivateUser=async e=>{try{await d.Sb.updateUserStatus(e,"active"),handleRefresh()}catch(e){}},handleDeactivateUser=async e=>{try{await d.Sb.updateUserStatus(e,"inactive"),handleRefresh()}catch(e){}};return a&&e?.role==="admin"?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(c.Z,{}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx(m.Z,{}),r.jsx("main",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[r.jsx(j.WY8,{className:"mr-3 text-blue-600"}),"User Management"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all users across the system - students, teachers, and staff"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(o.Z,{variant:"outline",icon:j.Bw1,onClick:handleRefresh,loading:C,size:"sm",children:"Refresh"}),r.jsx(o.Z,{variant:"outline",icon:j._hL,size:"sm",children:"Export"}),r.jsx(o.Z,{variant:"primary",icon:j.OvN,onClick:()=>B(!0),children:"Add User"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"lg:col-span-3",children:r.jsx(x.Z,{stats:$,totalUsers:U,loading:b})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx(x.f,{stats:$,loading:b})})]}),r.jsx(h.Z,{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 flex-1",children:[(0,r.jsxs)("div",{className:"relative flex-1 max-w-md",children:[r.jsx(j.jRj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Search users...",value:P,onChange:e=>q(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("select",{value:Y,onChange:e=>k(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"All Roles"}),r.jsx("option",{value:"student",children:"Students"}),r.jsx("option",{value:"teacher",children:"Teachers"}),r.jsx("option",{value:"hod",children:"HODs"}),r.jsx("option",{value:"finance",children:"Finance"}),r.jsx("option",{value:"admin",children:"Admins"})]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx(j.QqI,{className:"w-4 h-4 mr-1"}),U," total users"]})]})}),r.jsx(u.Z,{users:t,loading:b,error:N,currentPage:S,totalPages:I,onPageChange:e=>{fetchUsers(e,P,Y,T)},onUserAction:(e,a)=>{switch(M(a),e){case"create":B(!0);break;case"edit":O(!0);break;case"delete":L(!0);break;case"view":s.push(`/admin/users/${a.id}`);break;case"activate":handleActivateUser(a.id);break;case"deactivate":handleDeactivateUser(a.id)}}})]})})]}),F&&r.jsx(g.Z,{isOpen:F,onClose:()=>B(!1),onSubmit:handleCreateUser}),R&&W&&r.jsx(f.Z,{isOpen:R,user:W,onClose:()=>{O(!1),M(null)},onSubmit:handleEditUser}),z&&W&&r.jsx(p.Z,{isOpen:z,user:W,onClose:()=>{L(!1),M(null)},onConfirm:handleDeleteUser})]}):null};t()}catch(e){t(e)}})}};
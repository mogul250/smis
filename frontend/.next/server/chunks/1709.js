"use strict";exports.id=1709,exports.ids=[1709],exports.modules={1709:(e,a,s)=>{s.a(e,async(e,l)=>{try{s.r(a),s.d(a,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var n=s(997),t=s(6689),r=s.n(t),i=s(6761),d=s(3242),c=s(3240),h=s(4082),m=s(6422),o=s(4105),x=s(9180),u=s(5822),j=s(9175),g=s(4549),p=s(6893),f=e([i,c,h,m]);[i,c,h,m]=f.then?(await f)():f;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{user:e}=(0,i.a)(),[a,s]=(0,t.useState)(!1),[l,f]=(0,t.useState)({}),[_,v]=(0,t.useState)(null),{data:b,loading:y,error:N,refetch:C}=(0,d.h)(c.t7.getProfile);r().useEffect(()=>{b&&f({first_name:b.user?.first_name||"",last_name:b.user?.last_name||"",email:b.user?.email||"",phone:b.phone||"",address:b.address||"",date_of_birth:b.date_of_birth||"",gender:b.gender||""})},[b]);let handleInputChange=e=>{let{name:a,value:s}=e.target;f(e=>({...e,[a]:s}))},handleSave=async()=>{try{await c.t7.updateProfile(l),v({type:"success",text:"Profile updated successfully!"}),s(!1),C(),setTimeout(()=>v(null),5e3)}catch(e){v({type:"error",text:e.response?.data?.message||"Failed to update profile"})}};return e&&"student"===e.role?(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(h.Z,{}),(0,n.jsxs)("div",{className:"flex",children:[n.jsx(m.Z,{}),n.jsx("main",{className:"flex-1 p-6",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Profile"}),n.jsx("p",{className:"text-gray-600",children:"Manage your personal information"})]}),a?(0,n.jsxs)("div",{className:"flex space-x-2",children:[n.jsx(x.Z,{variant:"success",icon:p.mW3,onClick:handleSave,children:"Save Changes"}),n.jsx(x.Z,{variant:"secondary",icon:p.q5L,onClick:()=>{s(!1),b&&f({first_name:b.user?.first_name||"",last_name:b.user?.last_name||"",email:b.user?.email||"",phone:b.phone||"",address:b.address||"",date_of_birth:b.date_of_birth||"",gender:b.gender||""})},children:"Cancel"})]}):n.jsx(x.Z,{variant:"primary",icon:p.vPQ,onClick:()=>s(!0),children:"Edit Profile"})]}),_&&n.jsx(j.Z,{variant:_.type,dismissible:!0,onDismiss:()=>v(null),children:_.text}),y?n.jsx(o.Z,{className:"flex justify-center py-12",children:n.jsx(g.Z,{size:"lg"})}):N?(0,n.jsxs)(j.Z,{variant:"error",children:["Failed to load profile: ",N]}):(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx(o.Z,{children:(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("div",{className:"w-24 h-24 bg-primary-blue rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(p.fzv,{className:"w-12 h-12 text-white"})}),(0,n.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[b?.user?.first_name," ",b?.user?.last_name]}),(0,n.jsxs)("p",{className:"text-gray-600",children:["Student ID: ",b?.id]}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Enrolled: ",b?.enrollment_year]})]})}),n.jsx("div",{className:"lg:col-span-2",children:(0,n.jsxs)(o.Z,{children:[n.jsx(o.Z.Header,{children:n.jsx(o.Z.Title,{children:"Personal Information"})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(u.Z,{label:"First Name",name:"first_name",value:l.first_name,onChange:handleInputChange,disabled:!a,required:!0}),n.jsx(u.Z,{label:"Last Name",name:"last_name",value:l.last_name,onChange:handleInputChange,disabled:!a,required:!0}),n.jsx(u.Z,{label:"Email",name:"email",type:"email",value:l.email,onChange:handleInputChange,disabled:!a,required:!0}),n.jsx(u.Z,{label:"Phone",name:"phone",value:l.phone,onChange:handleInputChange,disabled:!a}),n.jsx(u.Z,{label:"Date of Birth",name:"date_of_birth",type:"date",value:l.date_of_birth,onChange:handleInputChange,disabled:!a}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,n.jsxs)("select",{name:"gender",value:l.gender,onChange:handleInputChange,disabled:!a,className:"form-select",children:[n.jsx("option",{value:"",children:"Select Gender"}),n.jsx("option",{value:"male",children:"Male"}),n.jsx("option",{value:"female",children:"Female"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(u.Z,{label:"Address",name:"address",value:l.address,onChange:handleInputChange,disabled:!a})})]})]})})]})]})})]})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(j.Z,{variant:"error",children:"Access denied. Student access required."})})};l()}catch(e){l(e)}})}};